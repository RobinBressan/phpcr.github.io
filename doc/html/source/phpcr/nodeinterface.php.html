<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Mon, 30 May 2011 13:13:18 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>PHPCR/NodeInterface.php (PHPCR API)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/phpcr/nodeinterface.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>PHPCR/NodeInterface.php</h1>
<div class="comment" id="overview_description"><p>This file is part of the PHPCR API and was originally ported from the Java
JCR API to PHP by Karsten Dambekalns for the FLOW3 project.</p><p>Copyright 2008-2011 Karsten Dambekalns <karsten@typo3.org></p><p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p><p>http://www.apache.org/licenses/LICENSE-2.0</p><p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div>

<hr>

<a name="line1"></a><pre class="php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
<a name="line2"></a>&nbsp;
<a name="line3"></a><span style="color: #009933; font-style: italic;">/**
<a name="line4"></a> * This file is part of the PHPCR API and was originally ported from the Java
<a name="line5"></a> * JCR API to PHP by Karsten Dambekalns for the FLOW3 project.
<a name="line6"></a> *
<a name="line7"></a> * Copyright 2008-2011 Karsten Dambekalns &lt;karsten@typo3.org&gt;
<a name="line8"></a> *
<a name="line9"></a> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<a name="line10"></a> * you may not use this file except in compliance with the License.
<a name="line11"></a> * You may obtain a copy of the License at
<a name="line12"></a> *
<a name="line13"></a> *     http://www.apache.org/licenses/LICENSE-2.0
<a name="line14"></a> *
<a name="line15"></a> * Unless required by applicable law or agreed to in writing, software
<a name="line16"></a> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<a name="line17"></a> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<a name="line18"></a> * See the License for the specific language governing permissions and
<a name="line19"></a> * limitations under the License.
<a name="line20"></a> *
<a name="line21"></a> * @license http://www.apache.org/licenses/LICENSE-2.0 Apache Software License 2.0
<a name="line22"></a> * @link http://phpcr.github.com/
<a name="line23"></a>*/</span>
<a name="line24"></a>&nbsp;
<a name="line25"></a><span style="color: #000000; font-weight: bold;">namespace</span> PHPCR<span style="color: #339933;">;</span>
<a name="line26"></a>&nbsp;
<a name="line27"></a><span style="color: #009933; font-style: italic;">/**
<a name="line28"></a> * The Node interface represents a node in a workspace.
<a name="line29"></a> *
<a name="line30"></a> * The \Traversable interface enables the implementation to be addressed with
<a name="line31"></a> * &lt;b&gt;foreach&lt;/b&gt;. Nodes have to implement either \IteratorAggregate or
<a name="line32"></a> * \Iterator.
<a name="line33"></a> * The iterator is equivalent to &lt;b&gt;getNodes()&lt;/b&gt; with no filter, returning
<a name="line34"></a> * a list of all child nodes. Keys are the node names, values the node instances.
<a name="line35"></a> *
<a name="line36"></a> * @package phpcr
<a name="line37"></a> * @subpackage interfaces
<a name="line38"></a> * @api
<a name="line39"></a> */</span>
<a name="line40"></a><span style="color: #000000; font-weight: bold;">interface</span> NodeInterface <span style="color: #000000; font-weight: bold;">extends</span> \PHPCR\ItemInterface<span style="color: #339933;">,</span> \Traversable
<a name="line41"></a><span style="color: #009900;">&#123;</span>
<a name="line42"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line43"></a>     * A constant for the JCR name jcr:content. This is the name of
<a name="line44"></a>     * a child node declared in NodeType nt:file and a property declared in
<a name="line45"></a>     * nt:linkedFile.
<a name="line46"></a>     * @api
<a name="line47"></a>     */</span>
<a name="line48"></a>    <span style="color: #000000; font-weight: bold;">const</span> JCR_CONTENT <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;{http://www.jcp.org/jcr/1.0}content&quot;</span><span style="color: #339933;">;</span>
<a name="line49"></a>&nbsp;
<a name="line50"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line51"></a>     * A constant for the node name jcr:propertyDefinition declared in nt:nodeType.
<a name="line52"></a>     * @api
<a name="line53"></a>     */</span>
<a name="line54"></a>    <span style="color: #000000; font-weight: bold;">const</span> JCR_PROPERTY_DEFINITION <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;{http://www.jcp.org/jcr/1.0}propertyDefinition&quot;</span><span style="color: #339933;">;</span>
<a name="line55"></a>&nbsp;
<a name="line56"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line57"></a>     * A constant for the node name jcr:childNodeDefinition declared in nt:nodeType.
<a name="line58"></a>     * @api
<a name="line59"></a>     */</span>
<a name="line60"></a>    <span style="color: #000000; font-weight: bold;">const</span> JCR_CHILD_NODE_DEFINITION <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;{http://www.jcp.org/jcr/1.0}childNodeDefinition&quot;</span><span style="color: #339933;">;</span>
<a name="line61"></a>&nbsp;
<a name="line62"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line63"></a>     * A constant for the node name jcr:rootVersion declared in nt:versionHistory.
<a name="line64"></a>     * @api
<a name="line65"></a>     */</span>
<a name="line66"></a>    <span style="color: #000000; font-weight: bold;">const</span> JCR_ROOT_VERSION <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;{http://www.jcp.org/jcr/1.0}rootVersion&quot;</span><span style="color: #339933;">;</span>
<a name="line67"></a>&nbsp;
<a name="line68"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line69"></a>     * A constant for the node name jcr:versionLabels declared in nt:versionHistory.
<a name="line70"></a>     * @api
<a name="line71"></a>     */</span>
<a name="line72"></a>    <span style="color: #000000; font-weight: bold;">const</span> JCR_VERSION_LABELS <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;{http://www.jcp.org/jcr/1.0}versionLabels&quot;</span><span style="color: #339933;">;</span>
<a name="line73"></a>&nbsp;
<a name="line74"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line75"></a>     * A constant for the node name jcr:frozenNode declared in nt:version.
<a name="line76"></a>     * @api
<a name="line77"></a>     */</span>
<a name="line78"></a>    <span style="color: #000000; font-weight: bold;">const</span> JCR_FROZEN_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">&quot;{http://www.jcp.org/jcr/1.0}frozenNode&quot;</span><span style="color: #339933;">;</span>
<a name="line79"></a>&nbsp;
<a name="line80"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line81"></a>     * Creates a new node at a specified path.
<a name="line82"></a>     *
<a name="line83"></a>     * This is session-write method, meaning that the addition of the new node
<a name="line84"></a>     * is dispatched upon Session#save.
<a name="line85"></a>     *
<a name="line86"></a>     * The $relPath provided must not have an index on its final element,
<a name="line87"></a>     * otherwise a RepositoryException is thrown.
<a name="line88"></a>     *
<a name="line89"></a>     * If ordering is supported by the node type of the parent node of the new
<a name="line90"></a>     * node then the new node is appended to the end of the child node list.
<a name="line91"></a>     *
<a name="line92"></a>     * The new node's primary node type will be determined by the child node
<a name="line93"></a>     * definitions in the node types of its parent. This may occur either
<a name="line94"></a>     * immediately, on dispatch (save, whether within or without transactions)
<a name="line95"></a>     * or on persist (save without transactions, commit within a transaction),
<a name="line96"></a>     * depending on the implementation.
<a name="line97"></a>     *
<a name="line98"></a>     * If $primaryNodeTypeName is given:
<a name="line99"></a>     * The behavior of this method is identical to addNode($relPath) except that
<a name="line100"></a>     * the primary node type of the new node is explicitly specified.
<a name="line101"></a>     *
<a name="line102"></a>     * @param string $relPath The path of the new node to be created.
<a name="line103"></a>     * @param string $primaryNodeTypeName The name of the primary node type of the new node.
<a name="line104"></a>     * @return \PHPCR\NodeInterface The node that was added.
<a name="line105"></a>     * @throws \PHPCR\ItemExistsException if an item at the specified path already exists, same-name siblings are not allowed and this implementation performs this validation immediately.
<a name="line106"></a>     * @throws \PHPCR\PathNotFoundException if the specified path implies intermediary Nodes that do not exist or the last element of relPath has an index, and this implementation performs this validation immediately.
<a name="line107"></a>     * @throws \PHPCR\ConstraintViolationException if a node type or implementation-specific constraint is violated or if an attempt is made to add a node as the child of a property and this implementation performs this validation immediately.
<a name="line108"></a>     * @throws \PHPCR\Version\VersionException if the node to which the new child is being added is read-only due to a checked-in node and this implementation performs this validation immediately.
<a name="line109"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the addition of the node and this implementation performs this validation immediately instead of waiting until save.
<a name="line110"></a>     * @throws \PHPCR\RepositoryException If the last element of relPath has an index or if another error occurs.
<a name="line111"></a>     * @api
<a name="line112"></a>     */</span>
<a name="line113"></a>    <span style="color: #000000; font-weight: bold;">function</span> addNode<span style="color: #009900;">&#40;</span><span style="color: #000088;">$relPath</span><span style="color: #339933;">,</span> <span style="color: #000088;">$primaryNodeTypeName</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line114"></a>&nbsp;
<a name="line115"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line116"></a>     * Insert a child node before another child identified by its path.
<a name="line117"></a>     *
<a name="line118"></a>     * If this node supports child node ordering, this method inserts the child
<a name="line119"></a>     * node at srcChildRelPath into the child node list at the position
<a name="line120"></a>     * immediately before destChildRelPath.
<a name="line121"></a>     *
<a name="line122"></a>     * To place the node srcChildRelPath at the end of the list, a destChildRelPath
<a name="line123"></a>     * of null is used.
<a name="line124"></a>     *
<a name="line125"></a>     * Note that (apart from the case where destChildRelPath is null) both of
<a name="line126"></a>     * these arguments must be relative paths of depth one, in other words they
<a name="line127"></a>     * are the names of the child nodes, possibly suffixed with an index.
<a name="line128"></a>     *
<a name="line129"></a>     * If srcChildRelPath and destChildRelPath are the same, then no change is
<a name="line130"></a>     * made.
<a name="line131"></a>     *
<a name="line132"></a>     * This is session-write method, meaning that a change made by this method
<a name="line133"></a>     * is dispatched on save.
<a name="line134"></a>     *
<a name="line135"></a>     * @param string $srcChildRelPath the relative path to the child node (that is, name plus possible index) to be moved in the ordering
<a name="line136"></a>     * @param string $destChildRelPath the the relative path to the child node (that is, name plus possible index) before which the node srcChildRelPath will be placed.
<a name="line137"></a>     * @return void
<a name="line138"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException if ordering is not supported on this node.
<a name="line139"></a>     * @throws \PHPCR\ConstraintViolationException if an implementation-specific ordering restriction is violated and this implementation performs this validation immediately instead of waiting until save.
<a name="line140"></a>     * @throws \PHPCR\ItemNotFoundException if either parameter is not the relative path of a child node of this node.
<a name="line141"></a>     * @throws \PHPCR\Version\VersionException if this node is read-only due to a checked-in node and this implementation performs this validation immediately.
<a name="line142"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the re-ordering and this implementation performs this validation immediately.
<a name="line143"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line144"></a>     * @api
<a name="line145"></a>     */</span>
<a name="line146"></a>    <span style="color: #000000; font-weight: bold;">function</span> orderBefore<span style="color: #009900;">&#40;</span><span style="color: #000088;">$srcChildRelPath</span><span style="color: #339933;">,</span> <span style="color: #000088;">$destChildRelPath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line147"></a>&nbsp;
<a name="line148"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line149"></a>     * Defines a value for a property identified by its name.
<a name="line150"></a>     *
<a name="line151"></a>     * Sets the property of this node called $name to the specified value.
<a name="line152"></a>     * This method works as factory method to create new properties and as a
<a name="line153"></a>     * shortcut for PropertyInterface::setValue
<a name="line154"></a>     *
<a name="line155"></a>     * The type detection logic is exactly the same as in
<a name="line156"></a>     * PropertyInterface::setValue
<a name="line157"></a>     *
<a name="line158"></a>     * If the property does not yet exist, it is created and its property type
<a name="line159"></a>     * determined by the node type of this node. If, based on the name and value
<a name="line160"></a>     * passed, there is more than one property definition that applies, the
<a name="line161"></a>     * repository chooses one definition according to some implementation-
<a name="line162"></a>     * specific criteria. Once property with name P has been created, the
<a name="line163"></a>     * behavior of a subsequent setProperty(P,V) may differ across implementations.
<a name="line164"></a>     * Some repositories may allow P to be dynamically re-bound to a different
<a name="line165"></a>     * property definition (based for example, on the new value being of a
<a name="line166"></a>     * different type than the original value) while other repositories may not
<a name="line167"></a>     * allow such dynamic re-binding.
<a name="line168"></a>     *
<a name="line169"></a>     * If the property type is different than the type of supplied variables, a
<a name="line170"></a>     * best-effort conversion is attempted.
<a name="line171"></a>     *
<a name="line172"></a>     * Passing a null as the second parameter removes the property. It is equivalent
<a name="line173"></a>     * to calling remove on the Property object itself. For example,
<a name="line174"></a>     * N.setProperty(&quot;P&quot;, null) would remove property called &quot;P&quot; of the
<a name="line175"></a>     * node in N.
<a name="line176"></a>     *
<a name="line177"></a>     * This is a session-write method, meaning that changes made through this
<a name="line178"></a>     * method are dispatched on Session#save.
<a name="line179"></a>     *
<a name="line180"></a>     * If $type is given:
<a name="line181"></a>     * The behavior of this method is identical to that of setProperty($name,
<a name="line182"></a>     * $value) except that the intended property type is explicitly specified.
<a name="line183"></a>     *
<a name="line184"></a>     * &lt;b&gt;Note:&lt;/b&gt;
<a name="line185"></a>     * Have a look at the JSR-283 spec and/or API documentation for more details
<a name="line186"></a>     * on what is supposed to happen for different types of values being passed
<a name="line187"></a>     * to this method.
<a name="line188"></a>     *
<a name="line189"></a>     * @param string $name The name of a property of this node
<a name="line190"></a>     * @param mixed $value The value to be assigned
<a name="line191"></a>     * @param integer $type The type to set for the property, optional. Must be a constant from {@link PropertyType}
<a name="line192"></a>     *
<a name="line193"></a>     * @return \PHPCR\PropertyInterface The updated Property object
<a name="line194"></a>     *
<a name="line195"></a>     * @throws \PHPCR\ValueFormatException if the specified property is a DATE but the value cannot be expressed in the
<a name="line196"></a>     *                                     ISO 8601-based format defined in the JCR 2.0 specification and the
<a name="line197"></a>     *                                     implementation does not support dates incompatible with that format or if
<a name="line198"></a>     *                                     value cannot be converted to the type of the specified property or if the
<a name="line199"></a>     *                                     property already exists and is multi-valued.
<a name="line200"></a>     * @throws \PHPCR\Version\VersionException if this node is versionable and checked-in or is non-versionable but its
<a name="line201"></a>     *                                         nearest versionable ancestor is checked-in and this implementation
<a name="line202"></a>     *                                         performs this validation immediately instead of waiting until save.
<a name="line203"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the setting of the property and this implementation
<a name="line204"></a>     *                                   performs this validation immediately instead of waiting until save.
<a name="line205"></a>     * @throws \PHPCR\ConstraintViolationException if the change would violate a node-type or other constraint and this
<a name="line206"></a>     *                                             implementation performs this validation immediately instead of
<a name="line207"></a>     *                                             waiting until save.
<a name="line208"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line209"></a>     *
<a name="line210"></a>     * @see \PHPCR\PropertyInterface::setValue()
<a name="line211"></a>     *
<a name="line212"></a>     * @api
<a name="line213"></a>     */</span>
<a name="line214"></a>    <span style="color: #000000; font-weight: bold;">function</span> setProperty<span style="color: #009900;">&#40;</span><span style="color: #000088;">$name</span><span style="color: #339933;">,</span> <span style="color: #000088;">$value</span><span style="color: #339933;">,</span> <span style="color: #000088;">$type</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line215"></a>&nbsp;
<a name="line216"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line217"></a>     * Returns the node at relPath relative to this node.
<a name="line218"></a>     *
<a name="line219"></a>     * If relPath contains a path element that refers to a node with same-name
<a name="line220"></a>     * sibling nodes without explicitly including an index using the array-style
<a name="line221"></a>     * notation ([x]), then the index [1] is assumed (indexing of same name
<a name="line222"></a>     * siblings begins at 1, not 0, in order to preserve compatibility with XPath).
<a name="line223"></a>     *
<a name="line224"></a>     * Within the scope of a single Session object, if a Node object has been
<a name="line225"></a>     * acquired, any subsequent call of getNode reacquiring the same node must
<a name="line226"></a>     * return a Node object reflecting the same state as the earlier Node object.
<a name="line227"></a>     * Whether this object is actually the same Node instance, or simply one
<a name="line228"></a>     * wrapping the same state, is up to the implementation.
<a name="line229"></a>     *
<a name="line230"></a>     * @param string $relPath The relative path of the node to retrieve.
<a name="line231"></a>     * @return \PHPCR\NodeInterface The node at relPath.
<a name="line232"></a>     * @throws \PHPCR\PathNotFoundException If no node exists at the specified path or the current Session does not read access to the node at the specified path.
<a name="line233"></a>     * @throws \PHPCR\RepositoryException If another error occurs.
<a name="line234"></a>     * @api
<a name="line235"></a>     */</span>
<a name="line236"></a>    <span style="color: #000000; font-weight: bold;">function</span> getNode<span style="color: #009900;">&#40;</span><span style="color: #000088;">$relPath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line237"></a>&nbsp;
<a name="line238"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line239"></a>     * Get a set of nodes gathered by the definition of a filter.
<a name="line240"></a>     *
<a name="line241"></a>     * If $filter is a string:
<a name="line242"></a>     * Gets all child nodes of this node accessible through the current Session
<a name="line243"></a>     * that match namePattern (if no pattern is given, all accessible child nodes
<a name="line244"></a>     * are returned). Does not include properties of this Node. The pattern may
<a name="line245"></a>     * be a full name or a partial name with one or more wildcard characters (&quot;*&quot;),
<a name="line246"></a>     * or a disjunction (using the &quot;|&quot; character to represent logical OR) of these.
<a name="line247"></a>     * For example,
<a name="line248"></a>     *  N-&gt;getNodes(&quot;jcr:* | myapp:report | my doc&quot;)
<a name="line249"></a>     * would return an iterator holding all accessible child nodes of N that
<a name="line250"></a>     * are either called 'myapp:report', begin with the prefix 'jcr:' or are
<a name="line251"></a>     * called 'my doc'.
<a name="line252"></a>     *
<a name="line253"></a>     * The substrings within the pattern that are delimited by &quot;|&quot; characters
<a name="line254"></a>     * and which may contain wildcard characters (&quot;*&quot;) are called &quot;globs&quot;.
<a name="line255"></a>     *
<a name="line256"></a>     * Note that leading and trailing whitespace around a glob is ignored, but
<a name="line257"></a>     * whitespace within a disjunct forms part of the pattern to be matched.
<a name="line258"></a>     *
<a name="line259"></a>     *If $filter is an array:
<a name="line260"></a>     * Gets all child nodes of this node accessible through the current
<a name="line261"></a>     * Session that match one or more of the $filter strings in the passed
<a name="line262"></a>     * array.
<a name="line263"></a>     *
<a name="line264"></a>     * A glob may be a full name or a partial name with one or more wildcard
<a name="line265"></a>     * characters (&quot;*&quot;). For example,
<a name="line266"></a>     *  N-&gt;getNodes(array(&quot;jcr:*&quot;, &quot;myapp:report&quot;, &quot;my doc&quot;))
<a name="line267"></a>     * would return an iterator holding all accessible child nodes of N that
<a name="line268"></a>     * are either called 'myapp:report', begin with the prefix 'jcr:' or are
<a name="line269"></a>     * called 'my doc'.
<a name="line270"></a>     *
<a name="line271"></a>     * Note that unlike in the case of the getNodes(&lt;string&gt;) leading and
<a name="line272"></a>     * trailing whitespace around a glob is not ignored.
<a name="line273"></a>     *
<a name="line274"></a>     *
<a name="line275"></a>     * The pattern is matched against the names (not the paths) of the immediate
<a name="line276"></a>     * child nodes of this node.
<a name="line277"></a>     *
<a name="line278"></a>     * If this node has no accessible matching child nodes, then an empty
<a name="line279"></a>     * iterator is returned.
<a name="line280"></a>     *
<a name="line281"></a>     * The same reacquisition semantics apply as with getNode($relPath).
<a name="line282"></a>     *
<a name="line283"></a>     * @param string|array $filter a name pattern or an array of globbing strings.
<a name="line284"></a>     * @return Iterator over all (matching) child Nodes implementing &lt;b&gt;SeekableIterator&lt;/b&gt; and &lt;b&gt;Countable&lt;/b&gt;.
<a name="line285"></a>     *                  Keys are the Node names, values the corresponding NodeInterface instances.
<a name="line286"></a>     * @throws \PHPCR\RepositoryException If an unexpected error occurs.
<a name="line287"></a>     * @api
<a name="line288"></a>     */</span>
<a name="line289"></a>    <span style="color: #000000; font-weight: bold;">function</span> getNodes<span style="color: #009900;">&#40;</span><span style="color: #000088;">$filter</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line290"></a>&nbsp;
<a name="line291"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line292"></a>     * Returns the property at relPath relative to this node.
<a name="line293"></a>     *
<a name="line294"></a>     * The same reacquisition semantics apply as with getNode(String).
<a name="line295"></a>     *
<a name="line296"></a>     * @param string $relPath The relative path of the property to retrieve.
<a name="line297"></a>     * @return \PHPCR\PropertyInterface The property at relPath.
<a name="line298"></a>     * @throws \PHPCR\PathNotFoundException if no property exists at the specified path or if the current Session does not have read access to the specified property.
<a name="line299"></a>     * @throws \PHPCR\RepositoryException If another error occurs.
<a name="line300"></a>     * @api
<a name="line301"></a>     */</span>
<a name="line302"></a>    <span style="color: #000000; font-weight: bold;">function</span> getProperty<span style="color: #009900;">&#40;</span><span style="color: #000088;">$relPath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line303"></a>&nbsp;
<a name="line304"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line305"></a>     * Returns the property of this node with name $name.
<a name="line306"></a>     *
<a name="line307"></a>     * If $type is set, attempts to convert the value to the specified type.
<a name="line308"></a>     * This is a shortcut for getProperty().getXX()
<a name="line309"></a>     *
<a name="line310"></a>     * @param string $name Name of this property
<a name="line311"></a>     * @param integer $type Type conversion request, optional. Must be a constant from PropertyType
<a name="line312"></a>     * @return mixed The value of the property with $name.
<a name="line313"></a>     * @throws \PHPCR\PathNotFoundException if no property exists at the specified path or if the current Session does not have read access to the specified property.
<a name="line314"></a>     * @throws \PHPCR\ValueFormatException if the type or format of the property can not be converted to the specified type.
<a name="line315"></a>     * @throws \PHPCR\RepositoryException If another error occurs.
<a name="line316"></a>     * @api
<a name="line317"></a>     */</span>
<a name="line318"></a>    <span style="color: #000000; font-weight: bold;">function</span> getPropertyValue<span style="color: #009900;">&#40;</span><span style="color: #000088;">$name</span><span style="color: #339933;">,</span> <span style="color: #000088;">$type</span><span style="color: #339933;">=</span><span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line319"></a>&nbsp;
<a name="line320"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line321"></a>     * Get an iteratable set of properties gathered on behalf of a filter.
<a name="line322"></a>     *
<a name="line323"></a>     * If $filter is a string:
<a name="line324"></a>     * Gets all properties of this node accessible through the current Session
<a name="line325"></a>     * that match namePattern (if no pattern is given, all accessible properties
<a name="line326"></a>     * are returned). Does not include child nodes of this node. The pattern may
<a name="line327"></a>     * be a full name or a partial name with one or more wildcard characters (&quot;*&quot;),
<a name="line328"></a>     * or a disjunction (using the &quot;|&quot; character to represent logical OR) of
<a name="line329"></a>     * these. For example,
<a name="line330"></a>     * N.getProperties(&quot;jcr:* | myapp:name | my doc&quot;)
<a name="line331"></a>     * would return an iterator holding all accessible properties of N
<a name="line332"></a>     * that are either called 'myapp:name', begin with the prefix 'jcr:' or are
<a name="line333"></a>     * called 'my doc'.
<a name="line334"></a>     *
<a name="line335"></a>     * The substrings within the pattern that are delimited by &quot;|&quot; characters
<a name="line336"></a>     * and which may contain wildcard characters (&quot;*&quot;) are called globs.
<a name="line337"></a>     *
<a name="line338"></a>     * Note that leading and trailing whitespace around a glob is ignored, but
<a name="line339"></a>     * whitespace within a disjunct forms part of the pattern to be matched.
<a name="line340"></a>     *
<a name="line341"></a>     * If $filter is an array:
<a name="line342"></a>     * Gets all properties of this node accessible through the current
<a name="line343"></a>     * Session that match one or more of the $filter strings in the passed array.
<a name="line344"></a>     *
<a name="line345"></a>     * A glob may be a full name or a partial name with one or more wildcard
<a name="line346"></a>     * characters (&quot;*&quot;). For example,
<a name="line347"></a>     *  N-&gt;getProperties(array(&quot;jcr:*&quot;, &quot;myapp:report&quot;, &quot;my doc&quot;))
<a name="line348"></a>     * would return an iterator holding all accessible properties of N
<a name="line349"></a>     * that are either called 'myapp:report', begin with the prefix 'jcr:' or
<a name="line350"></a>     * are called 'my doc'.
<a name="line351"></a>     *
<a name="line352"></a>     * Note that unlike in the case of getProperties(&lt;string&gt;) leading and
<a name="line353"></a>     * trailing whitespace around a glob is not ignored.
<a name="line354"></a>     *
<a name="line355"></a>     *
<a name="line356"></a>     * The pattern is matched against the names (not the paths) of the immediate
<a name="line357"></a>     * child properties of this node.
<a name="line358"></a>     *
<a name="line359"></a>     * If this node has no accessible matching properties, then an empty iterator
<a name="line360"></a>     * is returned.
<a name="line361"></a>     *
<a name="line362"></a>     * The same reacquisition semantics apply as with getNode(String).
<a name="line363"></a>     *
<a name="line364"></a>     * @param string|array $filter a name pattern
<a name="line365"></a>     * @return Iterator implementing &lt;b&gt;SeekableIterator&lt;/b&gt; and &lt;b&gt;Countable&lt;/b&gt;. Keys are the property names, values the corresponding PropertyInterface instances.
<a name="line366"></a>     * @throws \PHPCR\RepositoryException If an unexpected error occurs.
<a name="line367"></a>     * @api
<a name="line368"></a>     */</span>
<a name="line369"></a>    <span style="color: #000000; font-weight: bold;">function</span> getProperties<span style="color: #009900;">&#40;</span><span style="color: #000088;">$filter</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line370"></a>&nbsp;
<a name="line371"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line372"></a>     * Shortcut for getProperties and then getting the values of the properties.
<a name="line373"></a>     *
<a name="line374"></a>     * See NodeInterface::getProperties for a full documentation
<a name="line375"></a>     *
<a name="line376"></a>     * @param string|array $filter a name pattern
<a name="line377"></a>     * @return Iterator implementing &lt;b&gt;SeekableIterator&lt;/b&gt; and &lt;b&gt;Countable&lt;/b&gt;. Keys are the property names, values the corresponding property value (or array of values in case of multi-valued properties)
<a name="line378"></a>     * @throws \PHPCR\RepositoryException If an unexpected error occurs.
<a name="line379"></a>     * @api
<a name="line380"></a>     */</span>
<a name="line381"></a>    <span style="color: #000000; font-weight: bold;">function</span> getPropertiesValues<span style="color: #009900;">&#40;</span><span style="color: #000088;">$filter</span><span style="color: #339933;">=</span><span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line382"></a>&nbsp;
<a name="line383"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line384"></a>     * Returns the primary child item of the current node.
<a name="line385"></a>     *
<a name="line386"></a>     * The primary node type of this node may specify one child item (child node or property) of this node as
<a name="line387"></a>     * the primary child item. This method returns that item.
<a name="line388"></a>     *
<a name="line389"></a>     * In cases where the primary child item specifies the name of a set same-name
<a name="line390"></a>     * sibling child nodes, the node returned will be the one among the same-name
<a name="line391"></a>     * siblings with index [1].
<a name="line392"></a>     *
<a name="line393"></a>     * The same reacquisition semantics apply as with getNode(String).
<a name="line394"></a>     *
<a name="line395"></a>     * @return \PHPCR\ItemInterface the primary child item.
<a name="line396"></a>     * @throws \PHPCR\ItemNotFoundException if this node does not have a primary child item, either because none is declared in the node type or because a declared primary item is not present on this node instance, or because none accessible through the current Session
<a name="line397"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line398"></a>     * @api
<a name="line399"></a>     */</span>
<a name="line400"></a>    <span style="color: #000000; font-weight: bold;">function</span> getPrimaryItem<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line401"></a>&nbsp;
<a name="line402"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line403"></a>     * Returns the identifier of the current node.
<a name="line404"></a>     *
<a name="line405"></a>     * Applies to both referenceable and non-referenceable nodes.
<a name="line406"></a>     *
<a name="line407"></a>     * @return string the identifier of this node
<a name="line408"></a>     * @throws \PHPCR\RepositoryException If an error occurs.
<a name="line409"></a>     * @api
<a name="line410"></a>     */</span>
<a name="line411"></a>    <span style="color: #000000; font-weight: bold;">function</span> getIdentifier<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line412"></a>&nbsp;
<a name="line413"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line414"></a>     * This method returns the index of this node within the ordered set of its same-name sibling nodes.
<a name="line415"></a>     *
<a name="line416"></a>     * This index is the one used to address same-name siblings using the square-bracket notation, e.g., /a[3]/b[4].
<a name="line417"></a>     * Note that the index always starts at 1 (not 0), for compatibility with XPath. As a result, for nodes that do
<a name="line418"></a>     * not have same-name-siblings, this method will always return 1.
<a name="line419"></a>     *
<a name="line420"></a>     * @return integer The index of this node within the ordered set of its same-name sibling nodes.
<a name="line421"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line422"></a>     * @api
<a name="line423"></a>     */</span>
<a name="line424"></a>    <span style="color: #000000; font-weight: bold;">function</span> getIndex<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line425"></a>&nbsp;
<a name="line426"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line427"></a>     * This method returns all REFERENCE properties that refer to this node, have
<a name="line428"></a>     * the specified name and that are accessible through the current Session.
<a name="line429"></a>     *
<a name="line430"></a>     * If the name parameter is null then all referring REFERENCES are returned
<a name="line431"></a>     * regardless of name.
<a name="line432"></a>     *
<a name="line433"></a>     * Some implementations may only return properties that have been persisted.
<a name="line434"></a>     * Some may return both properties that have been persisted and those that
<a name="line435"></a>     * have been dispatched but not persisted (for example, those saved within a
<a name="line436"></a>     * transaction but not yet committed) while others implementations may
<a name="line437"></a>     * return these two categories of property as well as properties that are
<a name="line438"></a>     * still pending and not yet dispatched.
<a name="line439"></a>     *
<a name="line440"></a>     * In implementations that support versioning, this method does not return
<a name="line441"></a>     * properties that are part of the frozen state of a version in version storage.
<a name="line442"></a>     *
<a name="line443"></a>     * If this node has no referring properties with the specified name, an empty
<a name="line444"></a>     * iterator is returned.
<a name="line445"></a>     *
<a name="line446"></a>     * @param string $name Name of referring REFERENCE properties to be returned; if null then all
<a name="line447"></a>     *                     referring REFERENCEs are returned.
<a name="line448"></a>     * @return Iterator implementing &lt;b&gt;SeekableIterator&lt;/b&gt; and &lt;b&gt;Countable&lt;/b&gt;. Keys are the property names, values the
<a name="line449"></a>     *                  corresponding PropertyInterface instances.
<a name="line450"></a>     * @throws \PHPCR\RepositoryException if an error occurs
<a name="line451"></a>     * @api
<a name="line452"></a>     */</span>
<a name="line453"></a>    <span style="color: #000000; font-weight: bold;">function</span> getReferences<span style="color: #009900;">&#40;</span><span style="color: #000088;">$name</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line454"></a>&nbsp;
<a name="line455"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line456"></a>     * This method returns all WEAKREFERENCE properties that refer to this node,
<a name="line457"></a>     * have the specified name and that are accessible through the current Session.
<a name="line458"></a>     *
<a name="line459"></a>     * If the name parameter is null then all referring WEAKREFERENCE are returned
<a name="line460"></a>     * regardless of name.
<a name="line461"></a>     *
<a name="line462"></a>     * Some level 2 implementations may only return properties that have been
<a name="line463"></a>     * saved (in a transactional setting this includes both those properties that
<a name="line464"></a>     * have been saved but not yet committed, as well as properties that have
<a name="line465"></a>     * been committed). Other level 2 implementations may additionally return
<a name="line466"></a>     * properties that have been added within the current Session but are not yet
<a name="line467"></a>     * saved.
<a name="line468"></a>     *
<a name="line469"></a>     * In implementations that support versioning, this method does not return
<a name="line470"></a>     * properties that are part of the frozen state of a version in version storage.
<a name="line471"></a>     *
<a name="line472"></a>     * If this node has no referring properties with the specified name, an empty
<a name="line473"></a>     * iterator is returned.
<a name="line474"></a>     *
<a name="line475"></a>     * @param string $name name of referring WEAKREFERENCE properties to be returned; if null then all referring WEAKREFERENCEs are returned
<a name="line476"></a>     * @return Iterator implementing &lt;b&gt;SeekableIterator&lt;/b&gt; and &lt;b&gt;Countable&lt;/b&gt;. Keys are the property names, values the corresponding PropertyInterface instances.
<a name="line477"></a>     * @throws \PHPCR\RepositoryException if an error occurs
<a name="line478"></a>     * @api
<a name="line479"></a>     */</span>
<a name="line480"></a>    <span style="color: #000000; font-weight: bold;">function</span> getWeakReferences<span style="color: #009900;">&#40;</span><span style="color: #000088;">$name</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line481"></a>&nbsp;
<a name="line482"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line483"></a>     * Indicates whether a node exists at relPath Returns true if a node accessible
<a name="line484"></a>     * through the current Session exists at relPath and false otherwise.
<a name="line485"></a>     *
<a name="line486"></a>     * @param string $relPath The path of a (possible) node.
<a name="line487"></a>     * @return boolean true if a node exists at relPath; false otherwise.
<a name="line488"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line489"></a>     * @api
<a name="line490"></a>     */</span>
<a name="line491"></a>    <span style="color: #000000; font-weight: bold;">function</span> hasNode<span style="color: #009900;">&#40;</span><span style="color: #000088;">$relPath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line492"></a>&nbsp;
<a name="line493"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line494"></a>     * Determine if a property exists at the specified path.
<a name="line495"></a>     *
<a name="line496"></a>     * Indicates whether a property exists at relPath. Returns true if a property
<a name="line497"></a>     * accessible through the current Session exists at relPath and false otherwise.
<a name="line498"></a>     *
<a name="line499"></a>     * @param string $relPath The path of a (possible) property.
<a name="line500"></a>     * @return boolean true if a property exists at relPath; false otherwise.
<a name="line501"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line502"></a>     * @api
<a name="line503"></a>     */</span>
<a name="line504"></a>    <span style="color: #000000; font-weight: bold;">function</span> hasProperty<span style="color: #009900;">&#40;</span><span style="color: #000088;">$relPath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line505"></a>&nbsp;
<a name="line506"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line507"></a>     * Indicates whether this node has child nodes.
<a name="line508"></a>     *
<a name="line509"></a>     * Returns true if this node has one or more child nodes accessible through the current Session; false otherwise.
<a name="line510"></a>     *
<a name="line511"></a>     * @return boolean true if this node has one or more child nodes; false otherwise.
<a name="line512"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line513"></a>     * @api
<a name="line514"></a>     */</span>
<a name="line515"></a>    <span style="color: #000000; font-weight: bold;">function</span> hasNodes<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line516"></a>&nbsp;
<a name="line517"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line518"></a>     * Indicates whether this node has properties.
<a name="line519"></a>     *
<a name="line520"></a>     * Returns true if this node has one or more properties accessible through the current Session; false otherwise.
<a name="line521"></a>     *
<a name="line522"></a>     * @return boolean true if this node has one or more properties; false otherwise.
<a name="line523"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line524"></a>     * @api
<a name="line525"></a>     */</span>
<a name="line526"></a>    <span style="color: #000000; font-weight: bold;">function</span> hasProperties<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line527"></a>&nbsp;
<a name="line528"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line529"></a>     * Returns the primary node type in effect for this node.
<a name="line530"></a>     *
<a name="line531"></a>     * Which NodeType is returned when this method is called on the root node of a workspace is up
<a name="line532"></a>     * to the implementation.
<a name="line533"></a>     *
<a name="line534"></a>     * @return \PHPCR\NodeType\NodeTypeInterface a NodeType object.
<a name="line535"></a>     * @throws \PHPCR\RepositoryException if an error occurs
<a name="line536"></a>     * @api
<a name="line537"></a>     */</span>
<a name="line538"></a>    <span style="color: #000000; font-weight: bold;">function</span> getPrimaryNodeType<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line539"></a>&nbsp;
<a name="line540"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line541"></a>     * Returns an array of NodeType objects representing the mixin node types in effect for this node.
<a name="line542"></a>     *
<a name="line543"></a>     * This includes only those mixin types explicitly assigned to this node. It does not include mixin types
<a name="line544"></a>     * inherited through the addition of supertypes to the primary type hierarchy or through the
<a name="line545"></a>     * addition of supertypes to the type hierarchy of any of the declared mixin types.
<a name="line546"></a>     *
<a name="line547"></a>     * @return array of \PHPCR\NodeType\NodeTypeInterface objects.
<a name="line548"></a>     * @throws \PHPCR\RepositoryException if an error occurs
<a name="line549"></a>     * @api
<a name="line550"></a>     */</span>
<a name="line551"></a>    <span style="color: #000000; font-weight: bold;">function</span> getMixinNodeTypes<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line552"></a>&nbsp;
<a name="line553"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line554"></a>     * Returns true if this node is of the specified primary node type or mixin type, or a subtype thereof.
<a name="line555"></a>     *
<a name="line556"></a>     * Returns false otherwise. This method respects the effective node type of the node.
<a name="line557"></a>     *
<a name="line558"></a>     * @param string $nodeTypeName the name of a node type.
<a name="line559"></a>     * @return boolean true if this node is of the specified primary node type or mixin type, or a subtype thereof.
<a name="line560"></a>     *                 Returns false otherwise.
<a name="line561"></a>     * @throws \PHPCR\RepositoryException If an error occurs.
<a name="line562"></a>     * @api
<a name="line563"></a>     */</span>
<a name="line564"></a>    <span style="color: #000000; font-weight: bold;">function</span> isNodeType<span style="color: #009900;">&#40;</span><span style="color: #000088;">$nodeTypeName</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line565"></a>&nbsp;
<a name="line566"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line567"></a>     * Changes the primary node type of this node to nodeTypeName.
<a name="line568"></a>     *
<a name="line569"></a>     * Also immediately changes this node's jcr:primaryType property appropriately. Semantically,
<a name="line570"></a>     * the new node type may take effect immediately or on dispatch but must take effect on persist.
<a name="line571"></a>     * Whichever behavior is adopted it must be the same as the behavior adopted
<a name="line572"></a>     * for addMixin() (see below) and the behavior that occurs when a node is
<a name="line573"></a>     * first created.
<a name="line574"></a>     *
<a name="line575"></a>     * @param string $nodeTypeName the name of the new node type.
<a name="line576"></a>     * @return void
<a name="line577"></a>     * @throws \PHPCR\ConstraintViolationException If the specified primary node type creates a type conflict and this
<a name="line578"></a>     *                                             implementation performs this validation immediately.
<a name="line579"></a>     * @throws \PHPCR\NodeType\NoSuchNodeTypeException If the specified nodeTypeName is not recognized and this
<a name="line580"></a>     *                                                 implementation performs this validation immediately.
<a name="line581"></a>     * @throws \PHPCR\Version\VersionException if this node is read-only due to a checked-in node and this
<a name="line582"></a>     *                                         implementation performs this validation immediately.
<a name="line583"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the change of the primary node type and this implementation
<a name="line584"></a>     *                                   performs this validation immediately.
<a name="line585"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line586"></a>     * @api
<a name="line587"></a>     */</span>
<a name="line588"></a>    <span style="color: #000000; font-weight: bold;">function</span> setPrimaryType<span style="color: #009900;">&#40;</span><span style="color: #000088;">$nodeTypeName</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line589"></a>&nbsp;
<a name="line590"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line591"></a>     * Adds the mixin node type named $mixinName to this node.
<a name="line592"></a>     *
<a name="line593"></a>     * If this node is already of type $mixinName (either due to a previously added mixin or due to its
<a name="line594"></a>     * primary type, through inheritance) then this method has no effect.
<a name="line595"></a>     * Otherwise $mixinName is added to this node's jcr:mixinTypes property.
<a name="line596"></a>     *
<a name="line597"></a>     * Semantically, the new node type may take effect immediately, on disptahc
<a name="line598"></a>     * or on persist. The behavior is adopted must be the same as the behavior
<a name="line599"></a>     * adopted for setPrimaryType(java.lang.String) and the behavior that occurs
<a name="line600"></a>     * when a node is first created.
<a name="line601"></a>     *
<a name="line602"></a>     * A ConstraintViolationException is thrown either immediately or on save if
<a name="line603"></a>     * a conflict with another assigned mixin or the primary node type or for an
<a name="line604"></a>     * implementation-specific reason. Implementations may differ on when this
<a name="line605"></a>     * validation is done.
<a name="line606"></a>     *
<a name="line607"></a>     * In some implementations it may only be possible to add mixin types before
<a name="line608"></a>     * a a node is persisted for the first time. In such cases any later calls to
<a name="line609"></a>     * $addMixin will throw a ConstraintViolationException either immediately,
<a name="line610"></a>     * on dispatch or on persist.
<a name="line611"></a>     *
<a name="line612"></a>     * @param string $mixinName the name of the mixin node type to be added
<a name="line613"></a>     * @return void
<a name="line614"></a>     * @throws \PHPCR\NodeType\NoSuchNodeTypeException If the specified mixinName is not recognized and this
<a name="line615"></a>     *                                                 implementation performs this validation immediately instead of
<a name="line616"></a>     *                                                 waiting until save.
<a name="line617"></a>     * @throws \PHPCR\ConstraintViolationException If the specified mixin node type is prevented from being assigned.
<a name="line618"></a>     * @throws \PHPCR\Version\VersionException If this node is versionable and checked-in or is non-versionable but its
<a name="line619"></a>     *                                         nearest versionable ancestor is checked-in and this implementation
<a name="line620"></a>     *                                         performs this validation immediately instead of waiting until save.
<a name="line621"></a>     * @throws \PHPCR\Lock\LockException If a lock prevents the addition of the mixin and this implementation performs
<a name="line622"></a>     *                                   this validation immediately instead of waiting until save.
<a name="line623"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line624"></a>     * @api
<a name="line625"></a>     */</span>
<a name="line626"></a>    <span style="color: #000000; font-weight: bold;">function</span> addMixin<span style="color: #009900;">&#40;</span><span style="color: #000088;">$mixinName</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line627"></a>&nbsp;
<a name="line628"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line629"></a>     * Removes the specified mixin node type from this node and removes mixinName from this node's jcr:mixinTypes property.
<a name="line630"></a>     *
<a name="line631"></a>     * Both the semantic change in effective node type and the persistence of the change to the jcr:mixinTypes
<a name="line632"></a>     * property occur on persist.
<a name="line633"></a>     *
<a name="line634"></a>     * @param string $mixinName the name of the mixin node type to be removed.
<a name="line635"></a>     * @return void
<a name="line636"></a>     * @throws \PHPCR\NodeType\NoSuchNodeTypeException If the specified mixinName is not currently assigned to this
<a name="line637"></a>     *                                                 node and this implementation performs this validation immediately.
<a name="line638"></a>     * @throws \PHPCR\ConstraintViolationException if the specified mixin node type is prevented from being removed and
<a name="line639"></a>     *                                             this implementation performs this validation immediately.
<a name="line640"></a>     * @throws \PHPCR\Version\VersionException If this node is read-only due to a checked-in node and this
<a name="line641"></a>     *                                         implementation performs this validation immediately.
<a name="line642"></a>     * @throws \PHPCR\Lock\LockException If a lock prevents the removal of the mixin and this implementation performs
<a name="line643"></a>     *                                   this validation immediately.
<a name="line644"></a>     * @throws \PHPCR\RepositoryException If another error occurs.
<a name="line645"></a>     * @api
<a name="line646"></a>     */</span>
<a name="line647"></a>    <span style="color: #000000; font-weight: bold;">function</span> removeMixin<span style="color: #009900;">&#40;</span><span style="color: #000088;">$mixinName</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line648"></a>&nbsp;
<a name="line649"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line650"></a>     * Determine if a mixin node type may be added to the current node.
<a name="line651"></a>     *
<a name="line652"></a>     * Returns true if the specified mixin node type called $mixinName can be
<a name="line653"></a>     * added to this node. Returns false otherwise. A result of false must be
<a name="line654"></a>     * returned in each of the following cases:
<a name="line655"></a>     * * The mixin's definition conflicts with an existing primary or mixin node
<a name="line656"></a>     *   type of this node.
<a name="line657"></a>     * * This node is versionable and checked-in or is non-versionable and its
<a name="line658"></a>     *   nearest versionable ancestor is checked-in.
<a name="line659"></a>     * * This node is protected (as defined in this node's NodeDefinition, found
<a name="line660"></a>     *   in the node type of this node's parent).
<a name="line661"></a>     * * An access control restriction would prevent the addition of the mixin.
<a name="line662"></a>     * * A lock would prevent the addition of the mixin.
<a name="line663"></a>     * * An implementation-specific restriction would prevent the addition of the mixin.
<a name="line664"></a>     *
<a name="line665"></a>     * @param string $mixinName The name of the mixin to be tested.
<a name="line666"></a>     * @return boolean true if the specified mixin node type, mixinName, can be added to this node; false otherwise.
<a name="line667"></a>     * @throws \PHPCR\NodeType\NoSuchNodeTypeException if the specified mixin node type name is not recognized.
<a name="line668"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line669"></a>     * @api
<a name="line670"></a>     */</span>
<a name="line671"></a>    <span style="color: #000000; font-weight: bold;">function</span> canAddMixin<span style="color: #009900;">&#40;</span><span style="color: #000088;">$mixinName</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line672"></a>&nbsp;
<a name="line673"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line674"></a>     * Returns the node definition that applies to this node.
<a name="line675"></a>     *
<a name="line676"></a>     * In some cases there may appear to be more than one definition that could apply to this node.
<a name="line677"></a>     * However, it is assumed that upon creation of this node, a single particular
<a name="line678"></a>     * definition was used and it is that definition that this method returns.
<a name="line679"></a>     * How this governing definition is selected upon node creation from among
<a name="line680"></a>     * others which may have been applicable is an implementation issue and is
<a name="line681"></a>     * not covered by this specification. The NodeDefinition returned when this
<a name="line682"></a>     * method is called on the root node of a workspace is also up to the
<a name="line683"></a>     * implementation.
<a name="line684"></a>     *
<a name="line685"></a>     * @return \PHPCR\NodeType\NodeDefinitionInterface a NodeDefinition object.
<a name="line686"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line687"></a>     * @api
<a name="line688"></a>     */</span>
<a name="line689"></a>    <span style="color: #000000; font-weight: bold;">function</span> getDefinition<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line690"></a>&nbsp;
<a name="line691"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line692"></a>     * Updates a node corresponding to the current one in the given workspace.
<a name="line693"></a>     *
<a name="line694"></a>     * If this node does have a corresponding node in the workspace srcWorkspace,
<a name="line695"></a>     * then this replaces this node and its subgraph with a clone of the
<a name="line696"></a>     * corresponding node and its subgraph.
<a name="line697"></a>     * If this node does not have a corresponding node in the workspace srcWorkspace,
<a name="line698"></a>     * then the update method has no effect.
<a name="line699"></a>     *
<a name="line700"></a>     * If the update succeeds the changes made are persisted immediately, there
<a name="line701"></a>     * is no need to call save.
<a name="line702"></a>     *
<a name="line703"></a>     * Note that update does not respect the checked-in status of nodes. An update
<a name="line704"></a>     * may change a node even if it is currently checked-in (This fact is only
<a name="line705"></a>     * relevant in an implementation that supports versioning).
<a name="line706"></a>     *
<a name="line707"></a>     * @param string $srcWorkspace the name of the source workspace.
<a name="line708"></a>     * @return void
<a name="line709"></a>     * @throws \PHPCR\NoSuchWorkspaceException if srcWorkspace does not exist.
<a name="line710"></a>     * @throws \PHPCR\InvalidItemStateException if this Session (not necessarily this Node) has pending unsaved changes.
<a name="line711"></a>     * @throws \PHPCR\AccessDeniedException if the current session does not have sufficient access to perform the operation.
<a name="line712"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the update.
<a name="line713"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line714"></a>     * @api
<a name="line715"></a>     */</span>
<a name="line716"></a>    <span style="color: #000000; font-weight: bold;">function</span> update<span style="color: #009900;">&#40;</span><span style="color: #000088;">$srcWorkspace</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line717"></a>&nbsp;
<a name="line718"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line719"></a>     * Returns the absolute path of the node in the specified workspace that
<a name="line720"></a>     * corresponds to this node.
<a name="line721"></a>     *
<a name="line722"></a>     * @param string $workspaceName the name of the workspace.
<a name="line723"></a>     * @return string the absolute path to the corresponding node.
<a name="line724"></a>     * @throws \PHPCR\ItemNotFoundException if no corresponding node is found.
<a name="line725"></a>     * @throws \PHPCR\NoSuchWorkspaceException if the workspace is unknown.
<a name="line726"></a>     * @throws \PHPCR\AccessDeniedException if the current session has insufficient access capabilities to perform this operation.
<a name="line727"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line728"></a>     * @api
<a name="line729"></a>     */</span>
<a name="line730"></a>    <span style="color: #000000; font-weight: bold;">function</span> getCorrespondingNodePath<span style="color: #009900;">&#40;</span><span style="color: #000088;">$workspaceName</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line731"></a>&nbsp;
<a name="line732"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line733"></a>     * Returns an iterator over all nodes that are in the shared set of this node.
<a name="line734"></a>     *
<a name="line735"></a>     * If this node is not shared then the returned iterator contains only this node.
<a name="line736"></a>     *
<a name="line737"></a>     * @return Iterator implementing &lt;b&gt;SeekableIterator&lt;/b&gt; and &lt;b&gt;Countable&lt;/b&gt;. Keys are the Node names, values the corresponding
<a name="line738"></a>     *                  NodeInterface instances.
<a name="line739"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line740"></a>     * @api
<a name="line741"></a>     */</span>
<a name="line742"></a>    <span style="color: #000000; font-weight: bold;">function</span> getSharedSet<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line743"></a>&nbsp;
<a name="line744"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line745"></a>     * Removes this node and every other node in the shared set of this node.
<a name="line746"></a>     *
<a name="line747"></a>     * This removal must be done atomically, i.e., if one of the nodes cannot be
<a name="line748"></a>     * removed, the method throws the exception Node.remove() would have thrown
<a name="line749"></a>     * in that case, and none of the nodes are removed.
<a name="line750"></a>     *
<a name="line751"></a>     * If this node is not shared this method removes only this node.
<a name="line752"></a>     *
<a name="line753"></a>     * @return void
<a name="line754"></a>     * @throws \PHPCR\Version\VersionException If the parent node of this item is versionable and checked-in or is
<a name="line755"></a>     *                                         non-versionable but its nearest versionable ancestor is checked-in and
<a name="line756"></a>     *                                         this implementation performs this validation immediately.
<a name="line757"></a>     * @throws \PHPCR\Lock\LockException If a lock prevents the removal of this item and this implementation performs
<a name="line758"></a>     *                                   this validation immediately.
<a name="line759"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException If removing the specified item would violate a node type or
<a name="line760"></a>     *                                                      implementation-specific constraint and this implementation
<a name="line761"></a>     *                                                      performs this validation immediately.
<a name="line762"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line763"></a>     *
<a name="line764"></a>     * @see removeShare()
<a name="line765"></a>     * @see Item::remove()
<a name="line766"></a>     * @see SessionInterface::removeItem()
<a name="line767"></a>     *
<a name="line768"></a>     * @api
<a name="line769"></a>     */</span>
<a name="line770"></a>    <span style="color: #000000; font-weight: bold;">function</span> removeSharedSet<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line771"></a>&nbsp;
<a name="line772"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line773"></a>     * Removes this node, but does not remove any other node in the shared set of this node.
<a name="line774"></a>     *
<a name="line775"></a>     * @return void
<a name="line776"></a>     * @throws \PHPCR\Version\VersionException if the parent node of this item is versionable and checked-in or is
<a name="line777"></a>     *                                         non-versionable but its nearest versionable ancestor is checked-in and
<a name="line778"></a>     *                                         this implementation performs this validation immediately instead of
<a name="line779"></a>     *                                         waiting until save.
<a name="line780"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the removal of this item and this implementation performs
<a name="line781"></a>     *                                   this validation immediately instead of waiting until save.
<a name="line782"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException if removing the specified item would violate a node type or
<a name="line783"></a>     *                                                      implementation-specific constraint and this implementation
<a name="line784"></a>     *                                                      performs this validation immediately instead of waiting
<a name="line785"></a>     *                                                      until save.
<a name="line786"></a>     * @throws \PHPCR\RepositoryException if this node cannot be removed without removing another node in the shared
<a name="line787"></a>     *                                    set of this node or another error occurs.
<a name="line788"></a>     * @see removeSharedSet()
<a name="line789"></a>     * @see Item::remove()
<a name="line790"></a>     * @see SessionInterface::removeItem
<a name="line791"></a>     * @api
<a name="line792"></a>     */</span>
<a name="line793"></a>    <span style="color: #000000; font-weight: bold;">function</span> removeShare<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line794"></a>&nbsp;
<a name="line795"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line796"></a>     * Determine if the current node is currently checked out.
<a name="line797"></a>     *
<a name="line798"></a>     * Returns false if this node is currently in the checked-in state (either
<a name="line799"></a>     * due to its own status as a versionable node or due to the effect of
<a name="line800"></a>     * a versionable node being checked in above it). Otherwise this method
<a name="line801"></a>     * returns true. This includes the case where the repository does not
<a name="line802"></a>     * support versioning (and therefore all nodes are always &quot;checked-out&quot;,
<a name="line803"></a>     * by default).
<a name="line804"></a>     *
<a name="line805"></a>     * @return boolean
<a name="line806"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line807"></a>     * @api
<a name="line808"></a>     */</span>
<a name="line809"></a>    <span style="color: #000000; font-weight: bold;">function</span> isCheckedOut<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line810"></a>&nbsp;
<a name="line811"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line812"></a>     * Determine if the current node has been locked.
<a name="line813"></a>     *
<a name="line814"></a>     * Returns true if this node is locked either as a result of a lock held
<a name="line815"></a>     * by this node or by a deep lock on a node above this node;
<a name="line816"></a>     * otherwise returns false. This includes the case where a repository does
<a name="line817"></a>     * not support locking (in which case all nodes are &quot;unlocked&quot; by default).
<a name="line818"></a>     *
<a name="line819"></a>     * @return boolean.
<a name="line820"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line821"></a>     * @api
<a name="line822"></a>     */</span>
<a name="line823"></a>    <span style="color: #000000; font-weight: bold;">function</span> isLocked<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line824"></a>&nbsp;
<a name="line825"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line826"></a>     * Causes the lifecycle state of this node to undergo the specified transition.
<a name="line827"></a>     *
<a name="line828"></a>     * This method may change the value of the jcr:currentLifecycleState property,
<a name="line829"></a>     * in most cases it is expected that the implementation will change the value
<a name="line830"></a>     * to that of the passed transition parameter, though this is an
<a name="line831"></a>     * implementation-specific issue. If the jcr:currentLifecycleState property
<a name="line832"></a>     * is changed the change is persisted immediately, there is no need to call
<a name="line833"></a>     * save.
<a name="line834"></a>     *
<a name="line835"></a>     * @param string $transition a state transition
<a name="line836"></a>     * @return void
<a name="line837"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException  if this implementation does not support lifecycle actions or if this node does not have the mix:lifecycle mixin.
<a name="line838"></a>     * @throws \PHPCR\InvalidLifecycleTransitionException if the lifecycle transition is not successful.
<a name="line839"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line840"></a>     * @api
<a name="line841"></a>     */</span>
<a name="line842"></a>    <span style="color: #000000; font-weight: bold;">function</span> followLifecycleTransition<span style="color: #009900;">&#40;</span><span style="color: #000088;">$transition</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line843"></a>&nbsp;
<a name="line844"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line845"></a>     * Returns the list of valid state transitions for this node.
<a name="line846"></a>     *
<a name="line847"></a>     * @return array a string array.
<a name="line848"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException  if this implementation does not support lifecycle actions or if this node does not have the mix:lifecycle mixin.
<a name="line849"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line850"></a>     * @api
<a name="line851"></a>     */</span>
<a name="line852"></a>    <span style="color: #000000; font-weight: bold;">function</span> getAllowedLifecycleTransitions<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line853"></a><span style="color: #009900;">&#125;</span>
<a name="line854"></a>&nbsp;</pre>
<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/phpcr/nodeinterface.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>