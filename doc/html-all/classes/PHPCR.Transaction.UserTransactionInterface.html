<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>PHPCR API and PHPCR-Utils » \PHPCR\Transaction\UserTransactionInterface</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">PHPCR API and PHPCR-Utils</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Namespaces</a></li>
<li><a href="../namespaces/PHPCR.html"><i class="icon-th"></i> PHPCR</a></li>
<li><a>Packages</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
<li><a href="../packages/phpcr.html"><i class="icon-folder-open"></i> phpcr</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">123</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul><li>todo 
                <span class="label label-info">12</span>
</li></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list"><li class="nav-header">
<i class="icon-custom icon-method"></i> Methods
                    <ul>
<li class="method public "><a href="#method_begin" title="begin :: Begin new transaction associated with current session."><span class="description">Begin new transaction associated with current session.</span><pre>begin()</pre></a></li>
<li class="method public "><a href="#method_commit" title="commit :: Commit the transaction associated with the current session to store it
persistently."><span class="description">Commit the transaction associated with the current session to store it
persistently.</span><pre>commit()</pre></a></li>
<li class="method public "><a href="#method_inTransaction" title="inTransaction :: Obtain the status if the current session is inside of a transaction or
not."><span class="description">Obtain the status if the current session is inside of a transaction or
not.</span><pre>inTransaction()</pre></a></li>
<li class="method public "><a href="#method_rollback" title="rollback :: Rollback the transaction associated with the current session."><span class="description">Rollback the transaction associated with the current session.</span><pre>rollback()</pre></a></li>
<li class="method public "><a href="#method_setTransactionTimeout" title="setTransactionTimeout :: Set a timeout for the transaction."><span class="description">Set a timeout for the transaction.</span><pre>setTransactionTimeout()</pre></a></li>
</ul>
</li></ul>
</div>
<div class="span8">
<a id="\PHPCR\Transaction\UserTransactionInterface"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/PHPCR.html">PHPCR</a></li>
<li>
<span class="divider">\</span><a href="../namespaces/PHPCR.Transaction.html">Transaction</a>
</li>
<li class="active">
<span class="divider">\</span><a href="../classes/PHPCR.Transaction.UserTransactionInterface.html">UserTransactionInterface</a>
</li>
</ul>
<div class="element interface">
<p class="short_description">As there is no transaction standard in PHP this interface provides a
transaction interface similar to the
<a href="http://en.wikipedia.org/wiki/Java_Transaction_API">Java Transaction
API (JTA)</a></p>
<div class="details">
<div class="long_description"><p>You can acquire the transaction manager from a session supporting
transactions with \PHPCR\SessionInterface::getTransactionManager()</p>

<p>A transaction is started with begin() and only permanently persisted if
commit() is called. If commit() is not called until timeout, the lifetime
of your php script or if rollback() is called explicitly, no changes are
persisted.</p>

<p>Remember that session changes are never persisted before you call
$session->save(). Transactions are only necessary if you want to be able
to rollback over more than one save operation.</p>

<p>The usage looks like</p>

<pre>

   $tm = $session->getTransactionManager();
   $tm->begin();
   //do stuff with the session
   $session->save();
   //do more stuff
   if (problem) {
       $tm->rollback();
   } else {
       $session->save();
       $tm->commit();
   }
</pre>

<p>A transaction manager might support nested transactions, meaning you can
call begin() repeatedly without commit() in between (but have to commit
every transaction you started).</p>

<p>Remember that in the context of phpcr, the rollback operation will only
reset the transaction but keep the current session changes. If you want to
get rid of them too, use \PHPCR\SessionInterface::refresh()</p></div>
<table class="table table-bordered">
<tr>
<th>see</th>
<td><a href="phpcr.src.PHPCR.SessionInterface.html#%5CPHPCR%5CSessionInterface::getTransactionManager()">\PHPCR\SessionInterface::getTransactionManager()</a></td>
</tr>
<tr>
<th>author</th>
<td><a href="mailto:starkj@gmx.de">Johannes Stark</a></td>
</tr>
<tr>
<th>license</th>
<td><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache Software License 2.0</a></td>
</tr>
<tr>
<th>api</th>
<td></td>
</tr>
</table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a id="method_begin"></a><div class="element clickable method public method_begin" data-toggle="collapse" data-target=".method_begin .collapse">
<h2>Begin new transaction associated with current session.</h2>
<pre>begin() : void</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Exceptions</h3>
<table class="table table-bordered">
<tr>
<th><code><a href="../classes/PHPCR.UnsupportedRepositoryOperationException.html">\PHPCR\UnsupportedRepositoryOperationException</a></code></th>
<td>Thrown if a
     transaction is already started and the transaction implementation
     or backend does not support nested transactions.</td>
</tr>
<tr>
<th><code><a href="../classes/PHPCR.RepositoryException.html">\PHPCR\RepositoryException</a></code></th>
<td>Thrown if the transaction
     implementation encounters an unexpected error condition.</td>
</tr>
</table>
</div></div>
</div>
<a id="method_commit"></a><div class="element clickable method public method_commit" data-toggle="collapse" data-target=".method_commit .collapse">
<h2>Commit the transaction associated with the current session to store it
persistently.</h2>
<pre>commit() : void</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Exceptions</h3>
<table class="table table-bordered">
<tr>
<th><code><a href="../classes/PHPCR.Transaction.RollbackException.html">\PHPCR\Transaction\RollbackException</a></code></th>
<td>Thrown to indicate that the
     transaction has been rolled back rather than committed.</td>
</tr>
<tr>
<th><code><a href="../classes/PHPCR.AccessDeniedException.html">\PHPCR\AccessDeniedException</a></code></th>
<td>Thrown to indicate that the
     session is not allowed to commit the transaction.</td>
</tr>
<tr>
<th><code><a href="http://php.net/manual/en/class.logicexception.php">\LogicException</a></code></th>
<td>Thrown if the current
     session is not associated with a transaction.</td>
</tr>
<tr>
<th><code><a href="../classes/PHPCR.RepositoryException.html">\PHPCR\RepositoryException</a></code></th>
<td>Thrown if the transaction
     implementation encounters an unexpected error condition.</td>
</tr>
</table>
</div></div>
</div>
<a id="method_inTransaction"></a><div class="element clickable method public method_inTransaction" data-toggle="collapse" data-target=".method_inTransaction .collapse">
<h2>Obtain the status if the current session is inside of a transaction or
not.</h2>
<pre>inTransaction() : boolean</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/PHPCR.RepositoryException.html">\PHPCR\RepositoryException</a></code></th>
<td>Thrown if the transaction
     implementation encounters an unexpected error condition.</td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response"><code>boolean</code></div>
</div></div>
</div>
<a id="method_rollback"></a><div class="element clickable method public method_rollback" data-toggle="collapse" data-target=".method_rollback .collapse">
<h2>Rollback the transaction associated with the current session.</h2>
<pre>rollback() : void</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Exceptions</h3>
<table class="table table-bordered">
<tr>
<th><code><a href="../classes/PHPCR.AccessDeniedException.html">\PHPCR\AccessDeniedException</a></code></th>
<td>Thrown to indicate that the
     application is not allowed to roll back the transaction.</td>
</tr>
<tr>
<th><code><a href="http://php.net/manual/en/class.logicexception.php">\LogicException</a></code></th>
<td>Thrown if the current session is not associated
     with a transaction.</td>
</tr>
<tr>
<th><code><a href="../classes/PHPCR.RepositoryException.html">\PHPCR\RepositoryException</a></code></th>
<td>Thrown if the transaction
     implementation encounters an unexpected error condition.</td>
</tr>
</table>
</div></div>
</div>
<a id="method_setTransactionTimeout"></a><div class="element clickable method public method_setTransactionTimeout" data-toggle="collapse" data-target=".method_setTransactionTimeout .collapse">
<h2>Set a timeout for the transaction.</h2>
<pre>setTransactionTimeout(int $seconds) : void</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Modify the timeout value that is associated with transactions started by
the current application with the begin() method. If not explicitly set,
the transaction service uses some default value for the transaction
timeout.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$seconds</h4>
<code>int</code><p>The value of the timeout in seconds. If the value is zero, the transaction service restores the default value. If the value is negative a RepositoryException is thrown.</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/PHPCR.RepositoryException.html">\PHPCR\RepositoryException</a></code></th>
<td>Thrown if the transaction
     implementation encounters an unexpected error condition.</td>
</tr></table>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a10</a> and<br>
            generated on 2012-10-02T11:24:44+02:00.<br></footer></div>
</div>
</body>
</html>
