<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>PHPCR API and PHPCR-Utils</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../css/template.css" type="text/css"></link><script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="../js/jquery.tools.min.js"></script><script type="text/javascript" src="../js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="../js/template.js"></script></head><body><div id="content"><h1 class="file">phpcr-utils/src/PHPCR/Util/NodeHelper.php</h1><div id="file-nav-box"><div id="file-nav-options">
              Show:
              <img src="../images/icons/visibility_public.png" alt="Public" id="show-public"></img><img src="../images/icons/visibility_protected.png" alt="Protected" id="show-protected"></img><img src="../images/icons/visibility_private.png" alt="Private" id="show-private"></img><span class="attribute" id="show-inherited">inherited</span></div><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\PHPCR\Util\NodeHelper">\PHPCR\Util\NodeHelper</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div class="short-description">This file is part of the PHPCR Utils</div><div class="long-description"><p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div></div><dl class="file-info"><dt>License</dt><dd><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache Software License 2.0</a>
         
    </dd><dt>Link</dt><dd><a href="http://phpcr.github.com/">http://phpcr.github.com/</a>
         
    </dd></dl><a name="classes" class="anchor"></a><a id="\PHPCR\Util\NodeHelper" class="anchor"></a><h2 class="class">\PHPCR\Util\NodeHelper<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><small class="package"><b>Package: </b>Default</small><div class="short-description">Helper with only static methods to work with PHPCR nodes</div><div class="long-description"></div><dl class="class-info"><dt>Author</dt><dd><a href="mailto:daniel.barsotti@liip.ch">Daniel Barsotti</a>
         
    </dd><dt>Author</dt><dd><a href="mailto:david@liip.ch">David Buchmann</a>
         
    </dd></dl><h3>Methods</h3><div><a id="\PHPCR\Util\NodeHelper::__construct()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">__construct</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Do not create an instance of this class</p></div><div class="code-tabs"><div class="long-description"></div></div><div class="clear"></div></div><a id="\PHPCR\Util\NodeHelper::calculateOrderBefore()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">calculateOrderBefore</span><span class="nb-faded-text">(array $old, array $new)</span> : array</code><div class="description"><span class="attribute">static</span><p class="short_description">Compare two arrays and generate a list of move operations that executed
in order will transform $old into $new.</p></div><div class="code-tabs"><div class="long-description"><p>The result is an array with the keys being elements of the array to move
right before the element in the value. A value of null means move to the
end.</p>

<p>If $old contains elements not present in $new, those elements are
ignored and do not show up.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$old</th><td>array</td><td><em><p>old order</p></em></td></tr><tr><th>$new</th><td>array</td><td><em><p>new order</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>the keys are elements to move, values the destination to
     move before or null to move to the end.</td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\NodeHelper::createPath()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">createPath</span><span class="nb-faded-text">(<a href="../files/phpcr.src.PHPCR.SessionInterface.html#\PHPCR\SessionInterface">\PHPCR\SessionInterface</a> $session, string $path)</span> : <a href="../files/phpcr.src.PHPCR.NodeInterface.html#\PHPCR\NodeInterface">\PHPCR\NodeInterface</a></code><div class="description"><span class="attribute">static</span><p class="short_description">Create a node and it's parents, if necessary.</p></div><div class="code-tabs"><div class="long-description"><p>Like mkdir -p.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$session</th><td><a href="../files/phpcr.src.PHPCR.SessionInterface.html#\PHPCR\SessionInterface">\PHPCR\SessionInterface</a></td><td><em><p>the PHPCR session to create the path</p></em></td></tr><tr><th>$path</th><td>string</td><td><em><p>full path, like /content/jobs/data</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td><a href="../files/phpcr.src.PHPCR.NodeInterface.html#\PHPCR\NodeInterface">\PHPCR\NodeInterface</a></td><td>the last node of the path, i.e. data</td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\NodeHelper::deleteAllNodes()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">deleteAllNodes</span><span class="nb-faded-text">( $session)</span> : void</code><div class="description"><span class="attribute">static</span><p class="short_description">Kept as alias of purgeWorkspace for BC compatibility</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$session</th><td></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Deprecated</dt><dd>
         
    </dd></dl></div><div class="clear"></div></div><a id="\PHPCR\Util\NodeHelper::generateAutoNodeName()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">generateAutoNodeName</span><span class="nb-faded-text">(string[] $usedNames, string[] $namespaces, string $defaultNamespace, string $nameHint = null)</span> : string</code><div class="description"><span class="attribute">static</span><p class="short_description">Helper method to implement NodeInterface::addNodeAutoNamed</p></div><div class="code-tabs"><div class="long-description"><p>This method only checks for valid namespaces. All other exceptions must
be thrown by the addNodeAutoNamed implementation.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$usedNames</th><td>string[]</td><td><em><p>list of child names that is currently used and may not be chosen.</p></em></td></tr><tr><th>$namespaces</th><td>string[]</td><td><em><p>namespace prefix to uri map of all currently known namespaces.</p></em></td></tr><tr><th>$defaultNamespace</th><td>string</td><td><em><p>namespace prefix to use if the hint does not specify.</p></em></td></tr><tr><th>$nameHint</th><td>string</td><td><em><p>the name hint according to the API definition</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>A valid node name for this node</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/phpcr.src.PHPCR.NamespaceException.html#\PHPCR\NamespaceException">\PHPCR\NamespaceException</a></td><td><em>if a namespace prefix is provided in the
     $nameHint which does not exist and this implementation performs
     this validation immediately.</em></td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\NodeHelper::generateWithPrefix()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">generateWithPrefix</span><span class="nb-faded-text">(string[] $usedNames, string $prefix, string $namepart = '')</span> : string</code><div class="description"><span class="attribute">static</span><p class="short_description">Repeatedly generate a name with a random part until we hit one that is
not yet used.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$usedNames</th><td>string[]</td><td><em><p>names that are forbidden</p></em></td></tr><tr><th>$prefix</th><td>string</td><td><em><p>the prefix including the colon at the end</p></em></td></tr><tr><th>$namepart</th><td>string</td><td><em><p>start for the localname</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td></td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\NodeHelper::isSystemItem()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">isSystemItem</span><span class="nb-faded-text">(<a href="../files/phpcr.src.PHPCR.ItemInterface.html#\PHPCR\ItemInterface">\PHPCR\ItemInterface</a> $item)</span> : void</code><div class="description"><span class="attribute">static</span><p class="short_description">Determine whether this item has a namespace that is to be considered
a system namespace</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$item</th><td><a href="../files/phpcr.src.PHPCR.ItemInterface.html#\PHPCR\ItemInterface">\PHPCR\ItemInterface</a></td><td><em></em></td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\NodeHelper::orderBeforeArray()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">orderBeforeArray</span><span class="nb-faded-text">(string $name, string $destination, array $list)</span> : array</code><div class="description"><span class="attribute">static</span><p class="short_description">Move the element $name of $list to right before $destination,
validating existence of all elements.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>name of the element to move</p></em></td></tr><tr><th>$destination</th><td>string</td><td><em><p>name of the element $srcChildRelPath has
     to be ordered before, null to move to the end</p>
</em></td></tr><tr><th>$list</th><td>array</td><td><em><p>the array of names</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>The updated $nodes array with new order</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/phpcr.src.PHPCR.ItemNotFoundException.html#\PHPCR\ItemNotFoundException">\PHPCR\ItemNotFoundException</a></td><td><em>if $srcChildRelPath or $destChildRelPath are not found in $nodes</em></td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\NodeHelper::purgeWorkspace()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">purgeWorkspace</span><span class="nb-faded-text">(<a href="../files/phpcr.src.PHPCR.SessionInterface.html#\PHPCR\SessionInterface">\PHPCR\SessionInterface</a> $session)</span> : void</code><div class="description"><span class="attribute">static</span><p class="short_description">Delete all content in the workspace this session is bound to.</p></div><div class="code-tabs"><div class="long-description"><p>Remember to save the session after calling the purge method.</p>

<p>Note that if you want to delete a node under your root node, you can just
use the remove method on that node. This method is just here to help you
because the implementation might add nodes like jcr:system to the root
node which you are not allowed to remove.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$session</th><td><a href="../files/phpcr.src.PHPCR.SessionInterface.html#\PHPCR\SessionInterface">\PHPCR\SessionInterface</a></td><td><em><p>the session to remove all children of
     the root node</p></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>See</dt><dd>\PHPCR\Util\isSystemItem
         
    </dd></dl></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.0.0a12</a>.
        </small></body></html>
