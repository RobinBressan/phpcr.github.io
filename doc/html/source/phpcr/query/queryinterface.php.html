<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Thu, 16 Jun 2011 13:02:46 +0000">

<link rel="stylesheet" type="text/css" href="../../../stylesheet.css">
<link rel="start" href="../../../overview-summary.html">

<title>PHPCR/Query/QueryInterface.php (PHPCR API)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../../overview-files.html">Files</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../todo-list.html">Todo</a></li>
<li><a href="../../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../../index.html" target="_top">Frames</a>
<a href="../../../source/phpcr/query/queryinterface.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>PHPCR/Query/QueryInterface.php</h1>
<div class="comment" id="overview_description"><p>This file is part of the PHPCR API and was originally ported from the Java
JCR API to PHP by Karsten Dambekalns for the FLOW3 project.</p><p>Copyright 2008-2011 Karsten Dambekalns <karsten@typo3.org></p><p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p><p>http://www.apache.org/licenses/LICENSE-2.0</p><p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div>

<hr>

<a name="line1"></a><pre class="php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
<a name="line2"></a>&nbsp;
<a name="line3"></a><span style="color: #009933; font-style: italic;">/**
<a name="line4"></a> * This file is part of the PHPCR API and was originally ported from the Java
<a name="line5"></a> * JCR API to PHP by Karsten Dambekalns for the FLOW3 project.
<a name="line6"></a> *
<a name="line7"></a> * Copyright 2008-2011 Karsten Dambekalns &lt;karsten@typo3.org&gt;
<a name="line8"></a> *
<a name="line9"></a> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<a name="line10"></a> * you may not use this file except in compliance with the License.
<a name="line11"></a> * You may obtain a copy of the License at
<a name="line12"></a> *
<a name="line13"></a> *     http://www.apache.org/licenses/LICENSE-2.0
<a name="line14"></a> *
<a name="line15"></a> * Unless required by applicable law or agreed to in writing, software
<a name="line16"></a> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<a name="line17"></a> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<a name="line18"></a> * See the License for the specific language governing permissions and
<a name="line19"></a> * limitations under the License.
<a name="line20"></a> *
<a name="line21"></a> * @license http://www.apache.org/licenses/LICENSE-2.0 Apache Software License 2.0
<a name="line22"></a> * @link http://phpcr.github.com/
<a name="line23"></a>*/</span>
<a name="line24"></a>&nbsp;
<a name="line25"></a><span style="color: #000000; font-weight: bold;">namespace</span> PHPCR\Query<span style="color: #339933;">;</span>
<a name="line26"></a>&nbsp;
<a name="line27"></a><span style="color: #009933; font-style: italic;">/**
<a name="line28"></a> * A Query object.
<a name="line29"></a> *
<a name="line30"></a> * &lt;b&gt;PHPCR Note:&lt;/b&gt; Instead of the dropped ValueInterface, bindValue uses native php variables
<a name="line31"></a> *
<a name="line32"></a> * @package phpcr
<a name="line33"></a> * @subpackage interfaces
<a name="line34"></a> * @api
<a name="line35"></a> */</span>
<a name="line36"></a><span style="color: #000000; font-weight: bold;">interface</span> QueryInterface
<a name="line37"></a><span style="color: #009900;">&#123;</span>
<a name="line38"></a>    <span style="color: #009933; font-style: italic;">/**#@+
<a name="line39"></a>     * @var string
<a name="line40"></a>     */</span>
<a name="line41"></a>&nbsp;
<a name="line42"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line43"></a>     * A string constant representing the JCR-JQOM query language.
<a name="line44"></a>     * @api
<a name="line45"></a>     */</span>
<a name="line46"></a>    <span style="color: #000000; font-weight: bold;">const</span> JCR_JQOM <span style="color: #339933;">=</span> <span style="color: #0000ff;">'JCR-JQOM'</span><span style="color: #339933;">;</span>
<a name="line47"></a>&nbsp;
<a name="line48"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line49"></a>     * A string constant representing the JCR-SQL2 query language.
<a name="line50"></a>     * @api
<a name="line51"></a>     */</span>
<a name="line52"></a>    <span style="color: #000000; font-weight: bold;">const</span> JCR_SQL2 <span style="color: #339933;">=</span> <span style="color: #0000ff;">'JCR-SQL2'</span><span style="color: #339933;">;</span>
<a name="line53"></a>&nbsp;
<a name="line54"></a>    <span style="color: #009933; font-style: italic;">/**#@-*/</span>
<a name="line55"></a>&nbsp;
<a name="line56"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line57"></a>     * Binds the given value to the variable named $varName.
<a name="line58"></a>     *
<a name="line59"></a>     * @param string $varName name of variable in query
<a name="line60"></a>     * @param mixed $value value to bind
<a name="line61"></a>     * @return void
<a name="line62"></a>     *
<a name="line63"></a>     * @throws \InvalidArgumentException if $varName is not a valid variable in this query.
<a name="line64"></a>     * @throws RepositoryException if an error occurs.
<a name="line65"></a>     * @api
<a name="line66"></a>     */</span>
<a name="line67"></a>    <span style="color: #000000; font-weight: bold;">function</span> bindValue<span style="color: #009900;">&#40;</span><span style="color: #000088;">$varName</span><span style="color: #339933;">,</span> <span style="color: #000088;">$value</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line68"></a>&nbsp;
<a name="line69"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line70"></a>     * Executes this query and returns a QueryResult object.
<a name="line71"></a>     *
<a name="line72"></a>     * @return \PHPCR\Query\QueryInterface a QueryResult object
<a name="line73"></a>     *
<a name="line74"></a>     * @throws \PHPCR\Query\InvalidQueryException if the query contains an unbound variable.
<a name="line75"></a>     * @throws \PHPCR\RepositoryException if an error occurs
<a name="line76"></a>     * @api
<a name="line77"></a>     */</span>
<a name="line78"></a>    <span style="color: #000000; font-weight: bold;">function</span> execute<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line79"></a>&nbsp;
<a name="line80"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line81"></a>     * Returns the names of the bind variables in this query.
<a name="line82"></a>     *
<a name="line83"></a>     * If this query does not contains any bind variables then an empty array is returned.
<a name="line84"></a>     *
<a name="line85"></a>     * @return array the names of the bind variables in this query.
<a name="line86"></a>     *
<a name="line87"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line88"></a>     * @api
<a name="line89"></a>     */</span>
<a name="line90"></a>    <span style="color: #000000; font-weight: bold;">function</span> getBindVariableNames<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line91"></a>&nbsp;
<a name="line92"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line93"></a>     * Sets the maximum size of the result set to limit.
<a name="line94"></a>     *
<a name="line95"></a>     * @param integer $limit The amount of result items to be fetched.
<a name="line96"></a>     * @return void
<a name="line97"></a>     * @api
<a name="line98"></a>     */</span>
<a name="line99"></a>    <span style="color: #000000; font-weight: bold;">function</span> setLimit<span style="color: #009900;">&#40;</span><span style="color: #000088;">$limit</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line100"></a>&nbsp;
<a name="line101"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line102"></a>     * Sets the start offset of the result set to offset.
<a name="line103"></a>     *
<a name="line104"></a>     * @param integer $offset The start point of the result set from when the item shall be fetched.
<a name="line105"></a>     * @return void
<a name="line106"></a>     * @api
<a name="line107"></a>     */</span>
<a name="line108"></a>    <span style="color: #000000; font-weight: bold;">function</span> setOffset<span style="color: #009900;">&#40;</span><span style="color: #000088;">$offset</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line109"></a>&nbsp;
<a name="line110"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line111"></a>     * Returns the statement defined for this query.
<a name="line112"></a>     *
<a name="line113"></a>     * If the language of this query is string-based (like JCR-SQL2), this method
<a name="line114"></a>     * will return the statement that was used to create this query.
<a name="line115"></a>     *
<a name="line116"></a>     * If the language of this query is JCR-JQOM, this method will return the
<a name="line117"></a>     * JCR-SQL2 equivalent of the JCR-JQOM object tree.
<a name="line118"></a>     *
<a name="line119"></a>     * This is the standard serialization of JCR-JQOM and is also the string stored
<a name="line120"></a>     * in the jcr:statement property if the query is persisted. See storeAsNode($absPath).
<a name="line121"></a>     *
<a name="line122"></a>     * @return string The query statement.
<a name="line123"></a>     * @api
<a name="line124"></a>     */</span>
<a name="line125"></a>    <span style="color: #000000; font-weight: bold;">function</span> getStatement<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line126"></a>&nbsp;
<a name="line127"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line128"></a>     * Returns the language set for this query.
<a name="line129"></a>     *
<a name="line130"></a>     * This will be one of the query language constants returned by
<a name="line131"></a>     * QueryManager.getSupportedQueryLanguages().
<a name="line132"></a>     *
<a name="line133"></a>     * @return string The query language.
<a name="line134"></a>     * @api
<a name="line135"></a>     */</span>
<a name="line136"></a>    <span style="color: #000000; font-weight: bold;">function</span> getLanguage<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line137"></a>&nbsp;
<a name="line138"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line139"></a>     * Fetches the path of the node representing this query.
<a name="line140"></a>     *
<a name="line141"></a>     * If this is a Query object that has been stored using storeAsNode(java.lang.String)
<a name="line142"></a>     * (regardless of whether it has been saved yet) or retrieved using
<a name="line143"></a>     * QueryManager.getQuery(javax.jcr.Node)), then this method returns the path
<a name="line144"></a>     * of the nt:query node that stores the query.
<a name="line145"></a>     *
<a name="line146"></a>     * @return string Path of the node representing this query.
<a name="line147"></a>     *
<a name="line148"></a>     * @throws \PHPCR\ItemNotFoundException if this query is not a stored query.
<a name="line149"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line150"></a>     * @api
<a name="line151"></a>     */</span>
<a name="line152"></a>    <span style="color: #000000; font-weight: bold;">function</span> getStoredQueryPath<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line153"></a>&nbsp;
<a name="line154"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line155"></a>     * Creates a node of type nt:query holding this query at $absPath and
<a name="line156"></a>     * returns that node.
<a name="line157"></a>     *
<a name="line158"></a>     * This is  a session-write method and therefore requires a
<a name="line159"></a>     * Session.save() to dispatch the change.
<a name="line160"></a>     *
<a name="line161"></a>     * The $absPath provided must not have an index on its final element. If
<a name="line162"></a>     * ordering is supported by the node type of the parent node then the new
<a name="line163"></a>     * node is appended to the end of the child node list.
<a name="line164"></a>     *
<a name="line165"></a>     * @param string $absPath absolute path the query should be stored at
<a name="line166"></a>     * @return \PHPCR\NodeInterface the newly created node.
<a name="line167"></a>     *
<a name="line168"></a>     * @throws \PHPCR\ItemExistsException if an item at the specified path already exists,
<a name="line169"></a>     *                                    same-name siblings are not allowed and this implementation performs
<a name="line170"></a>     *                                    this validation immediately.
<a name="line171"></a>     * @throws \PHPCR\PathNotFoundException if the specified path implies intermediary Nodes that do not exist
<a name="line172"></a>     *                                      or the last element of relPath has an index, and this implementation
<a name="line173"></a>     *                                      performs this validation immediately.
<a name="line174"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException if a node type or implementation-specific constraint
<a name="line175"></a>     *                                                      is violated or if an attempt is made to add a node as
<a name="line176"></a>     *                                                      the child of a property and this implementation
<a name="line177"></a>     *                                                      performs this validation immediately.
<a name="line178"></a>     * @throws \PHPCR\Version\VersionException if the node to which the new child is being added is read-only due to
<a name="line179"></a>     *                                         a checked-in node and this implementation performs this validation
<a name="line180"></a>     *                                         immediately.
<a name="line181"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the addition of the node and this implementation performs
<a name="line182"></a>     *                                   this validation immediately instead of waiting until save.
<a name="line183"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException in a level 1 implementation.
<a name="line184"></a>     * @throws \PHPCR\RepositoryException if another error occurs or if the absPath provided has an index on its final
<a name="line185"></a>     *                                    element.
<a name="line186"></a>     * @api
<a name="line187"></a>     */</span>
<a name="line188"></a>    <span style="color: #000000; font-weight: bold;">function</span> storeAsNode<span style="color: #009900;">&#40;</span><span style="color: #000088;">$absPath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line189"></a><span style="color: #009900;">&#125;</span>
<a name="line190"></a>&nbsp;</pre>
<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../../overview-files.html">Files</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../todo-list.html">Todo</a></li>
<li><a href="../../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../../index.html" target="_top">Frames</a>
<a href="../../../source/phpcr/query/queryinterface.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>