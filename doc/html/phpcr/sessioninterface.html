<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Thu, 26 May 2011 12:55:41 +0000">

<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="start" href="../overview-summary.html">

<title>SessionInterface (PHPCR API)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../phpcr/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../phpcr/package-tree.html">Tree</a></li>
<li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../todo-list.html">Todo</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../phpcr/sessioninterface.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">PHPCR\SessionInterface</div>
<a href="../source/phpcr/sessioninterface.php.html#line58" class="location">PHPCR/SessionInterface.php at line 58</a>

<h1>Interface SessionInterface</h1>

<pre class="tree"><strong>SessionInterface</strong><br /></pre>

<hr>

<p class="signature">public  interface <strong>SessionInterface</strong></p>

<div class="comment" id="overview_description"><p>Describes the implementation of a session class.</p><p>The Session object provides read and (in level 2) write access to the
content of a particular workspace in the repository.</p><p>The Session object is returned by Repository::login(). It encapsulates both
the authorization settings of a particular user (as specified by the passed
Credentials) and a binding to the workspace specified by the workspaceName
passed on login.</p><p>Each Session object is associated one-to-one with a Workspace object. The
Workspace object represents a "view" of an actual repository workspace
entity as seen through the authorization settings of its associated Session.</p><p><b>PHPCR Note:</b>
We removed getValueFactory as the ValueFactory interface has
been removed. To set properties, use NodeInterface::setProperty() or
PropertyInterface::setValue() with native PHP variables.</p></div>

<dl>
<dt>Subpackage:</dt>
<dd>interfaces</dd>
<dt>Api.</dt>
</dl>
<hr>

<table id="summary_field">
<tr><th colspan="2">Constant Summary</th></tr>
<tr>
<td class="type">final static  string</td>
<td class="description"><p class="name"><a href="#ACTION_ADD_NODE">ACTION_ADD_NODE</a></p><p class="description">A constant representing the add_node action string, used to determine if
this Session has permission to add a new node.</p></td>
</tr>
<tr>
<td class="type">final static  str</td>
<td class="description"><p class="name"><a href="#ACTION_READ">ACTION_READ</a></p><p class="description">A constant representing the read action string, used to determine if this
Session has permission to retrieve an item (and read the value, in the case
of a property).</p></td>
</tr>
<tr>
<td class="type">final static  str</td>
<td class="description"><p class="name"><a href="#ACTION_REMOVE">ACTION_REMOVE</a></p><p class="description">A constant representing the remove action string, used to determine if this
Session has permission to remove an item.</p></td>
</tr>
<tr>
<td class="type">final static  str</td>
<td class="description"><p class="name"><a href="#ACTION_SET_PROPERTY">ACTION_SET_PROPERTY</a></p><p class="description">A constant representing the set_property action string, used to determine if
this Session has permission to set (add or modify) a property.</p></td>
</tr>
</table>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#checkPermission()">checkPermission</a>(string absPath, string actions)</p><p class="description">Determines whether this Session has permission to perform the specified actions
at the specified absPath.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#exportDocumentView()">exportDocumentView</a>(string absPath, string out, boolean skipBinary, boolean noRecurse)</p><p class="description">Serializes the node (and if $noRecurse is false, the whole subgraph) at
$absPath as an XML stream and outputs it to the supplied URI.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#exportSystemView()">exportSystemView</a>(string absPath, string out, boolean skipBinary, boolean noRecurse)</p><p class="description">Serializes the node (and if $noRecurse is false, the whole subgraph) at
$absPath as an XML stream and outputs it to the supplied URI. </p></td>
</tr>
<tr>
<td class="type"> \PHPCR\Security\AccessControlManager</td>
<td class="description"><p class="name"><a href="#getAccessControlManager()">getAccessControlManager</a>()</p><p class="description">Returns the access control manager for this Session.</p></td>
</tr>
<tr>
<td class="type"> mixed</td>
<td class="description"><p class="name"><a href="#getAttribute()">getAttribute</a>(string name)</p><p class="description">Returns the value of the named attribute, or null if no
attribute of the given name exists. </p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#getAttributeNames()">getAttributeNames</a>()</p><p class="description">Returns the names of the attributes set in this session as a result of
the Credentials that were used to acquire it.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/contenthandlerinterface.html">ContentHandlerInterface</a></td>
<td class="description"><p class="name"><a href="#getImportContentHandler()">getImportContentHandler</a>(string parentAbsPath, integer uuidBehavior)</p><p class="description">Fetches a content handler without altering the session.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/iteminterface.html">ItemInterface</a></td>
<td class="description"><p class="name"><a href="#getItem()">getItem</a>(string absPath)</p><p class="description">Returns the node at the specified absolute path in the workspace.
</p></td>
</tr>
<tr>
<td class="type"> string</td>
<td class="description"><p class="name"><a href="#getNamespacePrefix()">getNamespacePrefix</a>(string uri)</p><p class="description">Returns the prefix to which the given uri is mapped as currently set in
this Session.</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#getNamespacePrefixes()">getNamespacePrefixes</a>()</p><p class="description">Returns all prefixes currently mapped to URIs in this Session.</p></td>
</tr>
<tr>
<td class="type"> string</td>
<td class="description"><p class="name"><a href="#getNamespaceURI()">getNamespaceURI</a>(string prefix)</p><p class="description">Returns the URI to which the given prefix is mapped as currently set in
this Session.</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/nodeinterface.html">NodeInterface</a></td>
<td class="description"><p class="name"><a href="#getNode()">getNode</a>(string absPath)</p><p class="description">Returns the node at the specified absolute path in the workspace.</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/nodeinterface.html">NodeInterface</a></td>
<td class="description"><p class="name"><a href="#getNodeByIdentifier()">getNodeByIdentifier</a>(string id)</p><p class="description">Returns the node specified by the given identifier.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/propertyinterface.html">PropertyInterface</a></td>
<td class="description"><p class="name"><a href="#getProperty()">getProperty</a>(string absPath)</p><p class="description">Returns the property at the specified absolute path in the workspace.</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/repositoryinterface.html">RepositoryInterface</a></td>
<td class="description"><p class="name"><a href="#getRepository()">getRepository</a>()</p><p class="description">Returns the Repository object through which this session was acquired.</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/retention/retentionmanagerinterface.html">RetentionManagerInterface</a></td>
<td class="description"><p class="name"><a href="#getRetentionManager()">getRetentionManager</a>()</p><p class="description">Returns the retention and hold manager for this Session.</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/nodeinterface.html">NodeInterface</a></td>
<td class="description"><p class="name"><a href="#getRootNode()">getRootNode</a>()</p><p class="description">Returns the root node of the workspace, "/".
</p></td>
</tr>
<tr>
<td class="type"> string</td>
<td class="description"><p class="name"><a href="#getUserID()">getUserID</a>()</p><p class="description">Gets the user ID associated with this Session.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/workspaceinterface.html">WorkspaceInterface</a></td>
<td class="description"><p class="name"><a href="#getWorkspace()">getWorkspace</a>()</p><p class="description">Returns the Workspace attached to this Session.</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#hasCapability()">hasCapability</a>(string methodName, object target, array arguments)</p><p class="description">Checks whether an operation can be performed given as much context as can
be determined by the repository, including:- Permissions granted to the current user, including access control privileges.
</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#hasPendingChanges()">hasPendingChanges</a>()</p><p class="description">Determines if the current session has pending changes.
</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#hasPermission()">hasPermission</a>(string absPath, string actions)</p><p class="description">Determines if the current session is permitted to run the passed actions.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../phpcr/sessioninterface.html">SessionInterface</a></td>
<td class="description"><p class="name"><a href="#impersonate()">impersonate</a>(<a href="../phpcr/credentialsinterface.html">CredentialsInterface</a> credentials)</p><p class="description">Returns a new session in accordance with the specified (new) Credentials.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#importXML()">importXML</a>(string parentAbsPath, string in, integer uuidBehavior)</p><p class="description">Deserializes an XML document and adds the resulting item subgraph as a
child of the node at $parentAbsPath.
</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#isLive()">isLive</a>()</p><p class="description">Determines if the current session is still valid.
</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#itemExists()">itemExists</a>(string absPath)</p><p class="description">Determines if the item identified by a path does exists.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#logout()">logout</a>()</p><p class="description">Releases all resources associated with this Session.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#move()">move</a>(string srcAbsPath, string destAbsPath)</p><p class="description">Moves the node at srcAbsPath (and its entire subgraph) to the new location
at destAbsPath.
</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#nodeExists()">nodeExists</a>(string absPath)</p><p class="description">Determines if the node identified by the given absolute path does exist.
</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#propertyExists()">propertyExists</a>(string absPath)</p><p class="description">Determines the existance of a property.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#refresh()">refresh</a>(boolean keepChanges)</p><p class="description">Reloads the current session.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#removeItem()">removeItem</a>(string absPath)</p><p class="description">Removes the specified item and its subgraph.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#save()">save</a>()</p><p class="description">Validates all pending changes currently recorded in this Session.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#setNamespacePrefix()">setNamespacePrefix</a>(string prefix, string uri)</p><p class="description">Sets the name of a namespace prefix.
</p></td>
</tr>
</table>

<h2 id="detail_field">Constant Detail</h2>
<a href="../source/phpcr/sessioninterface.php.html#line69" class="location">PHPCR/SessionInterface.php at line 69</a>

<h3 id="ACTION_ADD_NODE">ACTION_ADD_NODE</h3>
<code class="signature">public final static  string <strong>ACTION_ADD_NODE</strong> = 'add_node'</code>
<div class="details">
<p>A constant representing the add_node action string, used to determine if
this Session has permission to add a new node.</p><dl>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line77" class="location">PHPCR/SessionInterface.php at line 77</a>

<h3 id="ACTION_READ">ACTION_READ</h3>
<code class="signature">public final static  str <strong>ACTION_READ</strong> = 'read'</code>
<div class="details">
<p>A constant representing the read action string, used to determine if this
Session has permission to retrieve an item (and read the value, in the case
of a property).</p><dl>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line84" class="location">PHPCR/SessionInterface.php at line 84</a>

<h3 id="ACTION_REMOVE">ACTION_REMOVE</h3>
<code class="signature">public final static  str <strong>ACTION_REMOVE</strong> = 'remove'</code>
<div class="details">
<p>A constant representing the remove action string, used to determine if this
Session has permission to remove an item.</p><dl>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line91" class="location">PHPCR/SessionInterface.php at line 91</a>

<h3 id="ACTION_SET_PROPERTY">ACTION_SET_PROPERTY</h3>
<code class="signature">public final static  str <strong>ACTION_SET_PROPERTY</strong> = 'set_property'</code>
<div class="details">
<p>A constant representing the set_property action string, used to determine if
this Session has permission to set (add or modify) a property.</p><dl>
<dt>Api.</dt>
</dl>
</div>

<hr>

<h2 id="detail_method">Method Detail</h2>
<a href="../source/phpcr/sessioninterface.php.html#line517" class="location">PHPCR/SessionInterface.php at line 517</a>

<h3 id="checkPermission()">checkPermission</h3>
<code class="signature">public  void <strong>checkPermission</strong>(string absPath, string actions)</code>
<div class="details">
<p>Determines whether this Session has permission to perform the specified actions
at the specified absPath.</p><p>This method quietly returns if the access request is
permitted, or throws a \PHPCR\Security\AccessControlException otherwise.
The actions parameter is a comma separated list of action strings. The following
action strings are defined:</p>
<ul>
<li>add_node: If checkPermission(path, "add_node") returns quietly, then this Session
has permission to add a node at path, otherwise permission is denied.</li>
<li>set_property: If checkPermission(path, "set_property") returns quietly, then this
Session has permission to set (add or change) a property at path, otherwise
permission is denied.</li>
<li>remove: If checkPermission(path, "remove") returns quietly, then this Session
has permission to remove an item at path, otherwise permission is denied.</li>
<li>read: If checkPermission(path, "read") returns quietly, then this Session has
permission to retrieve (and read the value of, in the case of a property) an
item at path, otherwise permission is denied.</li>
</ul>
<p>When more than one action is specified in the actions parameter, this method
will only return true if this Session has permission to perform all of the
listed actions at the specified path.</p><p>The information returned through this method will only reflect the access
control status (both JCR defined and implementation-specific) and not
other restrictions that may exist, such as node type constraints. For
example, even though hasPermission may indicate that a particular Session
may add a property at /A/B/C, the node type of the node at /A/B may
prevent the addition of a property called C.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - an absolute path.</dd>
<dd>actions - a comma separated list of action strings.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/security/accesscontrolexception.html">\PHPCR\Security\AccessControlException</a> - If permission is denied.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line803" class="location">PHPCR/SessionInterface.php at line 803</a>

<h3 id="exportDocumentView()">exportDocumentView</h3>
<code class="signature">public  void <strong>exportDocumentView</strong>(string absPath, string out, boolean skipBinary, boolean noRecurse)</code>
<div class="details">
<p>Serializes the node (and if $noRecurse is false, the whole subgraph) at
$absPath as an XML stream and outputs it to the supplied URI.</p><p>The resulting XML is in the document view form. Note that $absPath must be
the path of a node, not a property.</p><p>If $skipBinary is true then any properties of PropertyType.BINARY will be serialized as if
they are empty. That is, the existence of the property will be serialized, but its content
will not appear in the serialized output (the value of the attribute will be empty). If
$skipBinary is false then the actual value(s) of each BINARY property is recorded using
Base64 encoding.</p><p>If $noRecurse is true then only the node at $absPath and its properties, but not its
child nodes, are serialized. If $noRecurse is false then the entire subgraph rooted at
$absPath is serialized.</p><p>If the user lacks read access to some subsection of the specified tree, that section
simply does not get serialized, since, from the user's point of view, it is not there.</p><p>The serialized output will reflect the state of the current workspace as modified by
the state of this Session. This means that pending changes (regardless of whether they
are valid according to node type constraints) and all namespace mappings in the
namespace registry, as modified by the current session-mappings, are reflected in
the output.</p><p>The output XML will be encoded in UTF-8.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The path of the root of the subgraph to be serialized. This must be the path to a node, not a property</dd>
<dd>out - The URI to which the XML serialization of the subgraph will be output.</dd>
<dd>skipBinary - A boolean governing whether binary properties are to be serialized.</dd>
<dd>noRecurse - A boolean governing whether the subgraph at absPath is to be recursed.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node exists at absPath.</dd>
<dd>\RuntimeException - if an error during an I/O operation occurs.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line761" class="location">PHPCR/SessionInterface.php at line 761</a>

<h3 id="exportSystemView()">exportSystemView</h3>
<code class="signature">public  void <strong>exportSystemView</strong>(string absPath, string out, boolean skipBinary, boolean noRecurse)</code>
<div class="details">
<p>Serializes the node (and if $noRecurse is false, the whole subgraph) at
$absPath as an XML stream and outputs it to the supplied URI. The
resulting XML is in the system view form. Note that $absPath must be
the path of a node, not a property.</p><p>If $skipBinary is true then any properties of PropertyType.BINARY will be serialized
as if they are empty. That is, the existence of the property will be serialized,
but its content will not appear in the serialized output (the <sv:value> element
will have no content). Note that in the case of multi-value BINARY properties,
the number of values in the property will be reflected in the serialized output,
though they will all be empty. If $skipBinary is false then the actual value(s)
of each BINARY property is recorded using Base64 encoding.</p><p>If $noRecurse is true then only the node at $absPath and its properties, but not
its child nodes, are serialized. If $noRecurse is false then the entire subgraph
rooted at $absPath is serialized.</p><p>If the user lacks read access to some subsection of the specified tree, that
section simply does not get serialized, since, from the user's point of view,
it is not there.</p><p>The serialized output will reflect the state of the current workspace as
modified by the state of this Session. This means that pending changes
(regardless of whether they are valid according to node type constraints)
and all namespace mappings in the namespace registry, as modified by the
current session-mappings, are reflected in the output.</p><p>The output XML will be encoded in UTF-8.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The path of the root of the subgraph to be serialized. This must be the path to a node, not a property</dd>
<dd>out - The URI to which the XML serialization of the subgraph will be output.</dd>
<dd>skipBinary - A boolean governing whether binary properties are to be serialized.</dd>
<dd>noRecurse - A boolean governing whether the subgraph at absPath is to be recursed.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node exists at absPath.</dd>
<dd>\RuntimeException - if an error during an I/O operation occurs.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line897" class="location">PHPCR/SessionInterface.php at line 897</a>

<h3 id="getAccessControlManager()">getAccessControlManager</h3>
<code class="signature">public  \PHPCR\Security\AccessControlManager <strong>getAccessControlManager</strong>()</code>
<div class="details">
<p>Returns the access control manager for this Session.</p><dl>
<dt>Returns:</dt>
<dd>the access control manager for this Session</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/unsupportedrepositoryoperationexception.html">\PHPCR\UnsupportedRepositoryOperationException</a> - if access control is not supported.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line135" class="location">PHPCR/SessionInterface.php at line 135</a>

<h3 id="getAttribute()">getAttribute</h3>
<code class="signature">public  mixed <strong>getAttribute</strong>(string name)</code>
<div class="details">
<p>Returns the value of the named attribute, or null if no
attribute of the given name exists. See getAttributeNames().</p><dl>
<dt>Parameters:</dt>
<dd>name - The name of an attribute passed in the credentials used to acquire this session.</dd>
<dt>Returns:</dt>
<dd>The value of the attribute or null if no attribute of the given name exists.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line125" class="location">PHPCR/SessionInterface.php at line 125</a>

<h3 id="getAttributeNames()">getAttributeNames</h3>
<code class="signature">public  array <strong>getAttributeNames</strong>()</code>
<div class="details">
<p>Returns the names of the attributes set in this session as a result of
the Credentials that were used to acquire it.</p><p>Not all Credentials implementations will contain attributes (though, for example,
SimpleCredentials does allow for them). This method returns an empty
array if the Credentials instance did not provide attributes.</p><dl>
<dt>Returns:</dt>
<dd>A string array containing the names of all attributes passed in the credentials used to acquire this session.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line642" class="location">PHPCR/SessionInterface.php at line 642</a>

<h3 id="getImportContentHandler()">getImportContentHandler</h3>
<code class="signature">public  <a href="../phpcr/contenthandlerinterface.html">ContentHandlerInterface</a> <strong>getImportContentHandler</strong>(string parentAbsPath, integer uuidBehavior)</code>
<div class="details">
<p>Fetches a content handler without altering the session.</p><p>Returns an \PHPCR\ContentHandlerInterface which is used to push SAX events
to the repository. If the incoming XML (in the form of SAX events)
does not appear to be a JCR system view XML document then it is interpreted
as a JCR document view XML document.
The incoming XML is deserialized into a subgraph of items immediately below
the node at parentAbsPath.</p><p>This method simply returns the ContentHandler without altering the state of
the session; the actual deserialization to the session transient space is
done through the methods of the ContentHandler. Invalid XML data will
cause the ContentHandler to throw a SAXException.</p><p>As SAX events are fed into the ContentHandler, the tree of new items is built
in the transient storage of the session. In order to dispatch the new
content, save must be called. See Workspace.getImportContentHandler() for
a workspace-write version of this method.</p><p>The flag uuidBehavior governs how the identifiers of incoming nodes are
handled. There are four options:</p>
<ul>
<li>ImportUUIDBehavior.IMPORT_UUID_CREATE_NEW: Incoming identifiers nodes are added
in the same way that new node is added with Node.addNode. That is, they are either
assigned newly created identifiers upon addition or upon save (depending on the
implementation). In either case, identifier collisions will not occur.</li>
<li>ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING: If an incoming node has
the same identifier as a node already existing in the workspace then the already
existing node (and its subgraph) is removed from wherever it may be in the workspace
before the incoming node is added. Note that this can result in nodes "disappearing"
from locations in the workspace that are remote from the location to which the
incoming subgraph is being written. Both the removal and the new addition will be
persisted on save.</li>
<li>ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING: If an incoming node has
the same identifier as a node already existing in the workspace, then the
already-existing node is replaced by the incoming node in the same position as the
existing node. Note that this may result in the incoming subgraph being disaggregated
and "spread around" to different locations in the workspace. In the most extreme
case this behavior may result in no node at all being added as child of parentAbsPath.
This will occur if the topmost element of the incoming XML has the same identifier as
an existing node elsewhere in the workspace. The change will be persisted on save.</li>
<li>ImportUUIDBehavior.IMPORT_UUID_COLLISION_THROW: If an incoming node has the same
identifier as a node already existing in the workspace then a SAXException is thrown
by the ContentHandler during deserialization.</li>
</ul>
<p>Unlike Workspace.getImportContentHandler, this method does not necessarily enforce
all node type constraints during deserialization. Those that would be immediately
enforced in a session-write method (Node.addNode, Node.setProperty etc.) of this
implementation cause the returned ContentHandler to throw an immediate SAXException
during deserialization. All other constraints are checked on save, just as they are
in normal write operations. However, which node type constraints are enforced depends
upon whether node type information in the imported data is respected, and this is an
implementation-specific issue.</p><p>A SAXException will also be thrown by the returned ContentHandler during deserialization
if uuidBehavior is set to IMPORT_UUID_COLLISION_REMOVE_EXISTING and an incoming node has
the same identifier as the node at parentAbsPath or one of its ancestors.</p><dl>
<dt>Parameters:</dt>
<dd>parentAbsPath - the absolute path of a node under which (as child) the imported subgraph will be built.</dd>
<dd>uuidBehavior - a four-value flag that governs how incoming identifiers are handled.</dd>
<dt>Returns:</dt>
<dd>whose methods may be called to feed SAX events into the deserializer.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node exists at parentAbsPath and this implementation performs this validation immediately.</dd>
<dd>\PHPCR\ConstraintViolationException - if the new subgraph cannot be added to the node at parentAbsPath due to node-type or other implementation-specific constraints, and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/version/versionexception.html">\PHPCR\Version\VersionException</a> - if the node at $parentAbsPath is read-only due to a checked-in node and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/lock/lockexception.html">\PHPCR\Lock\LockException</a> - if a lock prevents the addition of the subgraph and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line209" class="location">PHPCR/SessionInterface.php at line 209</a>

<h3 id="getItem()">getItem</h3>
<code class="signature">public  <a href="../phpcr/iteminterface.html">ItemInterface</a> <strong>getItem</strong>(string absPath)</code>
<div class="details">
<p>Returns the node at the specified absolute path in the workspace.</p><p>If no such node exists, then it returns the property at the specified path.</p><p>This method should only be used if the application does not know whether the
item at the indicated path is property or node. In cases where the application
has this information, either getNode(java.lang.String) or
getProperty(java.lang.String) should be used, as appropriate. In many repository
implementations the node and property-specific methods are likely to be more
efficient than getItem.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - An absolute path.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no accessible item is found at the specified path.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line862" class="location">PHPCR/SessionInterface.php at line 862</a>

<h3 id="getNamespacePrefix()">getNamespacePrefix</h3>
<code class="signature">public  string <strong>getNamespacePrefix</strong>(string uri)</code>
<div class="details">
<p>Returns the prefix to which the given uri is mapped as currently set in
this Session.</p><dl>
<dt>Parameters:</dt>
<dd>uri - The loaction of the namespace definition (usually a uri).</dd>
<dt>Returns:</dt>
<dd>The prefix of a namespace identified by its uri.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/namespaceexception.html">\PHPCR\NamespaceException</a> - if the specified uri is unknown.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line836" class="location">PHPCR/SessionInterface.php at line 836</a>

<h3 id="getNamespacePrefixes()">getNamespacePrefixes</h3>
<code class="signature">public  array <strong>getNamespacePrefixes</strong>()</code>
<div class="details">
<p>Returns all prefixes currently mapped to URIs in this Session.</p><dl>
<dt>Returns:</dt>
<dd>The list of currently registered namespace prefixes.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line849" class="location">PHPCR/SessionInterface.php at line 849</a>

<h3 id="getNamespaceURI()">getNamespaceURI</h3>
<code class="signature">public  string <strong>getNamespaceURI</strong>(string prefix)</code>
<div class="details">
<p>Returns the URI to which the given prefix is mapped as currently set in
this Session.</p><dl>
<dt>Parameters:</dt>
<dd>prefix - The identifier of the namespace location to be returned.</dd>
<dt>Returns:</dt>
<dd>The location of the namespace definition identified by its prefix.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/namespaceexception.html">\PHPCR\NamespaceException</a> - if the specified prefix is unknown.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line221" class="location">PHPCR/SessionInterface.php at line 221</a>

<h3 id="getNode()">getNode</h3>
<code class="signature">public  <a href="../phpcr/nodeinterface.html">NodeInterface</a> <strong>getNode</strong>(string absPath)</code>
<div class="details">
<p>Returns the node at the specified absolute path in the workspace.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - An absolute path.</dd>
<dt>Returns:</dt>
<dd>A node</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no accessible node is found at the specified path.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line188" class="location">PHPCR/SessionInterface.php at line 188</a>

<h3 id="getNodeByIdentifier()">getNodeByIdentifier</h3>
<code class="signature">public  <a href="../phpcr/nodeinterface.html">NodeInterface</a> <strong>getNodeByIdentifier</strong>(string id)</code>
<div class="details">
<p>Returns the node specified by the given identifier.</p><p>Applies to both referenceable and non-referenceable nodes.</p><dl>
<dt>Parameters:</dt>
<dd>id - An identifier.</dd>
<dt>Returns:</dt>
<dd>A Node.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/itemnotfoundexception.html">\PHPCR\ItemNotFoundException</a> - if no node with the specified identifier exists or if this Session does not have read access to the node with the specified identifier.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line233" class="location">PHPCR/SessionInterface.php at line 233</a>

<h3 id="getProperty()">getProperty</h3>
<code class="signature">public  <a href="../phpcr/propertyinterface.html">PropertyInterface</a> <strong>getProperty</strong>(string absPath)</code>
<div class="details">
<p>Returns the property at the specified absolute path in the workspace.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - An absolute path.</dd>
<dt>Returns:</dt>
<dd>A property</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no accessible property is found at the specified path.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line101" class="location">PHPCR/SessionInterface.php at line 101</a>

<h3 id="getRepository()">getRepository</h3>
<code class="signature">public  <a href="../phpcr/repositoryinterface.html">RepositoryInterface</a> <strong>getRepository</strong>()</code>
<div class="details">
<p>Returns the Repository object through which this session was acquired.</p><dl>
<dt>Returns:</dt>
<dd>a Repository object.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line908" class="location">PHPCR/SessionInterface.php at line 908</a>

<h3 id="getRetentionManager()">getRetentionManager</h3>
<code class="signature">public  <a href="../phpcr/retention/retentionmanagerinterface.html">RetentionManagerInterface</a> <strong>getRetentionManager</strong>()</code>
<div class="details">
<p>Returns the retention and hold manager for this Session.</p><dl>
<dt>Returns:</dt>
<dd>the retention manager for this Session.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/unsupportedrepositoryoperationexception.html">\PHPCR\UnsupportedRepositoryOperationException</a> - if retention and hold are not supported.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line154" class="location">PHPCR/SessionInterface.php at line 154</a>

<h3 id="getRootNode()">getRootNode</h3>
<code class="signature">public  <a href="../phpcr/nodeinterface.html">NodeInterface</a> <strong>getRootNode</strong>()</code>
<div class="details">
<p>Returns the root node of the workspace, "/".</p><p>This node is the main access point to the content of the workspace.</p><dl>
<dt>Returns:</dt>
<dd>The root node of the workspace: a Node object.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">RepositoryException</a> - if an error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line112" class="location">PHPCR/SessionInterface.php at line 112</a>

<h3 id="getUserID()">getUserID</h3>
<code class="signature">public  string <strong>getUserID</strong>()</code>
<div class="details">
<p>Gets the user ID associated with this Session.</p><p>How the user ID is set is up to the implementation, it may be a string passed in as part of the credentials
or it may be a string acquired in some other way. This method is free to return an "anonymous user ID" or null.</p><dl>
<dt>Returns:</dt>
<dd>The user id associated with this Session.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line143" class="location">PHPCR/SessionInterface.php at line 143</a>

<h3 id="getWorkspace()">getWorkspace</h3>
<code class="signature">public  <a href="../phpcr/workspaceinterface.html">WorkspaceInterface</a> <strong>getWorkspace</strong>()</code>
<div class="details">
<p>Returns the Workspace attached to this Session.</p><dl>
<dt>Returns:</dt>
<dd>a Workspace object.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line562" class="location">PHPCR/SessionInterface.php at line 562</a>

<h3 id="hasCapability()">hasCapability</h3>
<code class="signature">public  boolean <strong>hasCapability</strong>(string methodName, object target, array arguments)</code>
<div class="details">
<p>Checks whether an operation can be performed given as much context as can
be determined by the repository, including:</p>
<ul>
<li>Permissions granted to the current user, including access control privileges.</li>
<li>Current state of the target object (reflecting locks, checkin/checkout
status, retention and hold status etc.).</li>
<li>Repository capabilities.</li>
<li>Node type-enforced restrictions.</li>
<li>Repository configuration-specific restrictions.</li>
</ul>
<p>The implementation of this method is best effort: returning false guarantees
that the operation cannot be performed, but returning true does not guarantee
the opposite.</p><p>The methodName parameter identifies the method in question by its name
as defined in the Javadoc.</p><p>The target parameter identifies the object on which the specified method
is called.</p><p>The arguments parameter contains a Map object consisting of
name/value pairs where the name is a String holding the parameter name of
the method as defined in the Javadoc and the value is a variable.</p><p>For example, given a Session S and Node N then</p><p>Map p = new HashMap();
p.put("relPath", "foo");
boolean b = S.hasCapability("addNode", N, p);</p><p>will result in b == false if a child node called foo cannot be added to
the node N within the session S.</p><dl>
<dt>Parameters:</dt>
<dd>methodName - the nakme of the method.</dd>
<dd>target - the target object of the operation.</dd>
<dd>arguments - the arguments of the operation.</dd>
<dt>Returns:</dt>
<dd>false if the operation cannot be performed, true if the operation can be performed or if the repository cannot determine whether the operation can be performed.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line438" class="location">PHPCR/SessionInterface.php at line 438</a>

<h3 id="hasPendingChanges()">hasPendingChanges</h3>
<code class="signature">public  boolean <strong>hasPendingChanges</strong>()</code>
<div class="details">
<p>Determines if the current session has pending changes.</p><p>Returns true if this session holds pending (that is, unsaved) changes;
otherwise returns false.</p><dl>
<dt>Returns:</dt>
<dd>a boolean</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line476" class="location">PHPCR/SessionInterface.php at line 476</a>

<h3 id="hasPermission()">hasPermission</h3>
<code class="signature">public  boolean <strong>hasPermission</strong>(string absPath, string actions)</code>
<div class="details">
<p>Determines if the current session is permitted to run the passed actions.</p><p>Returns true if this Session has permission to perform the specified
actions at the specified absPath and false otherwise.
The actions parameter is a comma separated list of action strings.
The following action strings are defined:</p>
<ul>
<li>add_node: If hasPermission(path, "add_node") returns true, then this
Session has permission to add a node at path.</li>
<li>set_property: If hasPermission(path, "set_property") returns true, then
this Session has permission to set (add or change) a property at path.</li>
<li>remove: If hasPermission(path, "remove") returns true, then this Session
has permission to remove an item at path.</li>
<li>read: If hasPermission(path, "read") returns true, then this Session has
permission to retrieve (and read the value of, in the case of a property)
an item at path.</li>
</ul>
<p>When more than one action is specified in the actions parameter, this method
will only return true if this Session has permission to perform all of the
listed actions at the specified path.</p><p>The information returned through this method will only reflect the access
control status (both JCR defined and implementation-specific) and not
other restrictions that may exist, such as node type constraints. For
example, even though hasPermission may indicate that a particular Session
may add a property at /A/B/C, the node type of the node at /A/B may
prevent the addition of a property called C.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - an absolute path.</dd>
<dd>actions - a comma separated list of action strings.</dd>
<dt>Returns:</dt>
<dd>true if this Session has permission to perform the specified actions at the specified absPath.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line174" class="location">PHPCR/SessionInterface.php at line 174</a>

<h3 id="impersonate()">impersonate</h3>
<code class="signature">public  <a href="../phpcr/sessioninterface.html">SessionInterface</a> <strong>impersonate</strong>(<a href="../phpcr/credentialsinterface.html">CredentialsInterface</a> credentials)</code>
<div class="details">
<p>Returns a new session in accordance with the specified (new) Credentials.</p><p>Allows the current user to "impersonate" another using incomplete or relaxed
credentials requirements (perhaps including a user name but no password, for
example), assuming that this Session gives them that permission.
The new Session is tied to a new Workspace instance. In other words, Workspace
instances are not re-used. However, the Workspace instance returned represents
the same actual persistent workspace entity in the repository as is represented
by the Workspace object tied to this Session.</p><dl>
<dt>Parameters:</dt>
<dd>credentials - A Credentials object</dd>
<dt>Returns:</dt>
<dd>a Session object</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/loginexception.html">\PHPCR\LoginException</a> - if the current session does not have sufficient access to perform the operation.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line719" class="location">PHPCR/SessionInterface.php at line 719</a>

<h3 id="importXML()">importXML</h3>
<code class="signature">public  void <strong>importXML</strong>(string parentAbsPath, string in, integer uuidBehavior)</code>
<div class="details">
<p>Deserializes an XML document and adds the resulting item subgraph as a
child of the node at $parentAbsPath.</p><p>If the incoming XML does not appear to be a JCR system view XML document
then it is interpreted as a document view XML document.</p><p>The tree of new items is built in the transient storage of the Session. In order
to persist the new content, save must be called. The advantage of this
through-the-session method is that (depending on what constraint checks the
implementation leaves until save) structures that violate node type constraints
can be imported, fixed and then saved. The disadvantage is that a large import
will result in a large cache of pending nodes in the session. See
Workspace.importXML(string, string, integer) for a version
of this method that does not go through the Session.</p><p>The flag $uuidBehavior governs how the identifiers of incoming nodes are
handled. There are four options:</p>
<ul>
<li>ImportUUIDBehavior.IMPORT_UUID_CREATE_NEW: Incoming nodes are added in the same
way that new node is added with Node.addNode. That is, they are either assigned
newly created identifiers upon addition or upon save (depending on the implementation,
see 4.9.1.1 When Identifiers are Assigned in the specification). In either case,
identifier collisions will not occur.</li>
<li>ImportUUIDBehavior.IMPORT_UUID_COLLISION_REMOVE_EXISTING: If an incoming node has
the same identifier as a node already existing in the workspace then the already
existing node (and its subgraph) is removed from wherever it may be in the workspace
before the incoming node is added. Note that this can result in nodes "disappearing"
from locations in the workspace that are remote from the location to which the
incoming subgraph is being written. Both the removal and the new addition will be
dispatched on save.</li>
<li>ImportUUIDBehavior.IMPORT_UUID_COLLISION_REPLACE_EXISTING: If an incoming node
has the same identifier as a node already existing in the workspace, then the
already-existing node is replaced by the incoming node in the same position as
the existing node. Note that this may result in the incoming subgraph being
disaggregated and "spread around" to different locations in the workspace. In the
most extreme case this behavior may result in no node at all being added as child
of parentAbsPath. This will occur if the topmost element of the incoming XML has
the same identifier as an existing node elsewhere in the workspace. The change
will be dispatched on save.</li>
<li>ImportUUIDBehavior.IMPORT_UUID_COLLISION_THROW: If an incoming node has the same
identifier as a node already existing in the workspace then an
ItemExistsException is thrown.
Unlike Workspace.importXML(string, string, integer), this method does not
necessarily enforce all node type constraints during deserialization.
Those that would be immediately enforced in a normal write method (Node.addNode,
Node.setProperty etc.) of this implementation cause an immediate
ConstraintViolationException during deserialization. All other constraints are
checked on save, just as they are in normal write operations. However, which node
type constraints are enforced depends upon whether node type information in the</li>
</ul>
<p>imported data is respected, and this is an implementation-specific issue.</p><dl>
<dt>Parameters:</dt>
<dd>parentAbsPath - the absolute path of the node below which the deserialized subgraph is added.</dd>
<dd>in - An URI from which the XML to be deserialized is read.</dd>
<dd>uuidBehavior - a four-value flag that governs how incoming identifiers are handled.</dd>
<dt>Throws:</dt>
<dd>\RuntimeException - if an error during an I/O operation occurs.</dd>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node exists at parentAbsPath and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/itemexistsexception.html">\PHPCR\ItemExistsException</a> - if deserialization would overwrite an existing item and this implementation performs this validation immediately.</dd>
<dd>\PHPCR\ConstraintViolationException - if a node type or other implementation-specific constraint is violated that would be checked on a session write method or if uuidBehavior is set to IMPORT_UUID_COLLISION_REMOVE_EXISTING and an incoming node has the same UUID as the node at parentAbsPath or one of its ancestors.</dd>
<dd><a href="../phpcr/version/versionexception.html">\PHPCR\Version\VersionException</a> - if the node at $parentAbsPath is read-only due to a checked-in node and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/invalidserializeddataexception.html">\PHPCR\InvalidSerializedDataException</a> - if incoming stream is not a valid XML document.</dd>
<dd><a href="../phpcr/lock/lockexception.html">\PHPCR\Lock\LockException</a> - if a lock prevents the addition of the subgraph and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line886" class="location">PHPCR/SessionInterface.php at line 886</a>

<h3 id="isLive()">isLive</h3>
<code class="signature">public  boolean <strong>isLive</strong>()</code>
<div class="details">
<p>Determines if the current session is still valid.</p><p>Returns true if this Session object is usable by the client. Otherwise,
returns false.</p><p>A usable Session is one that is neither logged-out, timed-out nor in
any other way disconnected from the repository.</p><dl>
<dt>Returns:</dt>
<dd>true if this Session is usable, false otherwise.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line247" class="location">PHPCR/SessionInterface.php at line 247</a>

<h3 id="itemExists()">itemExists</h3>
<code class="signature">public  boolean <strong>itemExists</strong>(string absPath)</code>
<div class="details">
<p>Determines if the item identified by a path does exists.</p><p>Returns true if an item exists at absPath and this Session has read
access to it; otherwise returns false.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - An absolute path to an item to be found.</dd>
<dt>Returns:</dt>
<dd>True if the item exists, else false.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if absPath is not a well-formed absolute path.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line872" class="location">PHPCR/SessionInterface.php at line 872</a>

<h3 id="logout()">logout</h3>
<code class="signature">public  void <strong>logout</strong>()</code>
<div class="details">
<p>Releases all resources associated with this Session.</p><p>This method should be called when a Session is no longer needed.</p><dl>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line323" class="location">PHPCR/SessionInterface.php at line 323</a>

<h3 id="move()">move</h3>
<code class="signature">public  void <strong>move</strong>(string srcAbsPath, string destAbsPath)</code>
<div class="details">
<p>Moves the node at srcAbsPath (and its entire subgraph) to the new location
at destAbsPath.</p><p>This is a session-write method and therefor requires a save to dispatch
the change.</p><p>The identifiers of referenceable nodes must not be changed by a move. The
identifiers of non-referenceable nodes may change.</p><p>A ConstraintViolationException is thrown either immediately, on dispatch
or on persist, if performing this operation would violate a node type or
implementation-specific constraint. Implementations may differ on when
this validation is performed.</p><p>As well, a ConstraintViolationException will be thrown on persist if an
attempt is made to separately save either the source or destination node.</p><p>Note that this behaviour differs from that of Workspace.move($srcAbsPath,
$destAbsPath), which is a workspace-write method and therefore
immediately dispatches changes.</p><p>The destAbsPath provided must not have an index on its final element. If
ordering is supported by the node type of the parent node of the new location,
then the newly moved node is appended to the end of the child node list.</p><p>This method cannot be used to move an individual property by itself. It
moves an entire node and its subgraph.</p><dl>
<dt>Parameters:</dt>
<dd>srcAbsPath - the root of the subgraph to be moved.</dd>
<dd>destAbsPath - the location to which the subgraph is to be moved.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/itemexistsexception.html">\PHPCR\ItemExistsException</a> - if a node already exists at destAbsPath and same-name siblings are not allowed.</dd>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if either srcAbsPath or destAbsPath cannot be found and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/version/versionexception.html">\PHPCR\Version\VersionException</a> - if the parent node of destAbsPath or the parent node of srcAbsPath is versionable and checked-in, or or is non-versionable and its nearest versionable ancestor is checked-in and this implementation performs this validation immediately.</dd>
<dd>\PHPCR\ConstraintViolationException - if a node-type or other constraint violation is detected immediately and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/lock/lockexception.html">\PHPCR\Lock\LockException</a> - if the move operation would violate a lock and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if the last element of destAbsPath has an index or if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line261" class="location">PHPCR/SessionInterface.php at line 261</a>

<h3 id="nodeExists()">nodeExists</h3>
<code class="signature">public  boolean <strong>nodeExists</strong>(string absPath)</code>
<div class="details">
<p>Determines if the node identified by the given absolute path does exist.</p><p>Returns true if a node exists at absPath and this Session has read
access to it; otherwise returns false.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - An absolute path to the node to be found.</dd>
<dt>Returns:</dt>
<dd>True if the item does esist</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if absPath is not a well-formed absolute path.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line274" class="location">PHPCR/SessionInterface.php at line 274</a>

<h3 id="propertyExists()">propertyExists</h3>
<code class="signature">public  boolean <strong>propertyExists</strong>(string absPath)</code>
<div class="details">
<p>Determines the existance of a property.</p><p>Returns true if a property exists at absPath and this Session has read
access to it; otherwise returns false.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - An absolute path to the property to be found.</dd>
<dt>Returns:</dt>
<dd>True if the property is available.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if absPath is not a well-formed absolute path.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line426" class="location">PHPCR/SessionInterface.php at line 426</a>

<h3 id="refresh()">refresh</h3>
<code class="signature">public  void <strong>refresh</strong>(boolean keepChanges)</code>
<div class="details">
<p>Reloads the current session.</p><p>If keepChanges is false, this method discards all pending changes currently
recorded in this Session and returns all items to reflect the current saved
state. Outside a transaction this state is simply the current state of
persistent storage. Within a transaction, this state will reflect persistent
storage as modified by changes that have been saved but not yet committed.
If keepChanges is true then pending change are not discarded but items that
do not have changes pending have their state refreshed to reflect the current
saved state, thus revealing changes made by other sessions.</p><p>Implementors note: For performance reasons, implementations should only
mark nodes as dirty and reload them from the backend only if actually
needed.</p><dl>
<dt>Parameters:</dt>
<dd>keepChanges - Switch to override current changes kept in the session.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line357" class="location">PHPCR/SessionInterface.php at line 357</a>

<h3 id="removeItem()">removeItem</h3>
<code class="signature">public  void <strong>removeItem</strong>(string absPath)</code>
<div class="details">
<p>Removes the specified item and its subgraph.</p><p>This is a session-write method and therefore requires a save in order to
dispatch the change.</p><p>If a node with same-name siblings is removed, this decrements by one the
indices of all the siblings with indices greater than that of the removed
node. In other words, a removal compacts the array of same-name siblings
and causes the minimal re-numbering required to maintain the original
order but leave no gaps in the numbering.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - the absolute path of the item to be removed.</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/version/versionexception.html">\PHPCR\Version\VersionException</a> - if the parent node of the item at absPath is read-only due to a checked-in node and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/lock/lockexception.html">\PHPCR\Lock\LockException</a> - if a lock prevents the removal of the specified item and this implementation performs this validation immediately instead.</dd>
<dd>\PHPCR\ConstraintViolationException - if removing the specified item would violate a node type or implementation-specific constraint and this implementation performs this validation immediately.</dd>
<dd><a href="../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no accessible item is found at $absPath property or if the specified item or an item in its subgraph is currently the target of a REFERENCE property located in this workspace but outside the specified item's subgraph and the current Session does not have read access to that REFERENCE property.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>See Also:</dt>
<dd>Item::remove()</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line402" class="location">PHPCR/SessionInterface.php at line 402</a>

<h3 id="save()">save</h3>
<code class="signature">public  void <strong>save</strong>()</code>
<div class="details">
<p>Validates all pending changes currently recorded in this Session.</p><p>If validation of all pending changes succeeds, then this change information
is cleared from the Session.</p><p>If the save occurs outside a transaction, the changes are dispatched and
persisted. Upon being persisted the changes become potentially visible to
other Sessions bound to the same persitent workspace.</p><p>If the save occurs within a transaction, the changes are dispatched but
are not persisted until the transaction is committed.</p><p>If validation fails, then no pending changes are dispatched and they
remain recorded on the Session. There is no best-effort or partial save.</p><dl>
<dt>Throws:</dt>
<dd><a href="../phpcr/accessdeniedexception.html">\PHPCR\AccessDeniedException</a> - if any of the changes to be persisted would violate the access privileges of the this Session. Also thrown if any of the changes to be persisted would cause the removal of a node that is currently referenced by a REFERENCE property that this Session does not have read access to.</dd>
<dd><a href="../phpcr/itemexistsexception.html">\PHPCR\ItemExistsException</a> - if any of the changes to be persisted would be prevented by the presence of an already existing item in the workspace.</dd>
<dd>\PHPCR\ConstraintViolationException - if any of the changes to be persisted would violate a node type or restriction. Additionally, a repository may use this exception to enforce implementation- or configuration-dependent restrictions.</dd>
<dd><a href="../phpcr/invaliditemstateexception.html">\PHPCR\InvalidItemStateException</a> - if any of the changes to be persisted conflicts with a change already persisted through another session and the implementation is such that this conflict can only be detected at save-time and therefore was not detected earlier, at change-time.</dd>
<dd><a href="../phpcr/referentialintegrityexception.html">\PHPCR\ReferentialIntegrityException</a> - if any of the changes to be persisted would cause the removal of a node that is currently referenced by a REFERENCE property that this Session has read access to.</dd>
<dd><a href="../phpcr/version/versionexception.html">\PHPCR\Version\VersionException</a> - if the save would make a result in a change to persistent storage that would violate the read-only status of a checked-in node.</dd>
<dd><a href="../phpcr/lock/lockexception.html">\PHPCR\Lock\LockException</a> - if the save would result in a change to persistent storage that would violate a lock.</dd>
<dd><a href="../phpcr/nodetype/nosuchnodetypeexception.html">\PHPCR\NodeType\NoSuchNodeTypeException</a> - if the save would result in the addition of a node with an unrecognized node type.</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../source/phpcr/sessioninterface.php.html#line826" class="location">PHPCR/SessionInterface.php at line 826</a>

<h3 id="setNamespacePrefix()">setNamespacePrefix</h3>
<code class="signature">public  void <strong>setNamespacePrefix</strong>(string prefix, string uri)</code>
<div class="details">
<p>Sets the name of a namespace prefix.</p><p>Within the scope of this Session, this method maps uri to prefix. The
remapping only affects operations done through this Session. To clear
all remappings, the client must acquire a new Session.
All local mappings already present in the Session that include either
the specified prefix or the specified uri are removed and the new mapping
is added.</p><dl>
<dt>Parameters:</dt>
<dd>prefix - The namespace prefix to be set as identifier.</dd>
<dd>uri - The loaction of the namespace definition (usually a uri).</dd>
<dt>Throws:</dt>
<dd><a href="../phpcr/namespaceexception.html">\PHPCR\NamespaceException</a> - if an attempt is made to map a namespace URI to a prefix beginning with the characters "xml" (in any combination of case) or if an attempt is made to map either the empty prefix or the empty namespace (i.e., if either $prefix or $uri are the empty string).</dd>
<dd><a href="../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../phpcr/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../phpcr/package-tree.html">Tree</a></li>
<li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../todo-list.html">Todo</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../phpcr/sessioninterface.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>