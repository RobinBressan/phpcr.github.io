<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Tue, 27 Mar 2012 06:17:46 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>PHPCR/WorkspaceInterface.php (PHPCR API)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/phpcr/workspaceinterface.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>PHPCR/WorkspaceInterface.php</h1>
<div class="comment" id="overview_description"><p>This file is part of the PHPCR API and was originally ported from the Java
JCR API to PHP by Karsten Dambekalns for the FLOW3 project.</p><p>Copyright 2008-2011 Karsten Dambekalns <karsten@typo3.org></p><p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p><p>http://www.apache.org/licenses/LICENSE-2.0</p><p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div>

<hr>

<a name="line1"></a><pre class="php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
<a name="line2"></a>&nbsp;
<a name="line3"></a><span style="color: #009933; font-style: italic;">/**
<a name="line4"></a> * This file is part of the PHPCR API and was originally ported from the Java
<a name="line5"></a> * JCR API to PHP by Karsten Dambekalns for the FLOW3 project.
<a name="line6"></a> *
<a name="line7"></a> * Copyright 2008-2011 Karsten Dambekalns &lt;karsten@typo3.org&gt;
<a name="line8"></a> *
<a name="line9"></a> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<a name="line10"></a> * you may not use this file except in compliance with the License.
<a name="line11"></a> * You may obtain a copy of the License at
<a name="line12"></a> *
<a name="line13"></a> *     http://www.apache.org/licenses/LICENSE-2.0
<a name="line14"></a> *
<a name="line15"></a> * Unless required by applicable law or agreed to in writing, software
<a name="line16"></a> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<a name="line17"></a> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<a name="line18"></a> * See the License for the specific language governing permissions and
<a name="line19"></a> * limitations under the License.
<a name="line20"></a> *
<a name="line21"></a> * @license http://www.apache.org/licenses/LICENSE-2.0 Apache Software License 2.0
<a name="line22"></a> * @link http://phpcr.github.com/
<a name="line23"></a>*/</span>
<a name="line24"></a>&nbsp;
<a name="line25"></a><span style="color: #000000; font-weight: bold;">namespace</span> PHPCR<span style="color: #339933;">;</span>
<a name="line26"></a>&nbsp;
<a name="line27"></a><span style="color: #009933; font-style: italic;">/**
<a name="line28"></a> * Interface representing a view onto a persistent workspace within a repository.
<a name="line29"></a> *
<a name="line30"></a> * A Workspace object represents a view onto a persistent workspace within a
<a name="line31"></a> * repository. This view is defined by the authorization settings of the Session
<a name="line32"></a> * object associated with the Workspace object. Each Workspace object is
<a name="line33"></a> * associated one-to-one with a Session object. The Workspace object can be
<a name="line34"></a> * acquired by calling $session-&gt;getWorkspace() on the associated Session object.
<a name="line35"></a> *
<a name="line36"></a> * @package phpcr
<a name="line37"></a> * @subpackage interfaces
<a name="line38"></a> * @api
<a name="line39"></a> */</span>
<a name="line40"></a><span style="color: #000000; font-weight: bold;">interface</span> WorkspaceInterface <span style="color: #009900;">&#123;</span>
<a name="line41"></a>&nbsp;
<a name="line42"></a>    <span style="color: #009933; font-style: italic;">/**#@+
<a name="line43"></a>     * @var string
<a name="line44"></a>     */</span>
<a name="line45"></a>&nbsp;
<a name="line46"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line47"></a>     * A constant for the name of the workspace root node.
<a name="line48"></a>     * @api
<a name="line49"></a>     */</span>
<a name="line50"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_WORKSPACE_ROOT <span style="color: #339933;">=</span> <span style="color: #0000ff;">''</span><span style="color: #339933;">;</span>
<a name="line51"></a>&nbsp;
<a name="line52"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line53"></a>     * A constant for the absolute path of the workspace root node.
<a name="line54"></a>     * @api
<a name="line55"></a>     */</span>
<a name="line56"></a>    <span style="color: #000000; font-weight: bold;">const</span> PATH_WORKSPACE_ROOT <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/'</span><span style="color: #339933;">;</span>
<a name="line57"></a>&nbsp;
<a name="line58"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line59"></a>     * A constant for the name of the system node.
<a name="line60"></a>     * @api
<a name="line61"></a>     */</span>
<a name="line62"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_SYSTEM_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}system'</span><span style="color: #339933;">;</span>
<a name="line63"></a>&nbsp;
<a name="line64"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line65"></a>     * A constant for the absolute path of the system node.
<a name="line66"></a>     * This is '/' . NAME_SYSTEM_NODE
<a name="line67"></a>     * @api
<a name="line68"></a>     */</span>
<a name="line69"></a>    <span style="color: #000000; font-weight: bold;">const</span> PATH_SYSTEM_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/{http://www.jcp.org/jcr/1.0}system'</span><span style="color: #339933;">;</span>
<a name="line70"></a>&nbsp;
<a name="line71"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line72"></a>     * A constant for the name of the node type definition storage node.
<a name="line73"></a>     * @api
<a name="line74"></a>     */</span>
<a name="line75"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_NODE_TYPES_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}nodeTypes'</span><span style="color: #339933;">;</span>
<a name="line76"></a>&nbsp;
<a name="line77"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line78"></a>     * A constant for the absolute path of the node type definition storage node.
<a name="line79"></a>     * This is PATH_SYSTEM_NODE . '/' . NAME_NODE_TYPES_NODE
<a name="line80"></a>     * @api
<a name="line81"></a>     */</span>
<a name="line82"></a>    <span style="color: #000000; font-weight: bold;">const</span> PATH_NODE_TYPES_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/{http://www.jcp.org/jcr/1.0}system/{http://www.jcp.org/jcr/1.0}nodeTypes'</span><span style="color: #339933;">;</span>
<a name="line83"></a>&nbsp;
<a name="line84"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line85"></a>     * A constant for the name of the version storage node.
<a name="line86"></a>     * @api
<a name="line87"></a>     */</span>
<a name="line88"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_VERSION_STORAGE_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}versionStorage'</span><span style="color: #339933;">;</span>
<a name="line89"></a>&nbsp;
<a name="line90"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line91"></a>     * A constant for the absolute path of the version storage node.
<a name="line92"></a>     * This is PATH_SYSTEM_NODE . '/' . NAME_VERSION_STORAGE_NODE
<a name="line93"></a>     * @api
<a name="line94"></a>     */</span>
<a name="line95"></a>    <span style="color: #000000; font-weight: bold;">const</span> PATH_VERSION_STORAGE_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/{http://www.jcp.org/jcr/1.0}system/{http://www.jcp.org/jcr/1.0}versionStorage'</span><span style="color: #339933;">;</span>
<a name="line96"></a>&nbsp;
<a name="line97"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line98"></a>     * A constant for the name of the activities node.
<a name="line99"></a>     * @api
<a name="line100"></a>     */</span>
<a name="line101"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_ACTIVITIES_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}activities'</span><span style="color: #339933;">;</span>
<a name="line102"></a>&nbsp;
<a name="line103"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line104"></a>     * A constant for the absolute path of the activities node.
<a name="line105"></a>     * This is PATH_SYSTEM_NODE . '/' . NAME_ACTIVITIES_NODE
<a name="line106"></a>     * @api
<a name="line107"></a>     */</span>
<a name="line108"></a>    <span style="color: #000000; font-weight: bold;">const</span> PATH_ACTIVITIES_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/{http://www.jcp.org/jcr/1.0}system/{http://www.jcp.org/jcr/1.0}activities'</span><span style="color: #339933;">;</span>
<a name="line109"></a>&nbsp;
<a name="line110"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line111"></a>     * A constant for the name of the configurations node.
<a name="line112"></a>     * @api
<a name="line113"></a>     */</span>
<a name="line114"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_CONFIGURATIONS_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}configurations'</span><span style="color: #339933;">;</span>
<a name="line115"></a>&nbsp;
<a name="line116"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line117"></a>     * A constant for the absolute path of the configurations node.
<a name="line118"></a>     * This is PATH_SYSTEM_NODE . '/' . NAME_CONFIGURATIONS_NODE
<a name="line119"></a>     * @api
<a name="line120"></a>     */</span>
<a name="line121"></a>    <span style="color: #000000; font-weight: bold;">const</span> PATH_CONFIGURATIONS_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/{http://www.jcp.org/jcr/1.0}system/{http://www.jcp.org/jcr/1.0}configurations'</span><span style="color: #339933;">;</span>
<a name="line122"></a>&nbsp;
<a name="line123"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line124"></a>     * A constant for the name of the unfiled storage node.
<a name="line125"></a>     * @api
<a name="line126"></a>     */</span>
<a name="line127"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_UNFILED_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}unfiled'</span><span style="color: #339933;">;</span>
<a name="line128"></a>&nbsp;
<a name="line129"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line130"></a>     * A constant for the absolute path of the unfiled storage node.
<a name="line131"></a>     * This is PATH_SYSTEM_NODE . '/' . NAME_UNFILED_NODE
<a name="line132"></a>     * @api
<a name="line133"></a>     */</span>
<a name="line134"></a>    <span style="color: #000000; font-weight: bold;">const</span> PATH_UNFILED_NODE <span style="color: #339933;">=</span> <span style="color: #0000ff;">'/{http://www.jcp.org/jcr/1.0}system/{http://www.jcp.org/jcr/1.0}unfiled'</span><span style="color: #339933;">;</span>
<a name="line135"></a>&nbsp;
<a name="line136"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line137"></a>     * A constant for the name of the jcr:xmltext node produced on importXML().
<a name="line138"></a>     * @api
<a name="line139"></a>     */</span>
<a name="line140"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_JCR_XMLTEXT <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}xmltext'</span><span style="color: #339933;">;</span>
<a name="line141"></a>&nbsp;
<a name="line142"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line143"></a>     * A constant for the name of the jcr:xmlcharacters property produced on importXML().
<a name="line144"></a>     * @api
<a name="line145"></a>     */</span>
<a name="line146"></a>    <span style="color: #000000; font-weight: bold;">const</span> NAME_JCR_XMLCHARACTERS <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}xmlcharacters'</span><span style="color: #339933;">;</span>
<a name="line147"></a>&nbsp;
<a name="line148"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line149"></a>     * A constant for the relative path from the node representing the imported XML element of
<a name="line150"></a>     * the jcr:xmlcharacters property produced on importXML().
<a name="line151"></a>     * This is NAME_JCR_XMLTEXT . '/' . NAME_JCR_XMLCHARACTERS
<a name="line152"></a>     * @api
<a name="line153"></a>     */</span>
<a name="line154"></a>    <span style="color: #000000; font-weight: bold;">const</span> RELPATH_JCR_XMLCHARACTERS <span style="color: #339933;">=</span> <span style="color: #0000ff;">'{http://www.jcp.org/jcr/1.0}xmltext/{http://www.jcp.org/jcr/1.0}xmlcharacters'</span><span style="color: #339933;">;</span>
<a name="line155"></a>&nbsp;
<a name="line156"></a>    <span style="color: #009933; font-style: italic;">/**#@-*/</span>
<a name="line157"></a>&nbsp;
<a name="line158"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line159"></a>     * Returns the Session object through which this Workspace object was acquired.
<a name="line160"></a>     *
<a name="line161"></a>     * @return \PHPCR\SessionInterface a Session object.
<a name="line162"></a>     * @api
<a name="line163"></a>     */</span>
<a name="line164"></a>    <span style="color: #000000; font-weight: bold;">function</span> getSession<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line165"></a>&nbsp;
<a name="line166"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line167"></a>     * Returns the name of the actual persistent workspace represented by this Workspace object.
<a name="line168"></a>     *
<a name="line169"></a>     * This the name used in Repository-&gt;login.
<a name="line170"></a>     *
<a name="line171"></a>     * @return string the name of this workspace.
<a name="line172"></a>     * @api
<a name="line173"></a>     */</span>
<a name="line174"></a>    <span style="color: #000000; font-weight: bold;">function</span> getName<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line175"></a>&nbsp;
<a name="line176"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line177"></a>     * Copies a Node including its children to a new location to the given workspace.
<a name="line178"></a>     *
<a name="line179"></a>     * This method copies the subgraph rooted at, and including, the node at
<a name="line180"></a>     * $srcWorkspace (if given) and $srcAbsPath to the new location in this
<a name="line181"></a>     * Workspace at $destAbsPath.
<a name="line182"></a>     *
<a name="line183"></a>     * This is a workspace-write operation and therefore dispatches changes
<a name="line184"></a>     * immediately and does not require a save.
<a name="line185"></a>     *
<a name="line186"></a>     * When a node N is copied to a path location where no node currently
<a name="line187"></a>     * exists, a new node N' is created at that location.
<a name="line188"></a>     * The subgraph rooted at and including N' (call it S') is created and is
<a name="line189"></a>     * identical to the subgraph rooted at and including N (call it S) with the
<a name="line190"></a>     * following exceptions:
<a name="line191"></a>     * - Every node in S' is given a new and distinct identifier
<a name="line192"></a>     *   - or, if $srcWorkspace is given -
<a name="line193"></a>     *   Every referenceable node in S' is given a new and distinct identifier
<a name="line194"></a>     *   while every non-referenceable node in S' may be given a new and
<a name="line195"></a>     *   distinct identifier.
<a name="line196"></a>     * - The repository may automatically drop any mixin node type T present on
<a name="line197"></a>     *   any node M in S. Dropping a mixin node type in this context means that
<a name="line198"></a>     *   while M remains unchanged, its copy M' will lack the mixin T and any
<a name="line199"></a>     *   child nodes and properties defined by T that are present on M. For
<a name="line200"></a>     *   example, a node M that is mix:versionable may be copied such that the
<a name="line201"></a>     *   resulting node M' will be a copy of N except that M' will not be
<a name="line202"></a>     *   mix:versionable and will not have any of the properties defined by
<a name="line203"></a>     *   mix:versionable. In order for a mixin node type to be dropped it must
<a name="line204"></a>     *   be listed by name in the jcr:mixinTypes property of M. The resulting
<a name="line205"></a>     *   jcr:mixinTypes property of M' will reflect any change.
<a name="line206"></a>     * - If a node M in S is referenceable and its mix:referenceable mixin is
<a name="line207"></a>     *   not dropped on copy, then the resulting jcr:uuid property of M' will
<a name="line208"></a>     *   reflect the new identifier assigned to M'.
<a name="line209"></a>     * - Each REFERENCE or WEAKEREFERENCE property R in S is copied to its new
<a name="line210"></a>     *   location R' in S'. If R references a node M within S then the value of
<a name="line211"></a>     *   R' will be the identifier of M', the new copy of M, thus preserving the
<a name="line212"></a>     *   reference within the subgraph.
<a name="line213"></a>     *
<a name="line214"></a>     * When a node N is copied to a location where a node N' already exists, the
<a name="line215"></a>     * repository may either immediately throw an ItemExistsException or attempt
<a name="line216"></a>     * to update the node N' by selectively replacing part of its subgraph with
<a name="line217"></a>     * a copy of the relevant part of the subgraph of N. If the node types of N
<a name="line218"></a>     * and N' are compatible, the implementation supports update-on-copy for
<a name="line219"></a>     * these node types and no other errors occur, then the copy will succeed.
<a name="line220"></a>     * Otherwise an ItemExistsException is thrown.
<a name="line221"></a>     *
<a name="line222"></a>     * Which node types can be updated on copy and the details of any such
<a name="line223"></a>     * updates are implementation-dependent. For example, some implementations
<a name="line224"></a>     * may support update-on-copy for mix:versionable nodes. In such a case the
<a name="line225"></a>     * versioning-related properties of the target node would remain unchanged
<a name="line226"></a>     * (jcr:uuid, jcr:versionHistory, etc.) while the substantive content part
<a name="line227"></a>     * of the subgraph would be replaced with that of the source node.
<a name="line228"></a>     *
<a name="line229"></a>     * The $destAbsPath provided must not have an index on its final element. If
<a name="line230"></a>     * it does then a RepositoryException is thrown. Strictly speaking, the
<a name="line231"></a>     * $destAbsPath parameter is actually an absolute path to the parent node of
<a name="line232"></a>     * the new location, appended with the new name desired for the copied node.
<a name="line233"></a>     * It does not specify a position within the child node ordering. If ordering
<a name="line234"></a>     * is supported by the node type of the parent node of the new location, then
<a name="line235"></a>     * the new copy of the node is appended to the end of the child node list.
<a name="line236"></a>     *
<a name="line237"></a>     * This method cannot be used to copy an individual property by itself. It
<a name="line238"></a>     * copies an entire node and its subgraph (including, of course, any
<a name="line239"></a>     * properties contained therein).
<a name="line240"></a>     *
<a name="line241"></a>     * @param string $srcAbsPath the path of the node to be copied.
<a name="line242"></a>     * @param string $destAbsPath the location to which the node at srcAbsPath
<a name="line243"></a>     *      is to be copied in this workspace.
<a name="line244"></a>     * @param string $srcWorkspace the name of the workspace from which the
<a name="line245"></a>     *      copy is to be made.
<a name="line246"></a>     *
<a name="line247"></a>     * @return void
<a name="line248"></a>     *
<a name="line249"></a>     * @throws \PHPCR\NoSuchWorkspaceException if srcWorkspace does not exist
<a name="line250"></a>     *      or if the current Session does not have permission to access it.
<a name="line251"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException if the operation
<a name="line252"></a>     *      would violate a node-type or other implementation-specific
<a name="line253"></a>     *      constraint.
<a name="line254"></a>     * @throws \PHPCR\Version\VersionException if the parent node of
<a name="line255"></a>     *      destAbsPath is read-only due to a checked-in node.
<a name="line256"></a>     * @throws \PHPCR\AccessDeniedException if the current session does have
<a name="line257"></a>     *      access srcWorkspace but otherwise does not have sufficient access
<a name="line258"></a>     *      to complete the operation.
<a name="line259"></a>     * @throws \PHPCR\PathNotFoundException if the node at srcAbsPath in
<a name="line260"></a>     *      srcWorkspace or the parent of destAbsPath in this workspace does
<a name="line261"></a>     *      not exist.
<a name="line262"></a>     * @throws \PHPCR\ItemExistsException if a node already exists at
<a name="line263"></a>     *      destAbsPath and either same-name siblings are not allowed or update
<a name="line264"></a>     *      on copy is not supported for the nodes involved.
<a name="line265"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the copy.
<a name="line266"></a>     * @throws \PHPCR\RepositoryException if the last element of destAbsPath
<a name="line267"></a>     *      has an index or if another error occurs.
<a name="line268"></a>     *
<a name="line269"></a>     * @api
<a name="line270"></a>     */</span>
<a name="line271"></a>    <span style="color: #000000; font-weight: bold;">function</span> <a href="http://www.php.net/copy"><span style="color: #990000;">copy</span></a><span style="color: #009900;">&#40;</span><span style="color: #000088;">$srcAbsPath</span><span style="color: #339933;">,</span> <span style="color: #000088;">$destAbsPath</span><span style="color: #339933;">,</span> <span style="color: #000088;">$srcWorkspace</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line272"></a>&nbsp;
<a name="line273"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line274"></a>     * Clones the subgraph at the node srcAbsPath in srcWorkspace to the new
<a name="line275"></a>     * location at destAbsPath in the current workspace.
<a name="line276"></a>     *
<a name="line277"></a>     * Unlike the signature of copy that copies between workspaces, this method
<a name="line278"></a>     * does not assign new identifiers to the newly cloned nodes but preserves
<a name="line279"></a>     * the identifiers of their respective source nodes. This applies to both
<a name="line280"></a>     * referenceable and non-referenceable nodes.
<a name="line281"></a>     *
<a name="line282"></a>     * In some implementations there may be cases where preservation of a
<a name="line283"></a>     * non-referenceable identifier is not possible, due to how non-referenceable
<a name="line284"></a>     * identifiers are constructed in that implementation. In such a case this
<a name="line285"></a>     * method will throw a RepositoryException.
<a name="line286"></a>     *
<a name="line287"></a>     * If removeExisting is true and an existing node in this workspace (the
<a name="line288"></a>     * destination workspace) has the same identifier as a node being cloned
<a name="line289"></a>     * from srcWorkspace, then the incoming node takes precedence, and the
<a name="line290"></a>     * existing node (and its subgraph) is removed. If removeExisting is false
<a name="line291"></a>     * then an identifier collision causes this method to throw an
<a name="line292"></a>     * ItemExistsException and no changes are made.
<a name="line293"></a>     *
<a name="line294"></a>     * If successful, the change is persisted immediately, there is no need
<a name="line295"></a>     * to call save.
<a name="line296"></a>     *
<a name="line297"></a>     * The destAbsPath provided must not have an index on its final element.
<a name="line298"></a>     * If it does then a RepositoryException is thrown.
<a name="line299"></a>     * If ordering is supported by the node type of the parent node of the new
<a name="line300"></a>     * location, then the new clone of the node is appended to the end of the
<a name="line301"></a>     * child node list.
<a name="line302"></a>     *
<a name="line303"></a>     * This method cannot be used to clone just an individual property; it
<a name="line304"></a>     * clones a node and its subgraph.
<a name="line305"></a>     *
<a name="line306"></a>     * PHP Notice: The JCR method is called clone, but that is a reserved
<a name="line307"></a>     * keyword in PHP, thus we named the method cloneFrom.
<a name="line308"></a>     *
<a name="line309"></a>     * @param string $srcWorkspace The name of the workspace from which the
<a name="line310"></a>     *      node is to be copied.
<a name="line311"></a>     * @param string $srcAbsPath The path of the node to be copied in
<a name="line312"></a>     *      srcWorkspace.
<a name="line313"></a>     * @param string $destAbsPath The location to which the node at srcAbsPath
<a name="line314"></a>     *      is to be copied in this workspace.
<a name="line315"></a>     * @param boolean $removeExisting if false then this method throws an
<a name="line316"></a>     *      ItemExistsException on identifier conflict with an incoming node.
<a name="line317"></a>     *      If true then a identifier conflict is resolved by removing the
<a name="line318"></a>     *      existing node from its location in this workspace and cloning
<a name="line319"></a>     *      (copying in) the one from srcWorkspace.
<a name="line320"></a>     *
<a name="line321"></a>     * @return void
<a name="line322"></a>     *
<a name="line323"></a>     * @throws \PHPCR\NoSuchWorkspaceException if destWorkspace does not exist.
<a name="line324"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException if the operation
<a name="line325"></a>     *      would violate a node-type or other implementation-specific
<a name="line326"></a>     *      constraint.
<a name="line327"></a>     * @throws \PHPCR\Version\VersionException if the parent node of
<a name="line328"></a>     *      destAbsPath is read-only due to a checked-in node. This exception
<a name="line329"></a>     *      will also be thrown if removeExisting is true, and an identifier
<a name="line330"></a>     *      conflict occurs that would require the moving and/or altering of a
<a name="line331"></a>     *      node that is checked-in.
<a name="line332"></a>     * @throws \PHPCR\AccessDeniedException if the current session does not
<a name="line333"></a>     *      have sufficient access to complete the operation.
<a name="line334"></a>     * @throws \PHPCR\PathNotFoundException if the node at srcAbsPath in
<a name="line335"></a>     *      srcWorkspace or the parent of destAbsPath in this workspace does
<a name="line336"></a>     *      not exist.
<a name="line337"></a>     * @throws \PHPCR\ItemExistsException if a node already exists at
<a name="line338"></a>     *      destAbsPath and same-name siblings are not allowed or if
<a name="line339"></a>     *      removeExisting is false and an identifier conflict occurs.
<a name="line340"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the clone.
<a name="line341"></a>     * @throws \PHPCR\RepositoryException if the last element of destAbsPath
<a name="line342"></a>     *      has an index or if another error occurs.
<a name="line343"></a>     *
<a name="line344"></a>     * @api
<a name="line345"></a>     */</span>
<a name="line346"></a>    <span style="color: #000000; font-weight: bold;">function</span> cloneFrom<span style="color: #009900;">&#40;</span><span style="color: #000088;">$srcWorkspace</span><span style="color: #339933;">,</span> <span style="color: #000088;">$srcAbsPath</span><span style="color: #339933;">,</span> <span style="color: #000088;">$destAbsPath</span><span style="color: #339933;">,</span> <span style="color: #000088;">$removeExisting</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line347"></a>&nbsp;
<a name="line348"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line349"></a>     * Moves the node at srcAbsPath (and its entire subgraph) to the new
<a name="line350"></a>     * location at destAbsPath.
<a name="line351"></a>     *
<a name="line352"></a>     * If successful, the change is persisted immediately, there is no need to
<a name="line353"></a>     * call save. Note that this is in contrast to
<a name="line354"></a>     * Session-&gt;move($srcAbsPath, $destAbsPath) which operates within the
<a name="line355"></a>     * transient space and hence requires a save.
<a name="line356"></a>     *
<a name="line357"></a>     * The identifiers of referenceable nodes must not be changed by a move. The
<a name="line358"></a>     * identifiers of non-referenceable nodes may change.
<a name="line359"></a>     *
<a name="line360"></a>     * The destAbsPath provided must not have an index on its final element. If
<a name="line361"></a>     * it does then a RepositoryException is thrown. Strictly speaking, the
<a name="line362"></a>     * destAbsPath parameter is actually an absolute path to the parent node of
<a name="line363"></a>     * the new location, appended with the new name desired for the moved node.
<a name="line364"></a>     * It does not specify a position within the child node ordering. If ordering
<a name="line365"></a>     * is supported by the node type of the parent node of the new location, then
<a name="line366"></a>     * the newly moved node is appended to the end of the child node list.
<a name="line367"></a>     *
<a name="line368"></a>     * This method cannot be used to move just an individual property by itself.
<a name="line369"></a>     * It moves an entire node and its subgraph (including, of course, any
<a name="line370"></a>     * properties contained therein).
<a name="line371"></a>     *
<a name="line372"></a>     * The identifiers of referenceable nodes must not be changed by a move. The
<a name="line373"></a>     * identifiers of non-referenceable nodes may change.
<a name="line374"></a>     *
<a name="line375"></a>     * @param string $srcAbsPath the path of the node to be moved.
<a name="line376"></a>     * @param string $destAbsPath the location to which the node at srcAbsPath
<a name="line377"></a>     *      is to be moved.
<a name="line378"></a>     *
<a name="line379"></a>     * @return void
<a name="line380"></a>     *
<a name="line381"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException if the operation
<a name="line382"></a>     *      would violate a node-type or other implementation-specific
<a name="line383"></a>     *      constraint.
<a name="line384"></a>     * @throws \PHPCR\Version\VersionException if the parent node of
<a name="line385"></a>     *      destAbsPath is read-only due to a checked-in node.
<a name="line386"></a>     * @throws \PHPCR\AccessDeniedException if the current session (i.e. the
<a name="line387"></a>     *      session that was used to acquire this Workspace object) does not
<a name="line388"></a>     *      have sufficient access rights to complete the operation.
<a name="line389"></a>     * @throws \PHPCR\PathNotFoundException if the node at srcAbsPath or the
<a name="line390"></a>     *      parent of destAbsPath does not exist.
<a name="line391"></a>     * @throws \PHPCR\ItemExistsException if a node already exists at
<a name="line392"></a>     *      destAbsPath and same-name siblings are not allowed.
<a name="line393"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the move.
<a name="line394"></a>     * @throws \PHPCR\RepositoryException if the last element of destAbsPath
<a name="line395"></a>     *      has an index or if another error occurs.
<a name="line396"></a>     *
<a name="line397"></a>     * @api
<a name="line398"></a>     */</span>
<a name="line399"></a>    <span style="color: #000000; font-weight: bold;">function</span> move<span style="color: #009900;">&#40;</span><span style="color: #000088;">$srcAbsPath</span><span style="color: #339933;">,</span> <span style="color: #000088;">$destAbsPath</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line400"></a>&nbsp;
<a name="line401"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line402"></a>     * Returns the LockManager object, through which locking methods are accessed.
<a name="line403"></a>     *
<a name="line404"></a>     * @return \PHPCR\Lock\LockManagerInterface
<a name="line405"></a>     *
<a name="line406"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException if the
<a name="line407"></a>     *      implementation does not support locking.
<a name="line408"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line409"></a>     *
<a name="line410"></a>     * @api
<a name="line411"></a>     */</span>
<a name="line412"></a>    <span style="color: #000000; font-weight: bold;">function</span> getLockManager<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line413"></a>&nbsp;
<a name="line414"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line415"></a>     * Returns the QueryManager object, through search methods are accessed.
<a name="line416"></a>     *
<a name="line417"></a>     * @return \PHPCR\Query\QueryManagerInterface the QueryManager object.
<a name="line418"></a>     *
<a name="line419"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line420"></a>     *
<a name="line421"></a>     * @api
<a name="line422"></a>     */</span>
<a name="line423"></a>    <span style="color: #000000; font-weight: bold;">function</span> getQueryManager<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line424"></a>&nbsp;
<a name="line425"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line426"></a>     * Returns the UserTransaction object associated with this session
<a name="line427"></a>     *
<a name="line428"></a>     * @return \PHPCR\Transaction\UserTransactionInterface a UserTransaction
<a name="line429"></a>     *      object.
<a name="line430"></a>     *
<a name="line431"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException if the
<a name="line432"></a>     *      implementation does not support observation.
<a name="line433"></a>     *
<a name="line434"></a>     * @api
<a name="line435"></a>     */</span>
<a name="line436"></a>    <span style="color: #000000; font-weight: bold;">function</span> getTransactionManager<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line437"></a>&nbsp;
<a name="line438"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line439"></a>     * Returns the NamespaceRegistry object, which is used to access the
<a name="line440"></a>     * mapping between prefixes and namespaces.
<a name="line441"></a>     *
<a name="line442"></a>     * In level 2 repositories the NamespaceRegistry can also be used to change
<a name="line443"></a>     * the namespace mappings.
<a name="line444"></a>     *
<a name="line445"></a>     * @return \PHPCR\NamespaceRegistryInterface the NamespaceRegistry.
<a name="line446"></a>     *
<a name="line447"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line448"></a>     *
<a name="line449"></a>     * @api
<a name="line450"></a>     */</span>
<a name="line451"></a>    <span style="color: #000000; font-weight: bold;">function</span> getNamespaceRegistry<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line452"></a>&nbsp;
<a name="line453"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line454"></a>     * Returns the NodeTypeManager through which node type information can be
<a name="line455"></a>     * queried.
<a name="line456"></a>     *
<a name="line457"></a>     * There is one node type registry per repository, therefore the NodeTypeManager
<a name="line458"></a>     * is not workspace-specific; it provides introspection methods for the global,
<a name="line459"></a>     * repository-wide set of available node types. In repositories that support it,
<a name="line460"></a>     * the NodeTypeManager can also be used to register new node types.
<a name="line461"></a>     *
<a name="line462"></a>     * @return \PHPCR\NodeType\NodeTypeManagerInterface a NodeTypeManager object.
<a name="line463"></a>     *
<a name="line464"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line465"></a>     *
<a name="line466"></a>     * @api
<a name="line467"></a>     */</span>
<a name="line468"></a>    <span style="color: #000000; font-weight: bold;">function</span> getNodeTypeManager<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line469"></a>&nbsp;
<a name="line470"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line471"></a>     * Returns the ObservationManager object.
<a name="line472"></a>     *
<a name="line473"></a>     * @return \PHPCR\Observation\ObservationManagerInterface an
<a name="line474"></a>     *      ObservationManager object.
<a name="line475"></a>     *
<a name="line476"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException if the
<a name="line477"></a>     *      implementation does not support observation.
<a name="line478"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line479"></a>     *
<a name="line480"></a>     * @api
<a name="line481"></a>     */</span>
<a name="line482"></a>    <span style="color: #000000; font-weight: bold;">function</span> getObservationManager<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line483"></a>&nbsp;
<a name="line484"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line485"></a>     * Returns the VersionManager object.
<a name="line486"></a>     *
<a name="line487"></a>     * @return \PHPCR\Version\VersionManagerInterface a VersionManager object.
<a name="line488"></a>     *
<a name="line489"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException if the
<a name="line490"></a>     *      implementation does not support versioning.
<a name="line491"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line492"></a>     *
<a name="line493"></a>     * @api
<a name="line494"></a>     */</span>
<a name="line495"></a>    <span style="color: #000000; font-weight: bold;">function</span> getVersionManager<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line496"></a>&nbsp;
<a name="line497"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line498"></a>     * Gets a set of workspace accessible to the current user.
<a name="line499"></a>     *
<a name="line500"></a>     * Returns a string array containing the names of all workspaces in this
<a name="line501"></a>     * repository that are accessible to this user, given the Credentials that
<a name="line502"></a>     * were used to get the Session to which this Workspace is tied.
<a name="line503"></a>     * In order to access one of the listed workspaces, the user performs
<a name="line504"></a>     * another RepositoryInterface::login(), specifying the name of the desired
<a name="line505"></a>     * workspace, and receives a new Session object.
<a name="line506"></a>     *
<a name="line507"></a>     * @return array string array of names of accessible workspaces.
<a name="line508"></a>     *
<a name="line509"></a>     * @throws \PHPCR\RepositoryException if an error occurs
<a name="line510"></a>     *
<a name="line511"></a>     * @api
<a name="line512"></a>     */</span>
<a name="line513"></a>    <span style="color: #000000; font-weight: bold;">function</span> getAccessibleWorkspaceNames<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line514"></a>&nbsp;
<a name="line515"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line516"></a>     * Returns an \PHPCR\ContentHandlerInterface which can be used to push SAX events into the repository.
<a name="line517"></a>     *
<a name="line518"></a>     * If the incoming XML stream (in the form of SAX events)
<a name="line519"></a>     * does not appear to be a JCR system view XML document then it is interpreted
<a name="line520"></a>     * as a document view XML document.
<a name="line521"></a>     * The incoming XML is deserialized into a subgraph of items immediately below
<a name="line522"></a>     * the node at parentAbsPath.
<a name="line523"></a>     *
<a name="line524"></a>     * This method simply returns the ContentHandler without altering the state of
<a name="line525"></a>     * the repository; the actual deserialization is done through the methods of
<a name="line526"></a>     * the ContentHandler. Invalid XML data will cause the ContentHandler to throw
<a name="line527"></a>     * a SAXException.
<a name="line528"></a>     *
<a name="line529"></a>     * As SAX events are fed into the ContentHandler, changes are made directly at
<a name="line530"></a>     * the workspace level, without going through the Session. As a result, there
<a name="line531"></a>     * is not need to call save. The advantage of this direct-to-workspace method
<a name="line532"></a>     * is that a large import will not result in a large cache of pending nodes in
<a name="line533"></a>     * the Session. The disadvantage is that structures that violate node type
<a name="line534"></a>     * constraints cannot be imported, fixed and then saved. Instead, a constraint
<a name="line535"></a>     * violation will cause the ContentHandler to throw a SAXException.
<a name="line536"></a>     * See SessionInterface::getImportContentHandler for a version of this method
<a name="line537"></a>     * that does go through the Session.
<a name="line538"></a>     *
<a name="line539"></a>     * The flag uuidBehavior governs how the identifiers of incoming (deserialized)
<a name="line540"></a>     * nodes are handled. There are four options:
<a name="line541"></a>     *
<a name="line542"></a>     * - ImportUUIDBehavior::IMPORT_UUID_CREATE_NEW: Incoming nodes are assigned newly
<a name="line543"></a>     *   created identifiers upon addition to the workspace. As a result identifier
<a name="line544"></a>     *  collisions never occur.
<a name="line545"></a>     * - ImportUUIDBehavior::IMPORT_UUID_COLLISION_REMOVE_EXISTING: If an incoming node
<a name="line546"></a>     *   has the same identifier as a node already existing in the workspace, then the
<a name="line547"></a>     *   already existing node (and its subgraph) is removed from wherever it may be in
<a name="line548"></a>     *   the workspace before the incoming node is added. Note that this can result in
<a name="line549"></a>     *   nodes &quot;disappearing&quot; from locations in the workspace that are remote from the
<a name="line550"></a>     *   location to which the incoming subgraph is being written.
<a name="line551"></a>     * - ImportUUIDBehavior::IMPORT_UUID_COLLISION_REPLACE_EXISTING: If an incoming node
<a name="line552"></a>     *   has the same identifier as a node already existing in the workspace then the
<a name="line553"></a>     *   already existing node is replaced by the incoming node in the same position as
<a name="line554"></a>     *   the existing node. Note that this may result in the incoming subgraph being
<a name="line555"></a>     *   disaggregated and &quot;spread around&quot; to different locations in the workspace. In
<a name="line556"></a>     *   the most extreme case this behavior may result in no node at all being added as
<a name="line557"></a>     *   child of parentAbsPath. This will occur if the topmost element of the incoming
<a name="line558"></a>     *   XML has the same identifier as an existing node elsewhere in the workspace.
<a name="line559"></a>     * - ImportUUIDBehavior::IMPORT_UUID_COLLISION_THROW: If an incoming node has the same
<a name="line560"></a>     *   identifier as a node already existing in the workspace then a SAXException is
<a name="line561"></a>     *   thrown by the returned ContentHandler during deserialization.
<a name="line562"></a>     *
<a name="line563"></a>     * A SAXException will be thrown by the returned ContentHandler during deserialization
<a name="line564"></a>     * if the top-most element of the incoming XML would deserialize to a node with the same
<a name="line565"></a>     * name as an existing child of parentAbsPath and that child does not allow same-name
<a name="line566"></a>     * siblings.
<a name="line567"></a>     * A SAXException will also be thrown by the returned ContentHandler during
<a name="line568"></a>     * deserialization if uuidBehavior is set to IMPORT_UUID_COLLISION_REMOVE_EXISTING
<a name="line569"></a>     * and an incoming node has the same identifier as the node at parentAbsPath or
<a name="line570"></a>     * one of its ancestors.
<a name="line571"></a>     *
<a name="line572"></a>     * @param string $parentAbsPath the absolute path of a node under which (as child) the imported subgraph will be built.
<a name="line573"></a>     * @param integer $uuidBehavior a four-value flag that governs how incoming identifiers are handled.
<a name="line574"></a>     * @return \PHPCR\ContentHandlerInterface whose methods may be called to feed SAX events into the deserializer.
<a name="line575"></a>     *
<a name="line576"></a>     * @throws \PHPCR\PathNotFoundException if no node exists at $parentAbsPath.
<a name="line577"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException if the new subgraph cannot be added to the node at $parentAbsPath due
<a name="line578"></a>     *                                             to node-type or other implementation-specific constraints, and this
<a name="line579"></a>     *                                             can be determined before the first SAX event is sent. Unlike
<a name="line580"></a>     *                                             Session#getImportContentHandler, this method also enforces node type
<a name="line581"></a>     *                                             constraints by throwing SAXExceptions during deserialization.
<a name="line582"></a>     *                                             However, which node type constraints are enforced depends upon
<a name="line583"></a>     *                                             whether node type information in the imported data is respected,
<a name="line584"></a>     *                                             and this is an implementation-specific issue.
<a name="line585"></a>     * @throws \PHPCR\Version\VersionException if the node at $parentAbsPath is read-only due to a checked-in node.
<a name="line586"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the addition of the subgraph.
<a name="line587"></a>     * @throws \PHPCR\AccessDeniedException if the session associated with this Workspace object does not have
<a name="line588"></a>     *                                      sufficient access to perform the import.
<a name="line589"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line590"></a>     *
<a name="line591"></a>     * @api
<a name="line592"></a>     */</span>
<a name="line593"></a>    <span style="color: #666666; font-style: italic;">//Dropped for now. If you have an excellent and generic idea for this, suggestions are welcome</span>
<a name="line594"></a>    <span style="color: #666666; font-style: italic;">//function getImportContentHandler($parentAbsPath, $uuidBehavior);</span>
<a name="line595"></a>&nbsp;
<a name="line596"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line597"></a>     * Deserializes an XML document and adds the resulting item subgraph as a
<a name="line598"></a>     * child of the node at $parentAbsPath.
<a name="line599"></a>     *
<a name="line600"></a>     * If the incoming XML does not appear to be a JCR system view XML document
<a name="line601"></a>     * then it is interpreted as a document view XML document.
<a name="line602"></a>     *
<a name="line603"></a>     * Changes are made directly at the workspace level, without going through
<a name="line604"></a>     * the Session. As a result, there is not need to call save. The advantage
<a name="line605"></a>     * of this direct-to-workspace method is that a large import will not result
<a name="line606"></a>     * in a large cache of pending nodes in the Session. The disadvantage is
<a name="line607"></a>     * that invalid data cannot be imported, fixed and then saved. Instead,
<a name="line608"></a>     * invalid data will cause this method to throw an
<a name="line609"></a>     * InvalidSerializedDataException.
<a name="line610"></a>     * See SessionInterface::importXML() for a version of this method that does
<a name="line611"></a>     * go through the Session.
<a name="line612"></a>     *
<a name="line613"></a>     * The flag $uuidBehavior governs how the identifiers of incoming (deserialized)
<a name="line614"></a>     * nodes are handled. There are four options:
<a name="line615"></a>     *
<a name="line616"></a>     * - ImportUUIDBehavior::IMPORT_UUID_CREATE_NEW: Incoming nodes are assigned newly
<a name="line617"></a>     *   created identifiers upon addition to the workspace. As a result identifier
<a name="line618"></a>     *   collisions never occur.
<a name="line619"></a>     * - ImportUUIDBehavior::IMPORT_UUID_COLLISION_REMOVE_EXISTING: If an incoming node
<a name="line620"></a>     *   has the same identifier as a node already existing in the workspace then the
<a name="line621"></a>     *   already existing node (and its subgraph) is removed from wherever it may be
<a name="line622"></a>     *   in the workspace before the incoming node is added. Note that this can result
<a name="line623"></a>     *   in nodes &quot;disappearing&quot; from locations in the workspace that are remote from
<a name="line624"></a>     *   the location to which the incoming subgraph is being written. If an incoming
<a name="line625"></a>     *   node has the same identifier as the existing root node of this workspace then
<a name="line626"></a>     * - ImportUUIDBehavior::IMPORT_UUID_COLLISION_REPLACE_EXISTING: If an incoming node
<a name="line627"></a>     *   has the same identifier as a node already existing in the workspace then the
<a name="line628"></a>     *   already existing node is replaced by the incoming node in the same position as
<a name="line629"></a>     *   the existing node. Note that this may result in the incoming subgraph being
<a name="line630"></a>     *   disaggregated and &quot;spread around&quot; to different locations in the workspace. In
<a name="line631"></a>     *   the most extreme edge case this behavior may result in no node at all being
<a name="line632"></a>     *   added as child of parentAbsPath. This will occur if the topmost element of the
<a name="line633"></a>     *   incoming XML has the same identifier as an existing node elsewhere in the
<a name="line634"></a>     *   workspace.
<a name="line635"></a>     * - ImportUUIDBehavior::IMPORT_UUID_COLLISION_THROW: If an incoming node has the
<a name="line636"></a>     *   same identifier as a node already existing in the workspace then an
<a name="line637"></a>     *   ItemExistsException is thrown.
<a name="line638"></a>     *
<a name="line639"></a>     * @param string $parentAbsPath the absolute path of the node below which
<a name="line640"></a>     *      the deserialized subgraph is added.
<a name="line641"></a>     * @param string $uri Source location for the XML to be read, Can be
<a name="line642"></a>     *      anything that works with fopen.
<a name="line643"></a>     * @param integer $uuidBehavior a four-value flag that governs how incoming
<a name="line644"></a>     *      identifiers are handled.
<a name="line645"></a>     *
<a name="line646"></a>     * @return void
<a name="line647"></a>     *
<a name="line648"></a>     * @throws \RuntimeException if an error during an I/O operation occurs.
<a name="line649"></a>     * @throws \PHPCR\PathNotFoundException if no node exists at parentAbsPath.
<a name="line650"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException if node-type or
<a name="line651"></a>     *      other implementation-specific constraints prevent the addition of
<a name="line652"></a>     *      the subgraph or if uuidBehavior is set to
<a name="line653"></a>     *      IMPORT_UUID_COLLISION_REMOVE_EXISTING and an incoming node has the
<a name="line654"></a>     *      same identifier as the node at parentAbsPath or one of its
<a name="line655"></a>     *      ancestors.
<a name="line656"></a>     * @throws \PHPCR\Version\VersionException if the node at parentAbsPath is
<a name="line657"></a>     *      read-only due to a checked-in node.
<a name="line658"></a>     * @throws \PHPCR\InvalidSerializedDataException if incoming stream is not
<a name="line659"></a>     *      a valid XML document.
<a name="line660"></a>     * @throws \PHPCR\ItemExistsException if the top-most element of the
<a name="line661"></a>     *      incoming XML would deserialize to a node with the same name as an
<a name="line662"></a>     *      existing child of parentAbsPath and that child does not allow
<a name="line663"></a>     *      same-name siblings, or if a uuidBehavior is set to
<a name="line664"></a>     *      IMPORT_UUID_COLLISION_THROW and an identifier collision occurs.
<a name="line665"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the addition of the
<a name="line666"></a>     *      subgraph.
<a name="line667"></a>     * @throws \PHPCR\AccessDeniedException if the session associated with this
<a name="line668"></a>     *      Workspace object does not have sufficient access to perform the
<a name="line669"></a>     *      import.
<a name="line670"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line671"></a>     *
<a name="line672"></a>     * @api
<a name="line673"></a>     */</span>
<a name="line674"></a>    <span style="color: #000000; font-weight: bold;">function</span> importXML<span style="color: #009900;">&#40;</span><span style="color: #000088;">$parentAbsPath</span><span style="color: #339933;">,</span> <span style="color: #000088;">$uri</span><span style="color: #339933;">,</span> <span style="color: #000088;">$uuidBehavior</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line675"></a>&nbsp;
<a name="line676"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line677"></a>     * Creates a new Workspace with the specified name. The new workspace is
<a name="line678"></a>     * empty, meaning it contains only root node.
<a name="line679"></a>     *
<a name="line680"></a>     * If srcWorkspace is given:&lt;br/&gt;
<a name="line681"></a>     * Creates a new Workspace with the specified name initialized with a
<a name="line682"></a>     * clone of the content of the workspace srcWorkspace. Semantically,
<a name="line683"></a>     * this method is equivalent to creating a new workspace and manually
<a name="line684"></a>     * cloning srcWorkspace to it; however, this method may assist some
<a name="line685"></a>     * implementations in optimizing subsequent NodeInterface::update() and
<a name="line686"></a>     * NodeInterface::merge() calls between the new workspace and its source.
<a name="line687"></a>     *
<a name="line688"></a>     * The new workspace can be accessed through a login specifying its name.
<a name="line689"></a>     *
<a name="line690"></a>     * @param string $name A String, the name of the new workspace.
<a name="line691"></a>     * @param string $srcWorkspace The name of the workspace from which the new
<a name="line692"></a>     *      workspace is to be cloned.
<a name="line693"></a>     *
<a name="line694"></a>     * @return void
<a name="line695"></a>     *
<a name="line696"></a>     * @throws \PHPCR\AccessDeniedException if the session through which this
<a name="line697"></a>     *      Workspace object was acquired does not have sufficient access to
<a name="line698"></a>     *      create the new workspace.
<a name="line699"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException if the repository
<a name="line700"></a>     *      does not support the creation of workspaces.
<a name="line701"></a>     * @throws \PHPCR\NoSuchWorkspaceException if $srcWorkspace does not exist.
<a name="line702"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line703"></a>     *
<a name="line704"></a>     * @api
<a name="line705"></a>     */</span>
<a name="line706"></a>    <span style="color: #000000; font-weight: bold;">function</span> createWorkspace<span style="color: #009900;">&#40;</span><span style="color: #000088;">$name</span><span style="color: #339933;">,</span> <span style="color: #000088;">$srcWorkspace</span> <span style="color: #339933;">=</span> <span style="color: #009900; font-weight: bold;">null</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line707"></a>&nbsp;
<a name="line708"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line709"></a>     * Deletes the workspace with the specified name from the repository,
<a name="line710"></a>     * deleting all content within it.
<a name="line711"></a>     *
<a name="line712"></a>     * @param string $name A String, the name of the workspace to be deleted.
<a name="line713"></a>     *
<a name="line714"></a>     * @return void
<a name="line715"></a>     *
<a name="line716"></a>     * @throws \PHPCR\AccessDeniedException if the session through which this
<a name="line717"></a>     *      Workspace object was acquired does not have sufficient access to
<a name="line718"></a>     *      remove the workspace.
<a name="line719"></a>     * @throws \PHPCR\UnsupportedRepositoryOperationException if the repository
<a name="line720"></a>     *      does not support the removal of workspaces.
<a name="line721"></a>     * @throws \PHPCR\NoSuchWorkspaceException if $name does not exist.
<a name="line722"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line723"></a>     *
<a name="line724"></a>     * @api
<a name="line725"></a>     */</span>
<a name="line726"></a>    <span style="color: #000000; font-weight: bold;">function</span> deleteWorkspace<span style="color: #009900;">&#40;</span><span style="color: #000088;">$name</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line727"></a><span style="color: #009900;">&#125;</span>
<a name="line728"></a>&nbsp;</pre>
<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/phpcr/workspaceinterface.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>