<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Tue, 27 Mar 2012 06:17:42 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>PHPCR/ItemInterface.php (PHPCR API)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/phpcr/iteminterface.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>PHPCR/ItemInterface.php</h1>
<div class="comment" id="overview_description"><p>This file is part of the PHPCR API and was originally ported from the Java
JCR API to PHP by Karsten Dambekalns for the FLOW3 project.</p><p>Copyright 2008-2011 Karsten Dambekalns <karsten@typo3.org></p><p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p><p>http://www.apache.org/licenses/LICENSE-2.0</p><p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div>

<hr>

<a name="line1"></a><pre class="php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
<a name="line2"></a>&nbsp;
<a name="line3"></a><span style="color: #009933; font-style: italic;">/**
<a name="line4"></a> * This file is part of the PHPCR API and was originally ported from the Java
<a name="line5"></a> * JCR API to PHP by Karsten Dambekalns for the FLOW3 project.
<a name="line6"></a> *
<a name="line7"></a> * Copyright 2008-2011 Karsten Dambekalns &lt;karsten@typo3.org&gt;
<a name="line8"></a> *
<a name="line9"></a> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
<a name="line10"></a> * you may not use this file except in compliance with the License.
<a name="line11"></a> * You may obtain a copy of the License at
<a name="line12"></a> *
<a name="line13"></a> *     http://www.apache.org/licenses/LICENSE-2.0
<a name="line14"></a> *
<a name="line15"></a> * Unless required by applicable law or agreed to in writing, software
<a name="line16"></a> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<a name="line17"></a> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<a name="line18"></a> * See the License for the specific language governing permissions and
<a name="line19"></a> * limitations under the License.
<a name="line20"></a> *
<a name="line21"></a> * @license http://www.apache.org/licenses/LICENSE-2.0 Apache Software License 2.0
<a name="line22"></a> * @link http://phpcr.github.com/
<a name="line23"></a>*/</span>
<a name="line24"></a>&nbsp;
<a name="line25"></a><span style="color: #000000; font-weight: bold;">namespace</span> PHPCR<span style="color: #339933;">;</span>
<a name="line26"></a>&nbsp;
<a name="line27"></a><span style="color: #009933; font-style: italic;">/**
<a name="line28"></a> * The Item is the base interface of Node and Property.
<a name="line29"></a> *
<a name="line30"></a> * @package phpcr
<a name="line31"></a> * @subpackage interfaces
<a name="line32"></a> * @api
<a name="line33"></a> */</span>
<a name="line34"></a><span style="color: #000000; font-weight: bold;">interface</span> ItemInterface
<a name="line35"></a><span style="color: #009900;">&#123;</span>
<a name="line36"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line37"></a>     * Returns the normalized absolute path to this item.
<a name="line38"></a>     *
<a name="line39"></a>     * @return string the normalized absolute path of this Item.
<a name="line40"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line41"></a>     * @api
<a name="line42"></a>     */</span>
<a name="line43"></a>    <span style="color: #000000; font-weight: bold;">function</span> getPath<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line44"></a>&nbsp;
<a name="line45"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line46"></a>     * Returns the name of this Item in qualified form.
<a name="line47"></a>     *
<a name="line48"></a>     * If this Item is the root node of the workspace, an empty string is returned.
<a name="line49"></a>     *
<a name="line50"></a>     * @return string the name of this Item in qualified form or an empty
<a name="line51"></a>     *      string if this Item is the root node of a workspace.
<a name="line52"></a>     *
<a name="line53"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line54"></a>     *
<a name="line55"></a>     * @api
<a name="line56"></a>     */</span>
<a name="line57"></a>    <span style="color: #000000; font-weight: bold;">function</span> getName<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line58"></a>&nbsp;
<a name="line59"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line60"></a>     * Returns the ancestor of this Item at the specified depth.
<a name="line61"></a>     *
<a name="line62"></a>     * An ancestor of depth x is the Item that is x levels down along the path
<a name="line63"></a>     * from the root node to this Item.
<a name="line64"></a>     *
<a name="line65"></a>     * - depth = 0 returns the root node of a workspace.
<a name="line66"></a>     * - depth = 1 returns the child of the root node along the path to this
<a name="line67"></a>     *      Item.
<a name="line68"></a>     * - depth = 2 returns the grandchild of the root node along the path to
<a name="line69"></a>     *      this Item.
<a name="line70"></a>     * - And so on to depth = n, where n is the depth of this Item, which
<a name="line71"></a>     *      returns this Item itself.
<a name="line72"></a>     *
<a name="line73"></a>     * If this node has more than one path (i.e., if it is a descendant of a
<a name="line74"></a>     * shared node) then the path used to define the ancestor is implementaion-
<a name="line75"></a>     * dependent.
<a name="line76"></a>     *
<a name="line77"></a>     * @param integer $depth An integer, 0 &lt;= depth &lt;= n where n is the depth
<a name="line78"></a>     *      of this Item.
<a name="line79"></a>     *
<a name="line80"></a>     * @return \PHPCR\ItemInterface The ancestor of this Item at the specified
<a name="line81"></a>     *      depth.
<a name="line82"></a>     *
<a name="line83"></a>     * @throws \PHPCR\ItemNotFoundException if depth &lt; 0 or depth &gt; n
<a name="line84"></a>     *      where n is the depth of this item.
<a name="line85"></a>     * @throws \PHPCR\AccessDeniedException if the current session does not
<a name="line86"></a>     *      have sufficient access to retrieve the specified node.
<a name="line87"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line88"></a>     *
<a name="line89"></a>     * @api
<a name="line90"></a>     */</span>
<a name="line91"></a>    <span style="color: #000000; font-weight: bold;">function</span> getAncestor<span style="color: #009900;">&#40;</span><span style="color: #000088;">$depth</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line92"></a>&nbsp;
<a name="line93"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line94"></a>     * Returns the parent of this Item.
<a name="line95"></a>     *
<a name="line96"></a>     * @return \PHPCR\NodeInterface The parent of this Item.
<a name="line97"></a>     *
<a name="line98"></a>     * @throws \PHPCR\ItemNotFoundException if this Item is the root node of a
<a name="line99"></a>     *      workspace.
<a name="line100"></a>     * @throws \PHPCR\AccessDeniedException if the current session does not
<a name="line101"></a>     *      have sufficent access to retrieve the parent of this item.
<a name="line102"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line103"></a>     *
<a name="line104"></a>     * @api
<a name="line105"></a>     */</span>
<a name="line106"></a>    <span style="color: #000000; font-weight: bold;">function</span> getParent<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line107"></a>&nbsp;
<a name="line108"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line109"></a>     * Returns the depth of this Item in the workspace item graph.
<a name="line110"></a>     *
<a name="line111"></a>     * - The root node returns 0.
<a name="line112"></a>     * - A property or child node of the root node returns 1.
<a name="line113"></a>     * - A property or child node of a child node of the root returns 2.
<a name="line114"></a>     * - And so on to this Item.
<a name="line115"></a>     *
<a name="line116"></a>     * @return integer The depth of this Item in the workspace item graph.
<a name="line117"></a>     *
<a name="line118"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line119"></a>     *
<a name="line120"></a>     * @api
<a name="line121"></a>     */</span>
<a name="line122"></a>    <span style="color: #000000; font-weight: bold;">function</span> getDepth<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line123"></a>&nbsp;
<a name="line124"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line125"></a>     * Returns the Session through which this Item was acquired.
<a name="line126"></a>     *
<a name="line127"></a>     * @return \PHPCR\SessionInterface the Session through which this Item was
<a name="line128"></a>     *      acquired.
<a name="line129"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line130"></a>     *
<a name="line131"></a>     * @api
<a name="line132"></a>     */</span>
<a name="line133"></a>    <span style="color: #000000; font-weight: bold;">function</span> getSession<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line134"></a>&nbsp;
<a name="line135"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line136"></a>     * Indicates whether this Item is a Node or a Property.
<a name="line137"></a>     *
<a name="line138"></a>     * Returns true if this Item is a Node; Returns false if this Item is a
<a name="line139"></a>     * Property.
<a name="line140"></a>     *
<a name="line141"></a>     * @return boolean true if this Item is a Node, false if it is a Property.
<a name="line142"></a>     *
<a name="line143"></a>     * @api
<a name="line144"></a>     */</span>
<a name="line145"></a>    <span style="color: #000000; font-weight: bold;">function</span> isNode<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line146"></a>&nbsp;
<a name="line147"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line148"></a>     * Determines if the current item is a new one.
<a name="line149"></a>     *
<a name="line150"></a>     * Returns true if this is a new item, meaning that it exists only in
<a name="line151"></a>     * transient storage on the Session and has not yet been saved. Within a
<a name="line152"></a>     * transaction, isNew on an Item may return false (because the item has
<a name="line153"></a>     * been saved) even if that Item is not in persistent storage (because the
<a name="line154"></a>     * transaction has not yet been committed).
<a name="line155"></a>     *
<a name="line156"></a>     * Note that if an item returns true on isNew, then by definition is parent
<a name="line157"></a>     * will return true on isModified.
<a name="line158"></a>     *
<a name="line159"></a>     * Note that in read-only implementations, this method will always return
<a name="line160"></a>     * false.
<a name="line161"></a>     *
<a name="line162"></a>     * @return boolean true if this item is new; false otherwise.
<a name="line163"></a>     *
<a name="line164"></a>     * @api
<a name="line165"></a>     */</span>
<a name="line166"></a>    <span style="color: #000000; font-weight: bold;">function</span> isNew<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line167"></a>&nbsp;
<a name="line168"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line169"></a>     * Indicates if the current item has been modified.
<a name="line170"></a>     *
<a name="line171"></a>     * Returns true if this Item has been saved but has subsequently been
<a name="line172"></a>     * modified through the current session and therefore the state of this
<a name="line173"></a>     * item as recorded in the session differs from the state of this item as
<a name="line174"></a>     * saved. Within a transaction, isModified on an Item may return false
<a name="line175"></a>     * (because the Item has been saved since the modification) even if the
<a name="line176"></a>     * modification in question is not in persistent storage (because the
<a name="line177"></a>     * transaction has not yet been committed).
<a name="line178"></a>     *
<a name="line179"></a>     * Note that in read-only implementations, this method will always return
<a name="line180"></a>     * false.
<a name="line181"></a>     *
<a name="line182"></a>     * @return boolean true if this item is modified; false otherwise.
<a name="line183"></a>     *
<a name="line184"></a>     * @api
<a name="line185"></a>     */</span>
<a name="line186"></a>    <span style="color: #000000; font-weight: bold;">function</span> isModified<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line187"></a>&nbsp;
<a name="line188"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line189"></a>     * Determines if this Item object represents the same actual workspace item
<a name="line190"></a>     * as the object otherItem.
<a name="line191"></a>     *
<a name="line192"></a>     * Two Item objects represent the same workspace item if all the following
<a name="line193"></a>     * are true:
<a name="line194"></a>     *
<a name="line195"></a>     * - Both objects were acquired through Session objects that were created
<a name="line196"></a>     *   by the same Repository object.
<a name="line197"></a>     * - Both objects were acquired through Session objects bound to the same
<a name="line198"></a>     *   repository workspace.
<a name="line199"></a>     * - The objects are either both Node objects or both Property
<a name="line200"></a>     *   objects.
<a name="line201"></a>     * - If they are Node objects, they have the same identifier.
<a name="line202"></a>     * - If they are Property objects they have identical names and
<a name="line203"></a>     *   isSame() is true of their parent nodes.
<a name="line204"></a>     *
<a name="line205"></a>     * This method does not compare the states of the two items. For example, if
<a name="line206"></a>     * two Item objects representing the same actual workspace item have been
<a name="line207"></a>     * retrieved through two different sessions and one has been modified, then
<a name="line208"></a>     * this method will still return true when comparing these two objects.
<a name="line209"></a>     * Note that if two Item objects representing the same workspace item are
<a name="line210"></a>     * retrieved through the same session they will always reflect the same
<a name="line211"></a>     * state.
<a name="line212"></a>     *
<a name="line213"></a>     * @param \PHPCR\ItemInterface $otherItem the Item object to be tested for
<a name="line214"></a>     *      identity with this Item.
<a name="line215"></a>     *
<a name="line216"></a>     * @return boolean true if this Item object and otherItem represent the
<a name="line217"></a>     *      same actual repository item; false otherwise.
<a name="line218"></a>     *
<a name="line219"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line220"></a>     *
<a name="line221"></a>     * @api
<a name="line222"></a>     */</span>
<a name="line223"></a>    <span style="color: #000000; font-weight: bold;">function</span> isSame<span style="color: #009900;">&#40;</span>\PHPCR\ItemInterface <span style="color: #000088;">$otherItem</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line224"></a>&nbsp;
<a name="line225"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line226"></a>     * Call the ItemVisitor::visit() method.
<a name="line227"></a>     *
<a name="line228"></a>     * This is less relevant in PHP (Java had it to avoid typecasting in the
<a name="line229"></a>     * visitor). We leave it here, to allow sanity checks or other operations
<a name="line230"></a>     * an implementation might wants to do.
<a name="line231"></a>     *
<a name="line232"></a>     * @param \PHPCR\ItemVisitorInterface $visitor The ItemVisitor to be
<a name="line233"></a>     *      accepted.
<a name="line234"></a>     *
<a name="line235"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line236"></a>     *
<a name="line237"></a>     * @api
<a name="line238"></a>     */</span>
<a name="line239"></a>    <span style="color: #000000; font-weight: bold;">function</span> accept<span style="color: #009900;">&#40;</span>\PHPCR\ItemVisitorInterface <span style="color: #000088;">$visitor</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line240"></a>&nbsp;
<a name="line241"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line242"></a>     * Updates the state of the current item.
<a name="line243"></a>     *
<a name="line244"></a>     * If keepChanges is false, this method discards all pending changes
<a name="line245"></a>     * currently recorded in this Session that apply to this Item or any
<a name="line246"></a>     * of its descendants (that is, the subgraph rooted at this Item) and
<a name="line247"></a>     * returns all items to reflect the current saved state. Outside a
<a name="line248"></a>     * transaction this state is simple the current state of persistent
<a name="line249"></a>     * storage. Within a transaction, this state will reflect persistent
<a name="line250"></a>     * storage as modified by changes that have been saved but not yet
<a name="line251"></a>     * committed.
<a name="line252"></a>     *
<a name="line253"></a>     * If keepChanges is true then pending change are not discarded but
<a name="line254"></a>     * items that do not have changes pending have their state refreshed
<a name="line255"></a>     * to reflect the current saved state, thus revealing changes made by
<a name="line256"></a>     * other sessions.
<a name="line257"></a>     *
<a name="line258"></a>     * @param boolean $keepChanges a boolean
<a name="line259"></a>     *
<a name="line260"></a>     * @return void
<a name="line261"></a>     *
<a name="line262"></a>     * @throws \PHPCR\InvalidItemStateException if this Item object represents
<a name="line263"></a>     *      a workspace item that has been removed (either by this session or
<a name="line264"></a>     *      another).
<a name="line265"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line266"></a>     *
<a name="line267"></a>     * @api
<a name="line268"></a>     */</span>
<a name="line269"></a>    <span style="color: #000000; font-weight: bold;">function</span> refresh<span style="color: #009900;">&#40;</span><span style="color: #000088;">$keepChanges</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line270"></a>&nbsp;
<a name="line271"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line272"></a>     * Removes this item (and its subgraph).
<a name="line273"></a>     *
<a name="line274"></a>     * To persist a removal, a save must be performed that includes the (former)
<a name="line275"></a>     * parent of the removed item within its scope.
<a name="line276"></a>     *
<a name="line277"></a>     * If a node with same-name siblings is removed, this decrements by one the
<a name="line278"></a>     * indices of all the siblings with indices greater than that of the removed
<a name="line279"></a>     * node. In other words, a removal compacts the array of same-name siblings
<a name="line280"></a>     * and causes the minimal re-numbering required to maintain the original
<a name="line281"></a>     * order but leave no gaps in the numbering.
<a name="line282"></a>     *
<a name="line283"></a>     * @return void
<a name="line284"></a>     *
<a name="line285"></a>     * @throws \PHPCR\Version\VersionException if the parent node of this item
<a name="line286"></a>     *      is versionable and checked-in or is non-versionable but its nearest
<a name="line287"></a>     *      versionable ancestor is checked-in and this implementation performs
<a name="line288"></a>     *      this validation immediately instead of waiting until save.
<a name="line289"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the removal of this
<a name="line290"></a>     *      item and this implementation performs this validation immediately
<a name="line291"></a>     *      instead of waiting until save.
<a name="line292"></a>     * @throws \PHPCR\NodeType\ConstraintViolationException if removing the
<a name="line293"></a>     *      specified item would violate a node type or implementation-specific
<a name="line294"></a>     *      constraint and this implementation performs this validation
<a name="line295"></a>     *      immediately instead of waiting until save.
<a name="line296"></a>     * @throws \PHPCR\AccessDeniedException if this item or an item in its
<a name="line297"></a>     *      subgraph is currently the target of a REFERENCE property located in
<a name="line298"></a>     *      this workspace but outside this item's subgraph and the current
<a name="line299"></a>     *      Session does not have read access to that REFERENCE property or if
<a name="line300"></a>     *      the current Session does not have sufficent privileges to remove
<a name="line301"></a>     *      the item.
<a name="line302"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line303"></a>     *
<a name="line304"></a>     * @see SessionInterface::removeItem(String)
<a name="line305"></a>     *
<a name="line306"></a>     * @api
<a name="line307"></a>     */</span>
<a name="line308"></a>    <span style="color: #000000; font-weight: bold;">function</span> remove<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line309"></a><span style="color: #009900;">&#125;</span>
<a name="line310"></a>&nbsp;</pre>
<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/phpcr/iteminterface.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>