<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Thu, 16 Jun 2011 13:02:38 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>ObservationManagerInterface (PHPCR API)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="../../phpcr/observation/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../../phpcr/observation/package-tree.html">Tree</a></li>
<li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../phpcr/observation/observationmanagerinterface.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">PHPCR\Observation\ObservationManagerInterface</div>
<a href="../../source/phpcr/observation/observationmanagerinterface.php.html#line44" class="location">PHPCR/Observation/ObservationManagerInterface.php at line 44</a>

<h1>Interface ObservationManagerInterface</h1>

<pre class="tree">\Traversable<br> └─<strong>ObservationManagerInterface</strong><br /></pre>

<hr>

<p class="signature">public  interface <strong>ObservationManagerInterface</strong><br>extends \Traversable

</p>

<div class="comment" id="overview_description"><p>The ObservationManager object.</p><p>Acquired via Workspace.getObservationManager(). Allows for the registration
and deregistration of event listeners.</p><p>The \Traversable interface enables the implementation to be addressed with
<b>foreach</b>. ObservationManager has to implement either \RecursiveIterator
or \Iterator.
The iterator is equivalent to <b>getRegisteredEventListeners()</b> returning
a list of all registered event listeners. The iterator keys have no
significant meaning.</p></div>

<dl>
<dt>Subpackage:</dt>
<dd>interfaces</dd>
<dt>Api.</dt>
</dl>
<hr>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#addEventListener()">addEventListener</a>(<a href="../../phpcr/observation/eventlistenerinterface.html">EventListenerInterface</a> listener, integer eventTypes, string absPath, boolean isDeep, array uuid, array nodeTypeName, boolean noLocal)</p><p class="description">Adds an event listener that listens for the specified eventTypes (a
combination of one or more event types encoded as a bit mask value).
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../phpcr/observation/eventjournalinterface.html">EventJournalInterface</a></td>
<td class="description"><p class="name"><a href="#getEventJournal()">getEventJournal</a>(integer eventTypes, string absPath, boolean isDeep, array uuid, array nodeTypeName)</p><p class="description">Retrieves the event journal for this workspace.
</p></td>
</tr>
<tr>
<td class="type"> Iterator</td>
<td class="description"><p class="name"><a href="#getRegisteredEventListeners()">getRegisteredEventListeners</a>()</p><p class="description">Returns all event listeners that have been registered through this session.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#removeEventListener()">removeEventListener</a>(<a href="../../phpcr/observation/eventlistenerinterface.html">EventListenerInterface</a> listener)</p><p class="description">Deregisters an event listener.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#setUserData()">setUserData</a>(string userData)</p><p class="description">Sets the user data information that will be returned by Event.getUserData().</p></td>
</tr>
</table>

<h2 id="detail_method">Method Detail</h2>
<a href="../../source/phpcr/observation/observationmanagerinterface.php.html#line100" class="location">PHPCR/Observation/ObservationManagerInterface.php at line 100</a>

<h3 id="addEventListener()">addEventListener</h3>
<code class="signature">public  void <strong>addEventListener</strong>(<a href="../../phpcr/observation/eventlistenerinterface.html">EventListenerInterface</a> listener, integer eventTypes, string absPath, boolean isDeep, array uuid, array nodeTypeName, boolean noLocal)</code>
<div class="details">
<p>Adds an event listener that listens for the specified eventTypes (a
combination of one or more event types encoded as a bit mask value).
The set of events will be further filtered by the access rights of the c
urrent Session as well as the restrictions specified by the parameters of
this method. These restrictions are stated in terms of characteristics of the
associated parent node of the event.</p><p>The associated parent node of an event is the parent node of the item at (or
formerly at) the path returned by Event.getPath(). The following restrictions
are available:
<b>absPath</b>, <b>isDeep</b>: Only events whose associated parent node is at absPath (or
within its subgraph, if isDeep is true) will be received. It is permissible
to register a listener for a path where no node currently exists.
<b>uuid</b>: Only events whose associated parent node has one of the identifiers in
this list will be received. If his parameter is null then no identifier-
related restriction is placed on events received. Note that specifying an
empty array instead of null would result in no nodes being listened to. The
term "UUID" is used for compatibility with JCR 1.0.
<b>nodeTypeName</b>: Only events whose associated parent node has one of the node
types (or a subtype of one of the node types) in this list will be received.
If his parameter is null then no node type-related restriction is placed on
events received. Note that specifying an empty array instead of null would
result in no nodes types being listened to.</p><p>The restrictions are "ANDed" together. In other words, for a particular node
to be "listened to" it must meet all the restrictions.
Additionally, if noLocal is true, then events generated by the session
through which the listener was registered are ignored. Otherwise, they are
not ignored.</p><p>The filters of an already-registered EventListener can be changed at runtime
by re-registering the same EventListener object (i.e. the same actual object)
with a new set of filter arguments. The implementation must ensure that no
events are lost during the changeover.</p><p>In addition to the filters placed on a listener above, the scope of
observation support, in terms of which subgraphs are observable, may also be
subject to implementation-specific restrictions. For example, in some
repositories observation of changes in the jcr:system subgraph may not be
supported</p><dl>
<dt>Parameters:</dt>
<dd>listener - An EventListener object.</dd>
<dd>eventTypes - A combination of one or more event type constants encoded as a bitmask.</dd>
<dd>absPath - The absolute path identifying the node to be observed.</dd>
<dd>isDeep - Switch to define the given path as a reference to a child node.</dd>
<dd>uuid - List of identifiers of events to be recieved.</dd>
<dd>nodeTypeName - List of node type names to identify the events to be recieved.</dd>
<dd>noLocal - switch to handle local events.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/observation/observationmanagerinterface.php.html#line167" class="location">PHPCR/Observation/ObservationManagerInterface.php at line 167</a>

<h3 id="getEventJournal()">getEventJournal</h3>
<code class="signature">public  <a href="../../phpcr/observation/eventjournalinterface.html">EventJournalInterface</a> <strong>getEventJournal</strong>(integer eventTypes, string absPath, boolean isDeep, array uuid, array nodeTypeName)</code>
<div class="details">
<p>Retrieves the event journal for this workspace.</p><p>If journaled observation is not supported for this workspace, null is
returned.</p><p>Events returned in the EventJournal instance will be filtered according
to the parameters of this method, the current session's access
restrictions as well as any additional restrictions specified through
implemention-specific configuration.</p><p>The parameters of this method filter the event set in the same way as
they do in addEventListener().</p><dl>
<dt>Parameters:</dt>
<dd>eventTypes - A combination of one or more event type constants encoded as a bitmask.</dd>
<dd>absPath - an absolute path.</dd>
<dd>isDeep - Switch to define the given path as a reference to a child node.</dd>
<dd>uuid - array of identifiers.</dd>
<dd>nodeTypeName - array of node type names.</dd>
<dt>Returns:</dt>
<dd>an EventJournal (or null).</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/observation/observationmanagerinterface.php.html#line130" class="location">PHPCR/Observation/ObservationManagerInterface.php at line 130</a>

<h3 id="getRegisteredEventListeners()">getRegisteredEventListeners</h3>
<code class="signature">public  Iterator <strong>getRegisteredEventListeners</strong>()</code>
<div class="details">
<p>Returns all event listeners that have been registered through this session.</p><p>If no listeners have been registered, an empty iterator is returned.</p><dl>
<dt>Returns:</dt>
<dd>implementing <b>SeekableIterator</b> and <b>Countable</b>. Values are the EventListenerInterface instances. Keys have no meaning.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/observation/observationmanagerinterface.php.html#line117" class="location">PHPCR/Observation/ObservationManagerInterface.php at line 117</a>

<h3 id="removeEventListener()">removeEventListener</h3>
<code class="signature">public  void <strong>removeEventListener</strong>(<a href="../../phpcr/observation/eventlistenerinterface.html">EventListenerInterface</a> listener)</code>
<div class="details">
<p>Deregisters an event listener.</p><p>A listener may be deregistered while it is being executed. The deregistration
method will block until the listener has completed executing. An exception to
this rule is a listener which deregisters itself from within the onEvent
method. In this case, the deregistration method returns immediately, but
deregistration will effectively be delayed until the listener completes.</p><dl>
<dt>Parameters:</dt>
<dd>listener - The listener to deregister.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/observation/observationmanagerinterface.php.html#line141" class="location">PHPCR/Observation/ObservationManagerInterface.php at line 141</a>

<h3 id="setUserData()">setUserData</h3>
<code class="signature">public  void <strong>setUserData</strong>(string userData)</code>
<div class="details">
<p>Sets the user data information that will be returned by Event.getUserData().</p><dl>
<dt>Parameters:</dt>
<dd>userData - the user data</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if an error occurs</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="../../phpcr/observation/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../../phpcr/observation/package-tree.html">Tree</a></li>
<li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../phpcr/observation/observationmanagerinterface.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>