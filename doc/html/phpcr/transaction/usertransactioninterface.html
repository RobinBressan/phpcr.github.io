<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Tue, 27 Mar 2012 06:17:41 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>UserTransactionInterface (PHPCR API)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="../../phpcr/transaction/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../../phpcr/transaction/package-tree.html">Tree</a></li>
<li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../phpcr/transaction/usertransactioninterface.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">PHPCR\Transaction\UserTransactionInterface</div>
<a href="../../source/phpcr/transaction/usertransactioninterface.php.html#line62" class="location">PHPCR/Transaction/UserTransactionInterface.php at line 62</a>

<h1>Interface UserTransactionInterface</h1>

<pre class="tree"><strong>UserTransactionInterface</strong><br /></pre>

<hr>

<p class="signature">public  interface <strong>UserTransactionInterface</strong></p>

<div class="comment" id="overview_description"><p>As there is no transaction standard in PHP this interface provides a
transaction interface similar to the
<a href="http://en.wikipedia.org/wiki/Java_Transaction_API">Java Transaction
API (JTA)</a></p><p>You can acquire the transaction manager from a session supporting
transactions with \PHPCR\SessionInterface::getTransactionManager()</p><p>A transaction is started with begin() and only permanently persisted if
commit() is called. If commit() is not called until timeout, the lifetime
of your php script or if rollback() is called explicitly, no changes are
persisted.</p><p>Remember that session changes are never persisted before you call
$session->save(). Transactions are only necessary if you want to be able
to rollback over more than one save operation.</p><p>The usage looks like
<pre></p><p>$tm = $session->getTransactionManager();
$tm->begin();
//do stuff with the session
$session->save();
//do more stuff
if (problem) {
$tm->rollback();
} else {
$session->save();
$tm->commit();
}
</pre></p><p>A transaction manager might support nested transactions, meaning you can
call begin() repeatedly without commit() in between (but have to commit
every transaction you started).</p><p>Remember that in the context of phpcr, the rollback operation will only
reset the transaction but keep the current session changes. If you want to
get rid of them too, use \PHPCR\SessionInterface::refresh()</p></div>

<dl>
<dt>See Also:</dt>
<dd>\PHPCR\SessionInterface::getTransactionManager()</dd>
<dt>Author:</dt>
<dd>Johannes Stark <starkj@gmx.de></dd>
<dt>License:</dt>
<dd>http://www.apache.org/licenses/LICENSE-2.0 Apache Software License 2.0</dd>
<dt>Api.</dt>
</dl>
<hr>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#begin()">begin</a>()</p><p class="description">Begin new transaction associated with current session.</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#commit()">commit</a>()</p><p class="description">Commit the transaction associated with the current session to store it
persistently.</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#inTransaction()">inTransaction</a>()</p><p class="description">Obtain the status if the current session is inside of a transaction or
not.</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#rollback()">rollback</a>()</p><p class="description">Rollback the transaction associated with the current session.</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#setTransactionTimeout()">setTransactionTimeout</a>(int seconds)</p><p class="description">Set a timeout for the transaction.
</p></td>
</tr>
</table>

<h2 id="detail_method">Method Detail</h2>
<a href="../../source/phpcr/transaction/usertransactioninterface.php.html#line76" class="location">PHPCR/Transaction/UserTransactionInterface.php at line 76</a>

<h3 id="begin()">begin</h3>
<code class="signature">public  void <strong>begin</strong>()</code>
<div class="details">
<p>Begin new transaction associated with current session.</p><dl>
<dt>Throws:</dt>
<dd><a href="../../phpcr/unsupportedrepositoryoperationexception.html">\PHPCR\UnsupportedRepositoryOperationException</a> - Thrown if a transaction is already started and the transaction implementation or backend does not support nested transactions.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - Thrown if the transaction implementation encounters an unexpected error condition.</dd>
</dl>
</div>

<hr>

<a href="../../source/phpcr/transaction/usertransactioninterface.php.html#line93" class="location">PHPCR/Transaction/UserTransactionInterface.php at line 93</a>

<h3 id="commit()">commit</h3>
<code class="signature">public  void <strong>commit</strong>()</code>
<div class="details">
<p>Commit the transaction associated with the current session to store it
persistently.</p><dl>
<dt>Throws:</dt>
<dd><a href="../../phpcr/transaction/rollbackexception.html">\PHPCR\Transaction\RollbackException</a> - Thrown to indicate that the transaction has been rolled back rather than committed.</dd>
<dd><a href="../../phpcr/accessdeniedexception.html">\PHPCR\AccessDeniedException</a> - Thrown to indicate that the session is not allowed to commit the transaction.</dd>
<dd>\LogicException - Thrown if the current session is not associated with a transaction.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - Thrown if the transaction implementation encounters an unexpected error condition.</dd>
</dl>
</div>

<hr>

<a href="../../source/phpcr/transaction/usertransactioninterface.php.html#line104" class="location">PHPCR/Transaction/UserTransactionInterface.php at line 104</a>

<h3 id="inTransaction()">inTransaction</h3>
<code class="signature">public  boolean <strong>inTransaction</strong>()</code>
<div class="details">
<p>Obtain the status if the current session is inside of a transaction or
not.</p><dl>
<dt>Throws:</dt>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - Thrown if the transaction implementation encounters an unexpected error condition.</dd>
</dl>
</div>

<hr>

<a href="../../source/phpcr/transaction/usertransactioninterface.php.html#line118" class="location">PHPCR/Transaction/UserTransactionInterface.php at line 118</a>

<h3 id="rollback()">rollback</h3>
<code class="signature">public  void <strong>rollback</strong>()</code>
<div class="details">
<p>Rollback the transaction associated with the current session.</p><dl>
<dt>Throws:</dt>
<dd><a href="../../phpcr/accessdeniedexception.html">\PHPCR\AccessDeniedException</a> - Thrown to indicate that the application is not allowed to roll back the transaction.</dd>
<dd>\LogicException - Thrown if the current session is not associated with a transaction.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - Thrown if the transaction implementation encounters an unexpected error condition.</dd>
</dl>
</div>

<hr>

<a href="../../source/phpcr/transaction/usertransactioninterface.php.html#line137" class="location">PHPCR/Transaction/UserTransactionInterface.php at line 137</a>

<h3 id="setTransactionTimeout()">setTransactionTimeout</h3>
<code class="signature">public  void <strong>setTransactionTimeout</strong>(int seconds)</code>
<div class="details">
<p>Set a timeout for the transaction.</p><p>Modify the timeout value that is associated with transactions started by
the current application with the begin() method. If not explicitly set,
the transaction service uses some default value for the transaction
timeout.</p><dl>
<dt>Parameters:</dt>
<dd>seconds - The value of the timeout in seconds. If the value is zero, the transaction service restores the default value. If the value is negative a RepositoryException is thrown.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - Thrown if the transaction implementation encounters an unexpected error condition.</dd>
</dl>
</div>

<hr>

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="../../phpcr/transaction/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../../phpcr/transaction/package-tree.html">Tree</a></li>
<li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../phpcr/transaction/usertransactioninterface.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>