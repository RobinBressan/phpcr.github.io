<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Mon, 30 May 2011 13:13:11 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>AccessControlManagerInterface (PHPCR API)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="../../phpcr/security/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../../phpcr/security/package-tree.html">Tree</a></li>
<li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../phpcr/security/accesscontrolmanagerinterface.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">PHPCR\Security\AccessControlManagerInterface</div>
<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line38" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 38</a>

<h1>Interface AccessControlManagerInterface</h1>

<pre class="tree"><strong>AccessControlManagerInterface</strong><br /></pre>

<hr>

<p class="signature">public  interface <strong>AccessControlManagerInterface</strong></p>

<div class="comment" id="overview_description"><p>The AccessControlManager object is accessed via Session.getAccessControlManager().</p><p>It provides methods for:
- Access control discovery
- Assigning access control policies</p></div>

<dl>
<dt>Subpackage:</dt>
<dd>interfaces</dd>
<dt>Api.</dt>
</dl>
<hr>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type"> Iterator</td>
<td class="description"><p class="name"><a href="#getApplicablePolicies()">getApplicablePolicies</a>(string absPath)</p><p class="description">Returns the access control policies that are capable of being applied to
the node at absPath.</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#getEffectivePolicies()">getEffectivePolicies</a>(string absPath)</p><p class="description">Gets the access control policies currently in effect on the node identified by the given path.
</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#getPolicies()">getPolicies</a>(string absPath)</p><p class="description">Gets the access control policies previouly set to the node identified by the given path.
</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#getPrivileges()">getPrivileges</a>(string absPath)</p><p class="description">Reads the previleges of an existing node identfied by its path.
</p></td>
</tr>
<tr>
<td class="type"> array</td>
<td class="description"><p class="name"><a href="#getSupportedPrivileges()">getSupportedPrivileges</a>(string absPath)</p><p class="description">Gets previleges of an existing node identified by its path.
</p></td>
</tr>
<tr>
<td class="type"> boolean</td>
<td class="description"><p class="name"><a href="#hasPrivileges()">hasPrivileges</a>(string absPath, array privileges)</p><p class="description">Determines if the node identified its path has the given set of previleges.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../../phpcr/security/privilegeinterface.html">PrivilegeInterface</a></td>
<td class="description"><p class="name"><a href="#privilegeFromName()">privilegeFromName</a>(string privilegeName)</p><p class="description">Returns the privilege with the specified privilegeName.</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#removePolicy()">removePolicy</a>(string absPath, <a href="../../phpcr/security/accesscontrolpolicyinterface.html">AccessControlPolicyInterface</a> policy)</p><p class="description">Removes the specified AccessControlPolicy from the node at $absPath.
</p></td>
</tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#setPolicy()">setPolicy</a>(string absPath, <a href="../../phpcr/security/accesscontrolpolicyinterface.html">AccessControlPolicyInterface</a> policy)</p><p class="description">Binds the policy to the node at absPath.
</p></td>
</tr>
</table>

<h2 id="detail_method">Method Detail</h2>
<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line172" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 172</a>

<h3 id="getApplicablePolicies()">getApplicablePolicies</h3>
<code class="signature">public  Iterator <strong>getApplicablePolicies</strong>(string absPath)</code>
<div class="details">
<p>Returns the access control policies that are capable of being applied to
the node at absPath.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The absolute path to a node the prvileges shall be fetched of.</dd>
<dt>Returns:</dt>
<dd>over the applicable access control policies implementing <b>SeekableIterator</b> and <b>Countable</b>. Values are the AccessControlPolicyInterface instances. Keys have no meaning. Returns an empty iterator if no policies are applicable.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node at absPath exists or the session does not have sufficent access to retrieve a node at that location.</dd>
<dd><a href="../../phpcr/accessdeniedexception.html">\PHPCR\AccessDeniedException</a> - if the session lacks READ_ACCESS_CONTROL privilege for the absPath node.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line155" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 155</a>

<h3 id="getEffectivePolicies()">getEffectivePolicies</h3>
<code class="signature">public  array <strong>getEffectivePolicies</strong>(string absPath)</code>
<div class="details">
<p>Gets the access control policies currently in effect on the node identified by the given path.</p><p>Returns the AccessControlPolicy objects that currently are in effect at
the node at $absPath. This may be policies set through this API or some
implementation specific (default) policies.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The absolute path to a node the prvileges shall be fetched of.</dd>
<dt>Returns:</dt>
<dd>an array of AccessControlPolicy objects.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node at absPath exists or the session does not have sufficent access to retrieve a node at that location.</dd>
<dd><a href="../../phpcr/accessdeniedexception.html">\PHPCR\AccessDeniedException</a> - - if the session lacks READ_ACCESS_CONTROL privilege for the absPath node.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line137" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 137</a>

<h3 id="getPolicies()">getPolicies</h3>
<code class="signature">public  array <strong>getPolicies</strong>(string absPath)</code>
<div class="details">
<p>Gets the access control policies previouly set to the node identified by the given path.</p><p>Returns the AccessControlPolicy objects that have been set to the node at
$absPath or an empty array if no policy has been set. This method reflects
the binding state, including transient policy modifications.
Use getEffectivePolicies(String) in order to determine the policy that
effectively applies at absPath.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The absolute path to a node the prvileges shall be fetched of.</dd>
<dt>Returns:</dt>
<dd>an array of AccessControlPolicy objects or an empty array if no policy has been set.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node at absPath exists or the session does not have sufficent access to retrieve a node at that location.</dd>
<dd><a href="../../phpcr/accessdeniedexception.html">\PHPCR\AccessDeniedException</a> - if the session lacks READ_ACCESS_CONTROL privilege for the absPath node.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line117" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 117</a>

<h3 id="getPrivileges()">getPrivileges</h3>
<code class="signature">public  array <strong>getPrivileges</strong>(string absPath)</code>
<div class="details">
<p>Reads the previleges of an existing node identfied by its path.</p><p>Returns the privileges the session has for absolute path absPath, which
must be an existing node.
The returned privileges are those for which hasPrivileges(java.lang.String,
javax.jcr.security.Privilege[]) would return true.</p><p>The results reported by the this method reflect the net effect of the
currently applied control mechanisms. It does not reflect unsaved access
control policies or unsaved access control entries. Changes to access
control status caused by these mechanisms only take effect on Session.save()
and are only then reflected in the results of the privilege test methods.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The absolute path to a node the prvileges shall be fetched of.</dd>
<dt>Returns:</dt>
<dd>an array of Privileges.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node at absPath exists or the session does not have sufficent access to retrieve a node at that location.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line56" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 56</a>

<h3 id="getSupportedPrivileges()">getSupportedPrivileges</h3>
<code class="signature">public  array <strong>getSupportedPrivileges</strong>(string absPath)</code>
<div class="details">
<p>Gets previleges of an existing node identified by its path.</p><p>Returns the privileges supported for absolute path $absPath, which must
be an existing node.
This method does not return the privileges held by the session. Instead,
it returns the privileges that the repository supports.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The absolute path to a node the prvileges shall be fetched of.</dd>
<dt>Returns:</dt>
<dd>An array of Privileges.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node at absPath exists or the session does not have privilege to retrieve the node.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line94" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 94</a>

<h3 id="hasPrivileges()">hasPrivileges</h3>
<code class="signature">public  boolean <strong>hasPrivileges</strong>(string absPath, array privileges)</code>
<div class="details">
<p>Determines if the node identified its path has the given set of previleges.</p><p>Returns whether the session has the specified privileges for absolute
path $absPath, which must be an existing node.
Testing an aggregate privilege is equivalent to testing each non aggregate
privilege among the set returned by calling Privilege.getAggregatePrivileges()
for that privilege.</p><p>The results reported by the this method reflect the net effect of the
currently applied control mechanisms. It does not reflect unsaved access
control policies or unsaved access control entries. Changes to access
control status caused by these mechanisms only take effect on Session.save()
and are only then reflected in the results of the privilege test methods.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The absolute path to a node the prvileges shall be fetched of.</dd>
<dd>privileges - an array of Privileges.</dd>
<dt>Returns:</dt>
<dd>true if the session has the specified privileges; false otherwise.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node at $absPath exists or the session does not have sufficent access to retrieve a node at that location.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line68" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 68</a>

<h3 id="privilegeFromName()">privilegeFromName</h3>
<code class="signature">public  <a href="../../phpcr/security/privilegeinterface.html">PrivilegeInterface</a> <strong>privilegeFromName</strong>(string privilegeName)</code>
<div class="details">
<p>Returns the privilege with the specified privilegeName.</p><dl>
<dt>Parameters:</dt>
<dd>privilegeName - The name of an existing privilege.</dd>
<dt>Returns:</dt>
<dd>the Privilege with the specified $privilegeName.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/security/accesscontrolexception.html">\PHPCR\Security\AccessControlException</a> - if no privilege with the specified name exists.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line234" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 234</a>

<h3 id="removePolicy()">removePolicy</h3>
<code class="signature">public  void <strong>removePolicy</strong>(string absPath, <a href="../../phpcr/security/accesscontrolpolicyinterface.html">AccessControlPolicyInterface</a> policy)</code>
<div class="details">
<p>Removes the specified AccessControlPolicy from the node at $absPath.</p><p>An AccessControlPolicy can only be removed if it was bound to the specified
node through this API before. The effect of the removal only takes place
upon Session.save(). Note, that an implementation default or any other
effective AccessControlPolicy that has not been applied to the node before
may never be removed using this method.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The absolute path to a node the prvileges shall be fetched of.</dd>
<dd>policy - - the policy to be removed.</dd>
<dt>Throws:</dt>
<dd>\HPPCR\PathNotFoundException - if no node at absPath exists or the session does not have sufficent access to retrieve a node at that location.</dd>
<dd><a href="../../phpcr/security/accesscontrolexception.html">\PHPCR\Security\AccessControlException</a> - if no policy exists.</dd>
<dd><a href="../../phpcr/accessdeniedexception.html">\PHPCR\AccessDeniedException</a> - if the session lacks MODIFY_ACCESS_CONTROL privilege for the absPath node.</dd>
<dd><a href="../../phpcr/lock/lockexception.html">\PHPCR\Lock\LockException</a> - if a lock applies at the node at absPath and this implementation performs this validation immediately instead of waiting until save.</dd>
<dd><a href="../../phpcr/version/versionexception.html">\PHPCR\Version\VersionException</a> - if the node at absPath is versionable and checked-in or is non-versionable but its nearest versionable ancestor is checked-in and this implementation performs this validation immediately instead of waiting until save.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<a href="../../source/phpcr/security/accesscontrolmanagerinterface.php.html#line206" class="location">PHPCR/Security/AccessControlManagerInterface.php at line 206</a>

<h3 id="setPolicy()">setPolicy</h3>
<code class="signature">public  void <strong>setPolicy</strong>(string absPath, <a href="../../phpcr/security/accesscontrolpolicyinterface.html">AccessControlPolicyInterface</a> policy)</code>
<div class="details">
<p>Binds the policy to the node at absPath.</p><p>The behavior of the call acm.setPolicy(absPath, policy) differs depending
on how the policy object was originally acquired.</p><p>If policy was acquired through acm.getApplicablePolicies(absPath) then
that policy object is added to the node at absPath.</p><p>On the other hand, if <code>policy</code> was acquired through
acm.getPolicies(absPath) then that policy object (usually after being
altered) replaces its former version on the node at $absPath.</p><p>This is session-write method and therefore the access control policy
is only dispatched on <code>save</code> and will only take effect upon
persist.</p><dl>
<dt>Parameters:</dt>
<dd>absPath - The absolute path to a node the prvileges shall be fetched of.</dd>
<dd>policy - The AccessControlPolicy to be applied.</dd>
<dt>Throws:</dt>
<dd><a href="../../phpcr/pathnotfoundexception.html">\PHPCR\PathNotFoundException</a> - if no node at absPath exists or the session does not have sufficent access to retrieve a node at that location.</dd>
<dd><a href="../../phpcr/security/accesscontrolexception.html">\PHPCR\Security\AccessControlException</a> - if the policy is not applicable.</dd>
<dd><a href="../../phpcr/accessdeniedexception.html">\PHPCR\AccessDeniedException</a> - if the session lacks MODIFY_ACCESS_CONTROL privilege for the absPath node.</dd>
<dd><a href="../../phpcr/lock/lockexception.html">\PHPCR\Lock\LockException</a> - if a lock applies at the node at absPath and this implementation performs this validation immediately instead of waiting until save.</dd>
<dd><a href="../../phpcr/version/versionexception.html">\PHPCR\Version\VersionException</a> - if the node at absPath is read-only due to a checked-in node and this implementation performs this validation immediately.</dd>
<dd><a href="../../phpcr/repositoryexception.html">\PHPCR\RepositoryException</a> - if another error occurs.</dd>
<dt>Api.</dt>
</dl>
</div>

<hr>

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="../../phpcr/security/package-summary.html">Namespace</a></li>
<li class="active">Class</li>
<li><a href="../../phpcr/security/package-tree.html">Tree</a></li>
<li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../phpcr/security/accesscontrolmanagerinterface.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>