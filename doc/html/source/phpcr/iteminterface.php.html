<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Thu, 12 May 2011 08:50:44 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>PHPCR/ItemInterface.php (PHPCR API)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/phpcr/iteminterface.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>PHPCR/ItemInterface.php</h1>
<div class="comment" id="overview_description"><p>Interface to describe the contract to implement aNode or a Property.</p><p>This file was ported from the Java JCR API to PHP by
Karsten Dambekalns <karsten@typo3.org> for the FLOW3 project.</p><p>It is free software; you can redistribute it and/or modify it under
the terms of the GNU Lesser General Public License as published by the
Free Software Foundation, either version 3 of the License, or (at your
option) any later version. Alternatively, you may use the Simplified
BSD License.</p><p>This script is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of MERCHAN-
TABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser
General Public License for more details.</p><p>You should have received a copy of the GNU Lesser General Public
License along with the script.
If not, see <code><a href="http://www.gnu.org/licenses/lgpl.html">http://www.gnu.org/licenses/lgpl.html</a></code>.</p><p>The TYPO3 project - inspiring people to share!</p></div>

<hr>

<a name="line1"></a><pre class="php" style="font-family:monospace;"><span style="color: #000000; font-weight: bold;">&lt;?php</span>
<a name="line2"></a><span style="color: #009933; font-style: italic;">/**
<a name="line3"></a> * Interface to describe the contract to implement aNode or a Property.
<a name="line4"></a> *
<a name="line5"></a> * This file was ported from the Java JCR API to PHP by
<a name="line6"></a> * Karsten Dambekalns &lt;karsten@typo3.org&gt; for the FLOW3 project.
<a name="line7"></a> *
<a name="line8"></a> * It is free software; you can redistribute it and/or modify it under
<a name="line9"></a> * the terms of the GNU Lesser General Public License as published by the
<a name="line10"></a> * Free Software Foundation, either version 3 of the License, or (at your
<a name="line11"></a> * option) any later version. Alternatively, you may use the Simplified
<a name="line12"></a> * BSD License.
<a name="line13"></a> *
<a name="line14"></a> * This script is distributed in the hope that it will be useful, but
<a name="line15"></a> * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHAN-
<a name="line16"></a> * TABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser
<a name="line17"></a> * General Public License for more details.
<a name="line18"></a> *
<a name="line19"></a> * You should have received a copy of the GNU Lesser General Public
<a name="line20"></a> * License along with the script.
<a name="line21"></a> * If not, see {@link http://www.gnu.org/licenses/lgpl.html}.
<a name="line22"></a> *
<a name="line23"></a> * The TYPO3 project - inspiring people to share!
<a name="line24"></a> *
<a name="line25"></a> * @license http://www.gnu.org/licenses/lgpl.html GNU Lesser General Public License, version 3 or later
<a name="line26"></a> * @license http://opensource.org/licenses/bsd-license.php Simplified BSD License
<a name="line27"></a> *
<a name="line28"></a> * @package phpcr
<a name="line29"></a> * @subpackage interfaces
<a name="line30"></a> */</span>
<a name="line31"></a>&nbsp;
<a name="line32"></a><span style="color: #000000; font-weight: bold;">namespace</span> PHPCR<span style="color: #339933;">;</span>
<a name="line33"></a>&nbsp;
<a name="line34"></a><span style="color: #009933; font-style: italic;">/**
<a name="line35"></a> * The Item is the base interface of Node and Property.
<a name="line36"></a> *
<a name="line37"></a> * @package phpcr
<a name="line38"></a> * @subpackage interfaces
<a name="line39"></a> * @api
<a name="line40"></a> */</span>
<a name="line41"></a><span style="color: #000000; font-weight: bold;">interface</span> ItemInterface <span style="color: #009900;">&#123;</span>
<a name="line42"></a>&nbsp;
<a name="line43"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line44"></a>     * Returns the normalized absolute path to this item.
<a name="line45"></a>     *
<a name="line46"></a>     * @returns string the normalized absolute path of this Item.
<a name="line47"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line48"></a>     * @api
<a name="line49"></a>     */</span>
<a name="line50"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getPath<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line51"></a>&nbsp;
<a name="line52"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line53"></a>     * Returns the name of this Item in qualified form.
<a name="line54"></a>     *
<a name="line55"></a>     * If this Item is the root node of the workspace, an empty string is returned.
<a name="line56"></a>     *
<a name="line57"></a>     * @return string the name of this Item in qualified form or an empty string if this Item is the root node of a workspace.
<a name="line58"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line59"></a>     * @api
<a name="line60"></a>     */</span>
<a name="line61"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getName<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line62"></a>&nbsp;
<a name="line63"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line64"></a>     * Returns the ancestor of this Item at the specified depth.
<a name="line65"></a>     *
<a name="line66"></a>     * An ancestor of depth x is the Item that is x levels down along the path from the root
<a name="line67"></a>     * node to this Item.
<a name="line68"></a>     *
<a name="line69"></a>     * - depth = 0 returns the root node of a workspace.
<a name="line70"></a>     * - depth = 1 returns the child of the root node along the path to this Item.
<a name="line71"></a>     * - depth = 2 returns the grandchild of the root node along the path to this Item.
<a name="line72"></a>     * - And so on to depth = n, where n is the depth of this Item, which returns this Item itself.
<a name="line73"></a>     *
<a name="line74"></a>     * If this node has more than one path (i.e., if it is a descendant of a
<a name="line75"></a>     * shared node) then the path used to define the ancestor is implementaion-
<a name="line76"></a>     * dependent.
<a name="line77"></a>     *
<a name="line78"></a>     * @param integer $depth An integer, 0 &lt;= depth &lt;= n where n is the depth of this Item.
<a name="line79"></a>     * @return \PHPCR\ItemInterface The ancestor of this Item at the specified depth.
<a name="line80"></a>     * @throws \PHPCR\ItemNotFoundException if depth &amp;lt; 0 or depth &amp;gt; n where n is the depth of this item.
<a name="line81"></a>     * @throws \PHPCR\AccessDeniedException if the current session does not have sufficient access to retrieve the specified node.
<a name="line82"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line83"></a>     * @api
<a name="line84"></a>     */</span>
<a name="line85"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getAncestor<span style="color: #009900;">&#40;</span><span style="color: #000088;">$depth</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line86"></a>&nbsp;
<a name="line87"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line88"></a>     * Returns the parent of this Item.
<a name="line89"></a>     *
<a name="line90"></a>     * @return \PHPCR\NodeInterface The parent of this Item.
<a name="line91"></a>     * @throws \PHPCR\ItemNotFoundException if this Item&lt; is the root node of a workspace.
<a name="line92"></a>     * @throws \PHPCR\AccessDeniedException if the current session does not have sufficent access to retrieve the parent of this item.
<a name="line93"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line94"></a>     * @api
<a name="line95"></a>     */</span>
<a name="line96"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getParent<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line97"></a>&nbsp;
<a name="line98"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line99"></a>     * Returns the depth of this Item in the workspace item graph.
<a name="line100"></a>     *
<a name="line101"></a>     * - The root node returns 0.
<a name="line102"></a>     * - A property or child node of the root node returns 1.
<a name="line103"></a>     * - A property or child node of a child node of the root returns 2.
<a name="line104"></a>     * - And so on to this Item.
<a name="line105"></a>     *
<a name="line106"></a>     * @return integer The depth of this Item in the workspace item graph.
<a name="line107"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line108"></a>     * @api
<a name="line109"></a>     */</span>
<a name="line110"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getDepth<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line111"></a>&nbsp;
<a name="line112"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line113"></a>     * Returns the Session through which this Item was acquired.
<a name="line114"></a>     *
<a name="line115"></a>     * @return \PHPCR\SessionInterface the Session through which this Item was acquired.
<a name="line116"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line117"></a>     * @api
<a name="line118"></a>     */</span>
<a name="line119"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getSession<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line120"></a>&nbsp;
<a name="line121"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line122"></a>     * Indicates whether this Item is a Node or a Property.
<a name="line123"></a>     *
<a name="line124"></a>     * Returns true if this Item is a Node; Returns false if this Item is a Property.
<a name="line125"></a>     *
<a name="line126"></a>     * @return boolean true if this Item is a Node, false if it is a Property.
<a name="line127"></a>     * @api
<a name="line128"></a>     */</span>
<a name="line129"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> isNode<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line130"></a>&nbsp;
<a name="line131"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line132"></a>     * Determines if the current item is a new one.
<a name="line133"></a>     *
<a name="line134"></a>     * Returns true if this is a new item, meaning that it exists only in
<a name="line135"></a>     * transient storage on the Session and has not yet been saved. Within a
<a name="line136"></a>     * transaction, isNew on an Item may return false (because the item has
<a name="line137"></a>     * been saved) even if that Item is not in persistent storage (because the
<a name="line138"></a>     * transaction has not yet been committed).
<a name="line139"></a>     *
<a name="line140"></a>     * Note that if an item returns true on isNew, then by definition is parent
<a name="line141"></a>     * will return true on isModified.
<a name="line142"></a>     *
<a name="line143"></a>     * Note that in read-only implementations, this method will always return
<a name="line144"></a>     * false.
<a name="line145"></a>     *
<a name="line146"></a>     * @return boolean true if this item is new; false otherwise.
<a name="line147"></a>     * @api
<a name="line148"></a>     */</span>
<a name="line149"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> isNew<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line150"></a>&nbsp;
<a name="line151"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line152"></a>     * Indicates if the current item has been modified.
<a name="line153"></a>     *
<a name="line154"></a>     * Returns true if this Item has been saved but has subsequently been
<a name="line155"></a>     * modified through the current session and therefore the state of this
<a name="line156"></a>     * item as recorded in the session differs from the state of this item as
<a name="line157"></a>     * saved. Within a transaction, isModified on an Item may return false
<a name="line158"></a>     * (because the Item has been saved since the modification) even if the
<a name="line159"></a>     * modification in question is not in persistent storage (because the
<a name="line160"></a>     * transaction has not yet been committed).
<a name="line161"></a>     *
<a name="line162"></a>     * Note that in read-only implementations, this method will always return
<a name="line163"></a>     * false.
<a name="line164"></a>     *
<a name="line165"></a>     * @return boolean true if this item is modified; false otherwise.
<a name="line166"></a>     * @api
<a name="line167"></a>     */</span>
<a name="line168"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> isModified<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line169"></a>&nbsp;
<a name="line170"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line171"></a>     * Determines if this Item object represents the same actual workspace item as the object otherItem.
<a name="line172"></a>     *
<a name="line173"></a>     * Two Item objects represent the same workspace item if all the following
<a name="line174"></a>     * are true:
<a name="line175"></a>     *
<a name="line176"></a>     * - Both objects were acquired through Session objects that were created
<a name="line177"></a>     *   by the same Repository object.
<a name="line178"></a>     * - Both objects were acquired through Session objects bound to the same
<a name="line179"></a>     *   repository workspace.
<a name="line180"></a>     * - The objects are either both Node objects or both Property
<a name="line181"></a>     *   objects.
<a name="line182"></a>     * - If they are Node objects, they have the same identifier.
<a name="line183"></a>     * - If they are Property objects they have identical names and
<a name="line184"></a>     *   isSame() is true of their parent nodes.
<a name="line185"></a>     *
<a name="line186"></a>     * This method does not compare the states of the two items. For example, if
<a name="line187"></a>     * two Item objects representing the same actual workspace item have been
<a name="line188"></a>     * retrieved through two different sessions and one has been modified, then
<a name="line189"></a>     * this method will still return true when comparing these two objects.
<a name="line190"></a>     * Note that if two Item objects representing the same workspace item are
<a name="line191"></a>     * retrieved through the same session they will always reflect the same
<a name="line192"></a>     * state.
<a name="line193"></a>     *
<a name="line194"></a>     * @param \PHPCR\ItemInterface $otherItem the Item object to be tested for identity with this Item.
<a name="line195"></a>     * @return boolean true if this Item object and otherItem represent the same actual repository item; false otherwise.
<a name="line196"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line197"></a>     * @api
<a name="line198"></a>     */</span>
<a name="line199"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> isSame<span style="color: #009900;">&#40;</span>\PHPCR\ItemInterface <span style="color: #000088;">$otherItem</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line200"></a>&nbsp;
<a name="line201"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line202"></a>     * Call the ItemVisitor::visit() method.
<a name="line203"></a>     *
<a name="line204"></a>     * This is less relevant in PHP (Java had it to avoid typecasting in the visitor)
<a name="line205"></a>     * We leave it here, to allow sanity checks or other operations an implementation
<a name="line206"></a>     * might wants to do.
<a name="line207"></a>     *
<a name="line208"></a>     * @param \PHPCR\ItemVisitorInterface $visitor The ItemVisitor to be accepted.
<a name="line209"></a>     * @throws \PHPCR\RepositoryException if an error occurs.
<a name="line210"></a>     * @api
<a name="line211"></a>     */</span>
<a name="line212"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> accept<span style="color: #009900;">&#40;</span>\PHPCR\ItemVisitorInterface <span style="color: #000088;">$visitor</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line213"></a>&nbsp;
<a name="line214"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line215"></a>     * Updates the state of the current item.
<a name="line216"></a>     *
<a name="line217"></a>     * If keepChanges is false, this method discards all pending changes
<a name="line218"></a>     * currently recorded in this Session that apply to this Item or any
<a name="line219"></a>     * of its descendants (that is, the subgraph rooted at this Item) and
<a name="line220"></a>     * returns all items to reflect the current saved state. Outside a
<a name="line221"></a>     * transaction this state is simple the current state of persistent
<a name="line222"></a>     * storage. Within a transaction, this state will reflect persistent
<a name="line223"></a>     * storage as modified by changes that have been saved but not yet
<a name="line224"></a>     * committed.
<a name="line225"></a>     *
<a name="line226"></a>     * If keepChanges is true then pending change are not discarded but
<a name="line227"></a>     * items that do not have changes pending have their state refreshed
<a name="line228"></a>     * to reflect the current saved state, thus revealing changes made by
<a name="line229"></a>     * other sessions.
<a name="line230"></a>     *
<a name="line231"></a>     * @param boolean $keepChanges a boolean
<a name="line232"></a>     * @return void
<a name="line233"></a>     * @throws \PHPCR\InvalidItemStateException if this Item object represents a workspace item that has been removed
<a name="line234"></a>     *                                          (either by this session or another).
<a name="line235"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line236"></a>     * @api
<a name="line237"></a>     */</span>
<a name="line238"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> refresh<span style="color: #009900;">&#40;</span><span style="color: #000088;">$keepChanges</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line239"></a>&nbsp;
<a name="line240"></a>    <span style="color: #009933; font-style: italic;">/**
<a name="line241"></a>     * Removes this item (and its subgraph).
<a name="line242"></a>     *
<a name="line243"></a>     * To persist a removal, a save must be performed that includes the (former)
<a name="line244"></a>     * parent of the removed item within its scope.
<a name="line245"></a>     *
<a name="line246"></a>     * If a node with same-name siblings is removed, this decrements by one the
<a name="line247"></a>     * indices of all the siblings with indices greater than that of the removed
<a name="line248"></a>     * node. In other words, a removal compacts the array of same-name siblings
<a name="line249"></a>     * and causes the minimal re-numbering required to maintain the original
<a name="line250"></a>     * order but leave no gaps in the numbering.
<a name="line251"></a>     *
<a name="line252"></a>     * @return void
<a name="line253"></a>     * @throws \PHPCR\Version\VersionException if the parent node of this item is versionable and checked-in or is
<a name="line254"></a>     *                                         non-versionable but its nearest versionable ancestor is checked-in and
<a name="line255"></a>     *                                         this implementation performs this validation immediately instead of
<a name="line256"></a>     *                                         waiting until save.
<a name="line257"></a>     * @throws \PHPCR\Lock\LockException if a lock prevents the removal of this item and this implementation performs
<a name="line258"></a>     *                                   this validation immediately instead of waiting until save.
<a name="line259"></a>     * @throws \PHPCR\ConstraintViolationException if removing the specified item would violate a node type or
<a name="line260"></a>     *                                             implementation-specific constraint and this implementation performs
<a name="line261"></a>     *                                             this validation immediately instead of waiting until save.
<a name="line262"></a>     * @throws \PHPCR\AccessDeniedException if this item or an item in its subgraph is currently the target of a
<a name="line263"></a>     *                                      REFERENCE property located in this workspace but outside this item's
<a name="line264"></a>     *                                      subgraph and the current Session does not have read access to that
<a name="line265"></a>     *                                      REFERENCE property or if the current Session does not have sufficent
<a name="line266"></a>     *                                      privileges to remove the item.
<a name="line267"></a>     * @throws \PHPCR\RepositoryException if another error occurs.
<a name="line268"></a>     * @see SessionInterface::removeItem(String)
<a name="line269"></a>     * @api
<a name="line270"></a>     */</span>
<a name="line271"></a>    <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">function</span> remove<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>
<a name="line272"></a>&nbsp;
<a name="line273"></a><span style="color: #009900;">&#125;</span>
<a name="line274"></a>&nbsp;</pre>
<div class="header">
<h1>PHPCR</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../todo-list.html">Todo</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/phpcr/iteminterface.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>