<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>PHPCR API and PHPCR-Utils</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" href="../css/template.css" type="text/css"></link><script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="../js/jquery.tools.min.js"></script><script type="text/javascript" src="../js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="../js/template.js"></script></head><body><div id="content"><h1 class="file">phpcr-utils/src/PHPCR/Util/PathHelper.php</h1><div id="file-nav-box"><div id="file-nav-options">
              Show:
              <img src="../images/icons/visibility_public.png" alt="Public" id="show-public"></img><img src="../images/icons/visibility_protected.png" alt="Protected" id="show-protected"></img><img src="../images/icons/visibility_private.png" alt="Private" id="show-private"></img><span class="attribute" id="show-inherited">inherited</span></div><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\PHPCR\Util\PathHelper">\PHPCR\Util\PathHelper</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div class="short-description">This file is part of the PHPCR Utils</div><div class="long-description"><p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div></div><dl class="file-info"><dt>License</dt><dd><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache Software License 2.0</a>
         
    </dd><dt>Link</dt><dd><a href="http://phpcr.github.com/">http://phpcr.github.com/</a>
         
    </dd></dl><a name="classes" class="anchor"></a><a id="\PHPCR\Util\PathHelper" class="anchor"></a><h2 class="class">\PHPCR\Util\PathHelper<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><small class="package"><b>Package: </b>Default</small><div class="short-description">Static methods to handle path operations for PHPCR implementations</div><div class="long-description"></div><dl class="class-info"><dt>Author</dt><dd><a href="mailto:david@liip.ch">David Buchmann</a>
         
    </dd></dl><h3>Methods</h3><div><a id="\PHPCR\Util\PathHelper::__construct()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">__construct</span><span class="nb-faded-text">()</span> : void</code><div class="description"><p class="short_description">Do not create an instance of this class</p></div><div class="code-tabs"><div class="long-description"></div></div><div class="clear"></div></div><a id="\PHPCR\Util\PathHelper::absolutizePath()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">absolutizePath</span><span class="nb-faded-text">(string $path, string $context, bool $destination = false, bool $throw = true)</span> : string</code><div class="description"><span class="attribute">static</span><p class="short_description">In addition to normalizing and validating, this method combines the path
with a context if it is not absolute.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$path</th><td>string</td><td><em><p>A relative or absolute path</p></em></td></tr><tr><th>$context</th><td>string</td><td><em><p>The absolute path context to make $path absolute if needed</p>
</em></td></tr><tr><th>$destination</th><td>bool</td><td><em><p>whether this is a destination path (by copy or
     move), meaning [] is not allowed in validation.</p>
</em></td></tr><tr><th>$throw</th><td>bool</td><td><em><p>whether to throw an exception if validation fails or
     just to return false.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>The normalized, absolute path or false if $throw was
     false and the path invalid</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/phpcr.src.PHPCR.RepositoryException.html#\PHPCR\RepositoryException">\PHPCR\RepositoryException</a></td><td><em>if the path can not be made into a valid
     absolute path and $throw is true</em></td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\PathHelper::assertValidAbsolutePath()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">assertValidAbsolutePath</span><span class="nb-faded-text">(string $path, bool $destination = false, bool $throw = true)</span> : bool</code><div class="description"><span class="attribute">static</span><p class="short_description">Check whether this is a syntactically valid absolute path.</p></div><div class="code-tabs"><div class="long-description"><p>The JCR specification is posing few limits on valid paths, your
implementation probably wants to provide its own code based on this one</p>

<p>Non-normalized paths are considered invalid, i.e. /node/. is /node and /my/node/.. is /my</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$path</th><td>string</td><td><em><p>The path to validate</p></em></td></tr><tr><th>$destination</th><td>bool</td><td><em><p>whether this is a destination path (by copy or
     move), meaning [] is not allowed. If your implementation does not
     support same name siblings, just always pass true for this</p>
</em></td></tr><tr><th>$throw</th><td>bool</td><td><em><p>whether to throw an exception on validation errors</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>bool</td><td>true if valid, false if not valid and $throw was false</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/phpcr.src.PHPCR.RepositoryException.html#\PHPCR\RepositoryException">\PHPCR\RepositoryException</a></td><td><em>if the path contains invalid characters and $throw is true</em></td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\PathHelper::assertValidLocalName()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">assertValidLocalName</span><span class="nb-faded-text">(string $name,  $throw = true)</span> : bool</code><div class="description"><span class="attribute">static</span><p class="short_description">Minimal check to see if this local node name conforms to the jcr
specification for a name without the namespace.</p></div><div class="code-tabs"><div class="long-description"><p>Note that the empty string is actually a valid node name (the root node)</p>

<p>If it can't be avoided, implementations may restrict validity further,
but this will reduce interchangeability, thus it is better to properly
encode and decode characters that are not natively allowed by a storage
engine.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$name</th><td>string</td><td><em><p>The name to check</p></em></td></tr><tr><th>$throw</th><td></td><td><em></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>bool</td><td>true if valid, false if not valid and $throw was false</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/phpcr.src.PHPCR.RepositoryException.html#\PHPCR\RepositoryException">\PHPCR\RepositoryException</a></td><td><em>if the name is invalid and $throw is true</em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>See</dt><dd>\PHPCR\Util\http://www.day.com/specs/jcr/2.0/3_Repository_Model.html#3.2.2%20Local%20Names
         
    </dd></dl></div><div class="clear"></div></div><a id="\PHPCR\Util\PathHelper::getNodeName()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">getNodeName</span><span class="nb-faded-text">(string $path)</span> : string</code><div class="description"><span class="attribute">static</span><p class="short_description">Get the name from the path, including eventual namespace prefix.</p></div><div class="code-tabs"><div class="long-description"><p>You must make sure to only pass valid paths to this method.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$path</th><td>string</td><td><em><p>a valid absolute path, like /content/jobs/data</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>the name, that is the string after the last "/"</td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\PathHelper::getParentPath()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">getParentPath</span><span class="nb-faded-text">(string $path)</span> : string</code><div class="description"><span class="attribute">static</span><p class="short_description">Get the parent path of a valid absolute path.</p></div><div class="code-tabs"><div class="long-description"></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$path</th><td>string</td><td><em><p>the path to get the parent from</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>the path with the last segment removed</td></tr></table></div><div class="clear"></div></div><a id="\PHPCR\Util\PathHelper::normalizePath()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">normalizePath</span><span class="nb-faded-text">(string $path, bool $destination = false, bool $throw = true)</span> : string</code><div class="description"><span class="attribute">static</span><p class="short_description">Normalize path according to JCR's spec (3.4.5) and then validates it
using the assertValidAbsolutePath method.</p></div><div class="code-tabs"><div class="long-description"><ul>
  <li>All self segments(.) are removed.</li>
  <li>All redundant parent segments(..) are collapsed.</li>
</ul>

<p>Note: A well-formed input path implies a well-formed and normalized path returned.</p></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$path</th><td>string</td><td><em><p>The path to normalize.</p></em></td></tr><tr><th>$destination</th><td>bool</td><td><em><p>whether this is a destination path (by copy or
     move), meaning [] is not allowed in validation.</p>
</em></td></tr><tr><th>$throw</th><td>bool</td><td><em><p>whether to throw an exception if validation fails or
     just to return false.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>The normalized path or false if $throw was false and the path invalid</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/phpcr.src.PHPCR.RepositoryException.html#\PHPCR\RepositoryException">\PHPCR\RepositoryException</a></td><td><em>if the path is not a valid absolute path and
     $throw is true</em></td></tr></table></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.0.0a12</a>.
        </small></body></html>
